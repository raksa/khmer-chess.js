{"version":3,"file":"khmer-chess.umd.js","mappings":"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","sources":["webpack:///webpack/universalModuleDefinition","webpack:///./KhmerChess.ts","webpack:///./brain/HVPont.ts","webpack:///./brain/MoveHelper.ts","webpack:///./brain/Rectangle.ts","webpack:///./brain/boardEventController.ts","webpack:///./brain/boardHelper.ts","webpack:///./brain/constant.ts","webpack:///./brain/genMask.ts","webpack:///./brain/index.ts","webpack:///./brain/jsis.ts","webpack:///./index.ts","webpack:///./kpgn/Captured.ts","webpack:///./kpgn/KPGN.ts","webpack:///./kpgn/Move.ts","webpack:///./kpgn/Player.ts","webpack:///./kpgn/Result.ts","webpack:///./kpgn/Timer.ts","webpack:///./kpgn/index.ts","webpack:///./other/BoardEventController.ts","webpack:///./other/EventHandler.ts","webpack:///./other/index.ts","webpack:///./other/table.ts","webpack:///./ren/Board.ts","webpack:///./ren/CountDown.ts","webpack:///./ren/Graveyard.ts","webpack:///./ren/KAttacked.ts","webpack:///./ren/KqMoved.ts","webpack:///./ren/Piece.ts","webpack:///./ren/PieceIndex.ts","webpack:///./ren/Point.ts","webpack:///./ren/REN.ts","webpack:///./ren/constant.ts","webpack:///./ren/index.ts","webpack:///webpack/bootstrap","webpack:///webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar package_json_1 = __importDefault(require(\"../package.json\"));\nvar brain_1 = require(\"./brain\");\nvar KPGN_1 = __importDefault(require(\"./kpgn/KPGN\"));\nvar BoardEventController_1 = __importStar(require(\"./other/BoardEventController\"));\nvar table_1 = __importDefault(require(\"./other/table\"));\nvar constant_1 = require(\"./ren/constant\");\nvar REN_1 = __importDefault(require(\"./ren/REN\"));\nvar KhmerChess = /** @class */ (function () {\n    function KhmerChess(renStr) {\n        this.renInstance = REN_1.default.fromString(renStr);\n        this.kpgnInstance = new KPGN_1.default(this.renInstance);\n        this.boardEventController = new BoardEventController_1.default();\n    }\n    KhmerChess.prototype.loadRENStr = function (renStr) {\n        this.renInstance = REN_1.default.fromString(renStr);\n    };\n    KhmerChess.prototype.resetBoard = function () {\n        this.renInstance = REN_1.default.fromString();\n    };\n    KhmerChess.prototype.getCanMoves = function () {\n        var pieceIndices = this.renInstance.genAllCanMoves();\n        return pieceIndices;\n    };\n    KhmerChess.prototype.getCanMovePointsByPoint = function (point) {\n        var canMovePoints = this.renInstance.getCanMovePointsByPoint(point);\n        return canMovePoints;\n    };\n    KhmerChess.prototype.getAttacker = function () {\n        return this.renInstance.getAttacker();\n    };\n    KhmerChess.prototype.getWinColor = function () {\n        return this.renInstance.getWinColor();\n    };\n    KhmerChess.prototype.getStuckColor = function () {\n        // TODO:\n        return null;\n    };\n    KhmerChess.prototype.isDraw = function () {\n        return this.getStuckColor() || this.getDrawCountColor();\n    };\n    KhmerChess.prototype.getDrawCountColor = function () {\n        // TODO:\n        return null;\n    };\n    KhmerChess.prototype.gameOver = function () {\n        return this.getWinColor() || this.isDraw();\n    };\n    KhmerChess.prototype.validateRENStr = function (renStr) {\n        try {\n            REN_1.default.fromString(renStr);\n            return { valid: true, error_number: 0, error: 'No errors.' };\n        }\n        catch (error) {\n            return { valid: false, error_number: 1, error: error.message };\n        }\n    };\n    KhmerChess.prototype.getRENStr = function () {\n        return this.renInstance.toString();\n    };\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoardMultiArray\", {\n        get: function () {\n            return this.renInstance.board.piecesMultiArray;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoard\", {\n        get: function () {\n            return this.renInstance.board.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInGraveyard\", {\n        get: function () {\n            return this.renInstance.graveyard.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Khmer Portable Game Notation <file-name>.kpgn.json\n    KhmerChess.prototype.getKPGN = function () {\n        return this.kpgnInstance.toJson();\n    };\n    KhmerChess.prototype.loadKpgn = function (kpgnJosn, options) {\n        this.kpgnInstance = new KPGN_1.default(this.renInstance);\n    };\n    KhmerChess.prototype.drawAscii = function () {\n        return table_1.default(this.renInstance);\n    };\n    Object.defineProperty(KhmerChess.prototype, \"turn\", {\n        get: function () {\n            return this.renInstance.turn;\n        },\n        set: function (turn) {\n            this.renInstance.turn = turn;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KhmerChess.prototype.move = function (moveFromIndex, moveToIndex) {\n        var move = this.renInstance.move(moveFromIndex, moveToIndex);\n        this.kpgnInstance.moves.push(move);\n        return move;\n    };\n    KhmerChess.prototype.undoMove = function () {\n        // TODO:\n        return false;\n    };\n    /**\n     * Move all pieces to graveyard except kings\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\n     */\n    KhmerChess.prototype.clearBoard = function () {\n        this.renInstance = REN_1.default.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\n    };\n    KhmerChess.prototype.getHistories = function () {\n        return this.kpgnInstance.moves;\n    };\n    KhmerChess.prototype.checkBoardEvent = function () {\n        var pieceIndex = this.getAttacker();\n        if (!brain_1.jsis.isNull(pieceIndex)) {\n            var boardEvent = new BoardEventController_1.BoardEvent({\n                flag: constant_1.EVENT_FLAG_ATTACK,\n                actorPieceIndex: pieceIndex,\n            });\n            this.boardEventController.fireEvent(boardEvent);\n        }\n        var winColor = this.getWinColor();\n        if (!brain_1.jsis.isNull(winColor)) {\n            var boardEvent = new BoardEventController_1.BoardEvent({\n                flag: constant_1.EVENT_FLAG_WINN,\n                actorPieceIndex: pieceIndex,\n            });\n            this.boardEventController.fireEvent(boardEvent);\n        }\n    };\n    KhmerChess.prototype.addBoardEventListener = function (listener) {\n        this.boardEventController.addBoardEventListener(listener);\n    };\n    KhmerChess.prototype.removeBoardEventListener = function (listener) {\n        this.boardEventController.removeBoardEventListener(listener);\n    };\n    KhmerChess.title = package_json_1.default.name;\n    KhmerChess.version = package_json_1.default.version;\n    return KhmerChess;\n}());\nexports.default = KhmerChess;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nvar jsis_1 = __importDefault(require(\"./jsis\"));\nvar HVPont = /** @class */ (function () {\n    function HVPont(h, v) {\n        if (jsis_1.default.isUndefined(v)) {\n            h = h[0];\n            v = h[1];\n        }\n        this.h = h;\n        this.v = Number(v);\n    }\n    Object.defineProperty(HVPont.prototype, \"x\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"y\", {\n        get: function () {\n            return this.v - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return HVPont;\n}());\nexports.default = HVPont;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar boardHelper_1 = __importDefault(require(\"./boardHelper\"));\nvar constant_1 = require(\"./constant\");\nvar MoveHelper = /** @class */ (function () {\n    function MoveHelper() {\n    }\n    Object.defineProperty(MoveHelper.prototype, \"isWhiteTurn\", {\n        get: function () {\n            return Piece_1.default.isWhiteColor(this.currentTurn);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MoveHelper.prototype.init = function (option) {\n        this.piecesString = option.piecesString;\n        this.currentTurn = option.currentTurn;\n        this.isQueenMoved = option.isQueenMoved;\n        this.isKingMoved = option.isKingMoved;\n        this.genCanMove = option.genCanMove;\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\n        this.whiteMoves = [];\n        this.blackMoves = [];\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n        this.winColor = null;\n        this.stuckColor = null;\n    };\n    MoveHelper.prototype.generateCanMoves = function () {\n        var _this = this;\n        var filter = boardHelper_1.default.filterPieceInBoard(this.piecesString);\n        this.whiteMoves = filter.whitePieces;\n        this.blackMoves = filter.blackPieces;\n        var genMoves = function (pieceIndices) {\n            pieceIndices.forEach(function (pieceIndex) {\n                var isHaveMoved = _this.isKingMoved;\n                if (!pieceIndex.piece.isTypeKing) {\n                    isHaveMoved = pieceIndex.piece.isTypeQueen ? _this.isQueenMoved : false;\n                }\n                var canMovePoints = _this.genCanMovePointsByPiecePoint(pieceIndex.point, pieceIndex.piece, _this.piecesString, isHaveMoved);\n                pieceIndex.canMovePoints = canMovePoints;\n            });\n        };\n        genMoves(this.whiteMoves);\n        genMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.cleanPieceNoMove = function () {\n        var cleanMoves = function (pieces) {\n            var isTrue = true;\n            while (isTrue) {\n                isTrue = false;\n                for (var i = 0; i < pieces.length; i++) {\n                    var piece = pieces[i];\n                    if (!piece.canMovePoints.length) {\n                        pieces.splice(i, 1);\n                        isTrue = true;\n                        break;\n                    }\n                }\n            }\n        };\n        cleanMoves(this.whiteMoves);\n        cleanMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.checkIfKingInDanger = function () {\n        this.whiteKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.whiteKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.blackKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n        this.blackKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n    };\n    MoveHelper.prototype.genWinLost = function () {\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_BLACK;\n        }\n        else if (this.blackKingInDanger && !this.blackMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_WHITE;\n        }\n    };\n    MoveHelper.prototype.getStuck = function () {\n        if (this.winColor) {\n            return;\n        }\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_WHITE;\n        }\n        else if (!this.isWhiteTurn && !this.blackMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_BLACK;\n        }\n    };\n    MoveHelper.prototype.calcCanMove = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        var moves = [];\n        if (this.genCanMove) {\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        var anotherMoves = [];\n        if (this.genCanMoveForAnother) {\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        return {\n            moves: moves,\n            anotherMoves: anotherMoves,\n        };\n    };\n    MoveHelper.prototype.calcState = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        this.checkIfKingInDanger();\n        this.genWinLost();\n        this.getStuck();\n        return {\n            blackKingInDanger: this.blackKingInDanger,\n            whiteKingInDanger: this.whiteKingInDanger,\n            blackKingWillInDanger: this.blackKingWillInDanger,\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\n            winColor: this.winColor,\n            stuckColor: this.stuckColor,\n            blackCountable: boardHelper_1.default.checkCountable(constant_1.PIECE_COLOR_BLACK, this.piecesString),\n            whiteCountable: boardHelper_1.default.checkCountable(constant_1.PIECE_COLOR_WHITE, this.piecesString),\n        };\n    };\n    MoveHelper.prototype.calCount = function (option) {\n        return {\n            countingBlack: boardHelper_1.default.checkCount(constant_1.PIECE_COLOR_BLACK, option.piecesString, option.force),\n            countingWhite: boardHelper_1.default.checkCount(constant_1.PIECE_COLOR_WHITE, option.piecesString, option.force),\n        };\n    };\n    MoveHelper.prototype.genCanMovePointsByPiecePoint = function (point, piece, piecesString, isHasMoved) {\n        return boardHelper_1.default.genCanMovePointsByPiecePoint(point.index, piece, piecesString, isHasMoved);\n    };\n    return MoveHelper;\n}());\nexports.default = MoveHelper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_1 = require(\"./constant\");\nvar Rectangle = /** @class */ (function () {\n    function Rectangle(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Rectangle.prototype.isContainsPoint = function (point) {\n        var x = point.x, y = point.y;\n        var isContainsPoint = this.x <= x &&\n            (this.x + this.width) >= x &&\n            this.y <= y &&\n            (this.y + this.height) >= y;\n        return isContainsPoint;\n    };\n    Rectangle.isValidPoint = function (point) {\n        return new Rectangle(0, 0, constant_1.ROW_LAST_INDEX, constant_1.ROW_LAST_INDEX).isContainsPoint(point);\n    };\n    return Rectangle;\n}());\nexports.default = Rectangle;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar EventHandler_1 = __importDefault(require(\"../other/EventHandler\"));\nvar TRIGGER_MOVE = 'trigger-move';\nvar BoardEventController = /** @class */ (function (_super) {\n    __extends(BoardEventController, _super);\n    function BoardEventController() {\n        return _super.call(this, {\n            events: {\n                TRIGGER_MOVE: TRIGGER_MOVE,\n            },\n        }) || this;\n    }\n    BoardEventController.prototype.removeOnTriggerMoveEventListener = function (listener) {\n        this._removeOnEventListener(TRIGGER_MOVE, listener);\n    };\n    BoardEventController.prototype.addOnTriggerMoveEventListener = function (listener) {\n        this._addOnEventListener(TRIGGER_MOVE, listener);\n    };\n    return BoardEventController;\n}(EventHandler_1.default));\nexports.default = BoardEventController;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar jsis_1 = __importDefault(require(\"./jsis\"));\nvar genMask_1 = __importDefault(require(\"./genMask\"));\nvar constant_1 = require(\"./constant\");\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Rectangle_1 = __importDefault(require(\"./Rectangle\"));\nvar ren_1 = require(\"../ren\");\nvar mask = genMask_1.default();\nvar BoardHelper = /** @class */ (function () {\n    function BoardHelper() {\n        this.convertMask = function (point1, index, color) {\n            var sign = Piece_1.default.isWhiteColor(color) ? 1 : -1;\n            var point2 = Point_1.default.fromIndex(index);\n            point1.x = point1.x * sign + point2.x;\n            point1.y = point1.y * sign + point2.y;\n            return Rectangle_1.default.isValidPoint(point1) ? point1.index : null;\n        };\n    }\n    BoardHelper.prototype.getCharPieceFromString = function (piecesString, index) {\n        if (Point_1.default.isIndexInBoard(index) && piecesString.length === constant_1.CELL_COUNT) {\n            return piecesString[index];\n        }\n        return constant_1.EMPTY_PIECE;\n    };\n    BoardHelper.prototype.getCharPieceInPos = function (index, piecesString) {\n        return this.getCharPieceFromString(piecesString, index);\n    };\n    BoardHelper.prototype.getPieceByIndex = function (index, piecesString) {\n        var charCode = this.getCharPieceInPos(index, piecesString);\n        return {\n            isValidPiece: Piece_1.default.isValidPiece(charCode),\n            piece: Piece_1.default.fromCharCode(charCode),\n        };\n    };\n    BoardHelper.prototype.getPieceCanMovePoses = function (index, piece) {\n        var _this = this;\n        var pieceIndices = [];\n        mask[piece.type].forEach(function (_pos) {\n            var newIndex = _this.convertMask(new Point_1.default(_pos[0], _pos[1]), index, piece.color);\n            if (!jsis_1.default.isNull(newIndex)) {\n                pieceIndices.push(newIndex);\n            }\n        });\n        return pieceIndices;\n    };\n    BoardHelper.prototype.getPieceCanMovePosesValid = function (index, piece, piecesString) {\n        var _poses = this.getPieceCanMovePoses(index, piece);\n        var pieceIndices = [];\n        var n = _poses.length;\n        var thisPos = Point_1.default.fromIndex(index);\n        for (var i = 0; i < n; i++) {\n            var p = Point_1.default.fromIndex(_poses[i]);\n            var distPiece = this.getPieceByIndex(p.index, piecesString);\n            if (distPiece.isValidPiece) {\n                if (piece.color === distPiece.piece.color ||\n                    (piece.isTypeFish && p.x === thisPos.x)) {\n                    p = null;\n                }\n            }\n            else {\n                if (piece.isTypeFish && p.x !== thisPos.x) {\n                    p = null;\n                }\n            }\n            if (!jsis_1.default.isNull(p) && piece.isTypeBoat) {\n                var _x = thisPos.x;\n                var _y = thisPos.y;\n                if (p.x === thisPos.x) {\n                    var _n = Math.abs(p.y - thisPos.y);\n                    var _s = thisPos.y < p.y ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n                else if (p.y === thisPos.y) {\n                    var _n = Math.abs(p.x - thisPos.x);\n                    var _s = thisPos.x < p.x ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (!jsis_1.default.isNull(p)) {\n                pieceIndices.push(_poses[i]);\n            }\n        }\n        return pieceIndices;\n    };\n    BoardHelper.prototype.replacePiecesStringAtIndex = function (piecesString, charCode, index) {\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\n    };\n    BoardHelper.prototype.injectPiece = function (piecesString, index1, index2) {\n        var c = piecesString[index1];\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\n            return null;\n        }\n        piecesString = this.replacePiecesStringAtIndex(piecesString, constant_1.EMPTY_PIECE, index1);\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\n        return piecesString;\n    };\n    BoardHelper.prototype.getKingWillInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.isValidPiece && p.piece.color !== color &&\n                p.piece.isTypeBoat) {\n                var _poses = this.getPieceCanMovePoses(i, p.piece);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.getKingInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.isValidPiece && p.piece.color !== color) {\n                var _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.genCanMovePointsByPiecePoint = function (index, piece, piecesString, isHasMoved) {\n        var _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\n        var isHaveCaptured = this.isHaveCaptured(piecesString);\n        if (piece.isTypeKing) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n                p = this.convertMask(new Point_1.default(-2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        else if (piece.isTypeQueen) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(-0, 2), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        var n = _poses.length;\n        var points = [];\n        for (var i = 0; i < n; i++) {\n            var str = this.injectPiece(piecesString, index, _poses[i]);\n            if (jsis_1.default.isNull(this.getKingInDanger(piece.color, str))) {\n                points.push(Point_1.default.fromIndex(_poses[i]));\n            }\n        }\n        return points;\n    };\n    BoardHelper.prototype.isCharPiecesInBoard = function (code, piecesString) {\n        return !!~piecesString.indexOf(code);\n    };\n    BoardHelper.prototype.getPiecesInBoard = function (piecesString) {\n        return piecesString.split('').filter(function (charCode) {\n            return Piece_1.default.isValidPiece(charCode);\n        });\n    };\n    BoardHelper.prototype.isHaveCaptured = function (piecesString) {\n        return this.getPiecesInBoard(piecesString).length < constant_1.ROW_NUMBER * 4;\n    };\n    BoardHelper.prototype.filterPieceInBoard = function (piecesString) {\n        var whitePieces = [];\n        var blackPieces = [];\n        for (var i = 0; i < piecesString.length; i++) {\n            var charCode = piecesString[i];\n            if (Piece_1.default.isValidPiece(charCode)) {\n                var pieceIndex = new ren_1.PieceIndex(Point_1.default.fromIndex(i), Piece_1.default.fromCharCode(charCode));\n                if (pieceIndex.piece.isColorWhite) {\n                    whitePieces.push(pieceIndex);\n                }\n                else {\n                    blackPieces.push(pieceIndex);\n                }\n            }\n        }\n        return {\n            whitePieces: whitePieces,\n            blackPieces: blackPieces,\n        };\n    };\n    BoardHelper.prototype.extractPiecesToArray = function (piecesString) {\n        var _a;\n        var piecesStringArr = piecesString.split('');\n        var pieceAll = (_a = {},\n            _a[constant_1.PIECE_COLOR_BLACK] = [],\n            _a[constant_1.PIECE_COLOR_WHITE] = [],\n            _a);\n        piecesStringArr.forEach(function (charCode) {\n            if (charCode === constant_1.EMPTY_PIECE) {\n                return;\n            }\n            var piece = Piece_1.default.fromCharCode(charCode);\n            pieceAll[piece.color].push(piece.type);\n        });\n        return pieceAll;\n    };\n    BoardHelper.prototype.isStateCount = function (c, piecesString) {\n        var allPieces = this.extractPiecesToArray(piecesString);\n        return allPieces[c].length === 1;\n    };\n    BoardHelper.prototype.checkCountable = function (color, piecesString) {\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        return weaker.length <= 2 && stronger.length >= 2;\n    };\n    BoardHelper.prototype.checkCount = function (color, piecesString, force) {\n        var countChar = function (str, c) {\n            return str.join('').split(c).length - 1;\n        };\n        var charExist = function (str, c) {\n            return !!~str.indexOf(c);\n        };\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        if (weaker.length === 1 && stronger.length > 1) {\n            if (!charExist(stronger, constant_1.PIECE_TYPE_FISH)) {\n                var count = 64;\n                var toukCount = countChar(stronger, constant_1.PIECE_TYPE_BOAT);\n                if (toukCount) {\n                    count = toukCount > 1 ? 8 : 16;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL) > 1) {\n                    count = 22;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_HORSE) > 1) {\n                    count = 32;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL)) {\n                    count = 44;\n                }\n                return [stronger.length + 1, count];\n            }\n            return [0, 64];\n        }\n        else if (force && this.checkCountable(color, piecesString)) {\n            return [0, 64];\n        }\n        return null;\n    };\n    BoardHelper.prototype.isUpgradable = function (piece, point) {\n        if (piece.isTypeFish) {\n            if (piece.isColorBlack && point.y <= 2) {\n                return true;\n            }\n            if (piece.isColorWhite && point.y >= 5) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return BoardHelper;\n}());\n;\nexports.default = new BoardHelper();\n","\"use strict\";\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = exports.HORIZONTAL_NOTE_LETTERS_ENGLISH = exports.VERTICAL_NOTE_LETTERS = exports.HORIZONTAL_NOTE_LETTERS = exports.HORIZONTAL_CODE_LETTERS = exports.CELL_COUNT = exports.ROW_LAST_INDEX = exports.ROW_FIRST_INDEX = exports.ROW_NUMBER = exports.BOARD_SEPARATOR = exports.PIECE_COLOR_EMPTY = exports.EMPTY_PIECE = exports.PIECE_NAMES_ENGLISH = exports.PIECE_NAMES = exports.PIECE_TYPE_TRANSFORM_FISH = exports.PIECE_TYPE_FISH = exports.PIECE_TYPE_QUEEN = exports.PIECE_TYPE_KING = exports.PIECE_TYPE_GENERAL = exports.PIECE_TYPE_HORSE = exports.PIECE_TYPE_BOAT = exports.COLOR_NAMES_ENGLISH = exports.COLOR_NAMES = exports.PIECE_COLOR_BLACK = exports.PIECE_COLOR_WHITE = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nexports.PIECE_COLOR_WHITE = 'w';\nexports.PIECE_COLOR_BLACK = 'b';\nexports.COLOR_NAMES = (_a = {},\n    _a[exports.PIECE_COLOR_BLACK] = '',\n    _a[exports.PIECE_COLOR_WHITE] = '',\n    _a);\nexports.COLOR_NAMES_ENGLISH = (_b = {},\n    _b[exports.PIECE_COLOR_BLACK] = 'black',\n    _b[exports.PIECE_COLOR_WHITE] = 'white',\n    _b);\nexports.PIECE_TYPE_BOAT = 'b'; // Boat\nexports.PIECE_TYPE_HORSE = 'h'; // Horse\nexports.PIECE_TYPE_GENERAL = 'g'; // General\nexports.PIECE_TYPE_KING = 'k'; // King\nexports.PIECE_TYPE_QUEEN = 'q'; // Queen\nexports.PIECE_TYPE_FISH = 'f'; // Fish\nexports.PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\nexports.PIECE_NAMES = (_c = {},\n    _c[exports.PIECE_TYPE_BOAT] = '',\n    _c[exports.PIECE_TYPE_HORSE] = '',\n    _c[exports.PIECE_TYPE_GENERAL] = '',\n    _c[exports.PIECE_TYPE_KING] = '',\n    _c[exports.PIECE_TYPE_QUEEN] = '',\n    _c[exports.PIECE_TYPE_FISH] = '',\n    _c[exports.PIECE_TYPE_TRANSFORM_FISH] = '',\n    _c);\nexports.PIECE_NAMES_ENGLISH = (_d = {},\n    _d[exports.PIECE_TYPE_BOAT] = 'boat',\n    _d[exports.PIECE_TYPE_HORSE] = 'horse',\n    _d[exports.PIECE_TYPE_GENERAL] = 'general',\n    _d[exports.PIECE_TYPE_KING] = 'king',\n    _d[exports.PIECE_TYPE_QUEEN] = 'queen',\n    _d[exports.PIECE_TYPE_FISH] = 'fish',\n    _d[exports.PIECE_TYPE_TRANSFORM_FISH] = 'transformed-fish',\n    _d);\nexports.EMPTY_PIECE = '.';\nexports.PIECE_COLOR_EMPTY = '.';\nexports.BOARD_SEPARATOR = '/';\nexports.ROW_NUMBER = 8;\nexports.ROW_FIRST_INDEX = 0;\nexports.ROW_LAST_INDEX = 7;\nexports.CELL_COUNT = exports.ROW_NUMBER * exports.ROW_NUMBER;\nexports.HORIZONTAL_CODE_LETTERS = 'abcdefgh';\nexports.HORIZONTAL_NOTE_LETTERS = ['', '', '', '', '', '', '', ''];\nexports.VERTICAL_NOTE_LETTERS = ['', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', ''];\nexports.HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 30 }, function (_, i) { return \"\" + (i + 1); });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nfunction genMask() {\n    var mask = {};\n    mask[constant_1.PIECE_TYPE_BOAT] = [\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\n    ];\n    mask[constant_1.PIECE_TYPE_HORSE] = [\n        [-1, -2],\n        [1, -2],\n        [-2, -1],\n        [2, -1],\n        [-1, 2],\n        [1, 2],\n        [-2, 1],\n        [2, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_QUEEN] = [\n        [-1, -1],\n        [1, -1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_GENERAL] = mask[constant_1.PIECE_TYPE_QUEEN].concat([\n        [0, 1],\n    ]);\n    mask[constant_1.PIECE_TYPE_KING] = mask[constant_1.PIECE_TYPE_GENERAL].concat([\n        [0, -1],\n        [1, 0],\n        [-1, 0],\n    ]);\n    mask[constant_1.PIECE_TYPE_FISH] = [\n        [0, 1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_TRANSFORM_FISH] = mask[constant_1.PIECE_TYPE_QUEEN];\n    return mask;\n}\nexports.default = genMask;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoveHelper = exports.HVPont = exports.jsis = exports.genMask = exports.boardHelper = exports.boardEventController = exports.Rectangle = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Rectangle_1 = require(\"./Rectangle\");\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return __importDefault(Rectangle_1).default; } });\nvar boardEventController_1 = require(\"./boardEventController\");\nObject.defineProperty(exports, \"boardEventController\", { enumerable: true, get: function () { return __importDefault(boardEventController_1).default; } });\nvar boardHelper_1 = require(\"./boardHelper\");\nObject.defineProperty(exports, \"boardHelper\", { enumerable: true, get: function () { return __importDefault(boardHelper_1).default; } });\nvar genMask_1 = require(\"./genMask\");\nObject.defineProperty(exports, \"genMask\", { enumerable: true, get: function () { return __importDefault(genMask_1).default; } });\nvar jsis_1 = require(\"./jsis\");\nObject.defineProperty(exports, \"jsis\", { enumerable: true, get: function () { return __importDefault(jsis_1).default; } });\nvar HVPont_1 = require(\"./HVPont\");\nObject.defineProperty(exports, \"HVPont\", { enumerable: true, get: function () { return __importDefault(HVPont_1).default; } });\nvar MoveHelper_1 = require(\"./MoveHelper\");\nObject.defineProperty(exports, \"MoveHelper\", { enumerable: true, get: function () { return __importDefault(MoveHelper_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar jsis = {\n    isValid: function (v) {\n        return !this.isNull(v) && !this.isUndefined(v);\n    },\n    isNull: function (v) {\n        return v === null;\n    },\n    isUndefined: function (v) {\n        return typeof v === 'undefined';\n    },\n    isString: function (str) {\n        return this.isValid(str) && typeof str === 'string';\n    },\n    isNotEmpty: function (str) {\n        // eslint-disable-next-line eqeqeq\n        return this.isValidString(str) && str != '';\n    },\n    isNumber: function (n) {\n        return this.isValid(n) && typeof n === 'number';\n    },\n    isStringNumber: function (n) {\n        // eslint-disable-next-line eqeqeq\n        return this.isString(n) && n != '' && !isNaN(Number(n));\n    },\n    isArray: function (arr) {\n        return this.isValid(arr) && arr instanceof Array;\n    },\n    isFunction: function (f) {\n        return this.isValid(f) && typeof f === 'function';\n    },\n    isObject: function (o) {\n        return this.isValid(o) && o instanceof Object;\n    },\n    isBoolean: function (b) {\n        return this.isValid(b) && typeof b === 'boolean';\n    },\n    isTrue: function (b) {\n        return this.isValidBoolean(b) && b;\n    },\n    isFalse: function (b) {\n        return this.isValidBoolean(b) && !b;\n    },\n    isPoint: function (p) {\n        var isPoint = this.isValid(p) &&\n            this.isValidObject(p) &&\n            this.isValidNumber(p.x) &&\n            this.isValidNumber(p.y);\n        return isPoint;\n    },\n    isSize: function (size) {\n        var isSize = this.isValid(size) &&\n            this.isValidObject(size) &&\n            this.isValidNumber(size.width) &&\n            this.isValidNumber(size.height);\n        return isSize;\n    },\n    isOdd: function (n) {\n        return !!(n % 2);\n    },\n    isEven: function (n) {\n        return !this.isOdd(n);\n    },\n    isUpperCase: function (str) {\n        return str === str.toUpperCase();\n    },\n};\nexports.default = jsis;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KhmerChess = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n__exportStar(require(\"./brain\"), exports);\n__exportStar(require(\"./kpgn\"), exports);\n__exportStar(require(\"./ren\"), exports);\n__exportStar(require(\"./other\"), exports);\nvar KhmerChess_1 = require(\"./KhmerChess\");\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Captured = /** @class */ (function () {\n    function Captured(_a) {\n        var piece = _a.piece, fromBoardPoint = _a.fromBoardPoint, toGraveyardPoint = _a.toGraveyardPoint;\n        this.piece = piece;\n        this.fromBoardPoint = fromBoardPoint;\n        this.toGraveyardPoint = toGraveyardPoint;\n    }\n    return Captured;\n}());\nexports.default = Captured;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Player_1 = __importDefault(require(\"./Player\"));\nvar Result_1 = __importDefault(require(\"./Result\"));\n/**\n * Khmer portable game notation\n */\n// TODO: improve KPGN\nvar KPGN = /** @class */ (function () {\n    function KPGN(renInstant) {\n        this.players = {\n            white: new Player_1.default(),\n            black: new Player_1.default(),\n        };\n        this.result = {\n            last: {\n                whiteWin: false,\n                blackWin: false,\n            },\n            white: new Result_1.default(),\n        };\n        this.renInstant = renInstant;\n        this.moves = [];\n    }\n    KPGN.prototype.toJson = function () {\n        return {\n            event: this.event,\n            date: this.date,\n            location: this.location,\n            players: {\n                white: this.players.white.toJson(),\n                black: this.players.black.toJson(),\n            },\n            result: {\n                last: {\n                    whiteWin: this.result.last.whiteWin,\n                    blackWin: this.result.last.blackWin,\n                },\n                white: this.result.white.toJson(),\n            },\n            moves: this.moves.map(function (m) { return m.toJson(); }),\n            ren: this.renInstant.toString(),\n            timer: this.timer.toJson(),\n        };\n    };\n    return KPGN;\n}());\nexports.default = KPGN;\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar brain_1 = require(\"../brain\");\nvar constant_1 = require(\"../ren/constant\");\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Captured_1 = __importDefault(require(\"./Captured\"));\nvar Move = /** @class */ (function () {\n    function Move(_a) {\n        var piece = _a.piece, moveFrom = _a.moveFrom, moveTo = _a.moveTo, isJumping = _a.isJumping, isUpgrading = _a.isUpgrading, captured = _a.captured;\n        this.piece = piece;\n        this.moveFrom = moveFrom;\n        this.moveTo = moveTo;\n        this.isJumping = !!isJumping;\n        this.isUpgrading = !!isUpgrading;\n        this.captured = captured || null;\n        if (brain_1.boardHelper.isUpgradable(piece, moveTo)) {\n            this.isUpgrading = true;\n            piece.type = brain_1.PIECE_TYPE_TRANSFORM_FISH;\n        }\n    }\n    // Spec: Fc5d6xf => White fish (F) moved from c5 to d6 killed black fish (f)\n    Move.fromMovedString = function (graveyardLastIndex) {\n        // const str = 'Fc5d6j';\n        var str = 'Fc5d6xf';\n        var piece = Piece_1.default.fromCharCode(str[0]);\n        var moveFrom = Point_1.default.fromIndexCode(str.substr(1, 2));\n        var moveTo = Point_1.default.fromIndexCode(str.substr(3, 2));\n        var move = new Move({\n            piece: piece,\n            moveFrom: moveFrom,\n            moveTo: moveTo,\n        });\n        if (str[5] === constant_1.PIECE_FLAG_KILL) {\n            var capturedPieceChar = str[6];\n            move.captured = new Captured_1.default({\n                fromBoardPoint: moveTo,\n                toGraveyardPoint: Point_1.default.fromIndexGraveyardIndex(graveyardLastIndex),\n                piece: Piece_1.default.fromCharCode(capturedPieceChar),\n            });\n        }\n        else if (str[5] === constant_1.PIECE_FLAG_JUMP) {\n            move.isJumping = true;\n        }\n        return move;\n    };\n    // Fc5d6j: jump, Fc5d6x: kill, Fc5d6xt: kill&upgrade\n    Move.prototype.toString = function () {\n        var pCode = this.piece.pieceCharCode;\n        var fIndexCode = this.moveFrom.indexCode;\n        var tIndexCode = this.moveTo.indexCode;\n        var flags = this.captured ? constant_1.PIECE_FLAG_KILL : '';\n        if (this.isJumping) {\n            flags += constant_1.PIECE_FLAG_JUMP;\n        }\n        if (this.isUpgrading) {\n            flags += constant_1.PIECE_FLAG_UPGRADE;\n        }\n        return \"\" + pCode + fIndexCode + tIndexCode + flags;\n    };\n    Move.prototype.toJson = function () {\n        return {\n            fromIndex: this.moveFrom.index,\n            toIndex: this.moveTo.index,\n            isJumping: this.isJumping,\n            capturedPiece: this.captured ? this.captured.piece.pieceCharCode : null,\n        };\n    };\n    Move.prototype.getMessage = function (isEnglish) {\n        if (isEnglish) {\n            var captured = '';\n            if (this.captured) {\n                captured = \" captures \" + this.captured.piece.titleEnglish;\n            }\n            var upgrade = this.isUpgrading ? ' transforms' : '';\n            return this.piece.titleEnglish + \" moved from \" + this.moveFrom.titleEnglish + \" to \" + this.moveTo.titleEnglish + upgrade + captured;\n        }\n        else {\n            var captured = '';\n            if (this.captured) {\n                captured = \" \\u179F\\u17CA\\u17B8\" + this.captured.piece.title;\n            }\n            var upgrade = this.isUpgrading ? ' ' : '';\n            return this.piece.title + \" \\u178A\\u17BE\\u179A\\u200B\\u1796\\u17B8 \" + this.moveFrom.title + \" \\u1791\\u17C5 \" + this.moveTo.title + upgrade + captured;\n        }\n    };\n    return Move;\n}());\nexports.default = Move;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Player = /** @class */ (function () {\n    function Player(id, name) {\n        this.name = null;\n        this.id = null;\n        this.id = id;\n        this.name = name;\n    }\n    Player.prototype.toJson = function () {\n        return {\n            id: this.id,\n            name: this.name,\n        };\n    };\n    return Player;\n}());\nexports.default = Player;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Result = /** @class */ (function () {\n    function Result(win, draw, lost) {\n        if (win === void 0) { win = 0; }\n        if (draw === void 0) { draw = 0; }\n        if (lost === void 0) { lost = 0; }\n        this.win = 0;\n        this.draw = 0;\n        this.lost = 0;\n        this.win = win;\n        this.draw = draw;\n        this.lost = lost;\n    }\n    Result.prototype.toJson = function () {\n        return {\n            win: this.win,\n            draw: this.draw,\n            lost: this.lost,\n        };\n    };\n    return Result;\n}());\nexports.default = Result;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Timer = /** @class */ (function () {\n    function Timer(totalSecond, currentWhite, currentBlack) {\n        this.totalSecond = totalSecond;\n        this.currentWhite = currentWhite;\n        this.currentBlack = currentBlack;\n    }\n    Timer.prototype.toJson = function () {\n        return {\n            totalSecond: this.totalSecond,\n            currentWhite: this.currentWhite,\n            currentBlack: this.currentBlack,\n        };\n    };\n    return Timer;\n}());\nexports.default = Timer;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timer = exports.Result = exports.Player = exports.Captured = exports.Move = exports.KPGN = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar KPGN_1 = require(\"./KPGN\");\nObject.defineProperty(exports, \"KPGN\", { enumerable: true, get: function () { return __importDefault(KPGN_1).default; } });\nvar Move_1 = require(\"./Move\");\nObject.defineProperty(exports, \"Move\", { enumerable: true, get: function () { return __importDefault(Move_1).default; } });\nvar Captured_1 = require(\"./Captured\");\nObject.defineProperty(exports, \"Captured\", { enumerable: true, get: function () { return __importDefault(Captured_1).default; } });\nvar Player_1 = require(\"./Player\");\nObject.defineProperty(exports, \"Player\", { enumerable: true, get: function () { return __importDefault(Player_1).default; } });\nvar Result_1 = require(\"./Result\");\nObject.defineProperty(exports, \"Result\", { enumerable: true, get: function () { return __importDefault(Result_1).default; } });\nvar Timer_1 = require(\"./Timer\");\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return __importDefault(Timer_1).default; } });\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoardEvent = void 0;\nvar ren_1 = require(\"../ren\");\nvar EventHandler_1 = __importDefault(require(\"./EventHandler\"));\nvar BoardEvent = /** @class */ (function () {\n    function BoardEvent(_a) {\n        var flag = _a.flag, actorPieceIndex = _a.actorPieceIndex;\n        this.flag = flag;\n        this.actorPieceIndex = actorPieceIndex;\n    }\n    Object.defineProperty(BoardEvent.prototype, \"isAttack\", {\n        get: function () {\n            return this.flag === ren_1.EVENT_FLAG_ATTACK;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BoardEvent.prototype, \"isWin\", {\n        get: function () {\n            return this.flag === ren_1.EVENT_FLAG_WINN;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return BoardEvent;\n}());\nexports.BoardEvent = BoardEvent;\nvar BoardEventController = /** @class */ (function (_super) {\n    __extends(BoardEventController, _super);\n    function BoardEventController() {\n        return _super.call(this, {\n            events: {\n                EVENT: BoardEventController.EVENT,\n            },\n        }) || this;\n    }\n    BoardEventController.prototype.fireEvent = function (boardEvent) {\n        this._addPropEvent(BoardEventController.EVENT, boardEvent);\n    };\n    BoardEventController.prototype.addBoardEventListener = function (listener) {\n        this._addOnEventListener(BoardEventController.EVENT, listener);\n    };\n    BoardEventController.prototype.removeBoardEventListener = function (listener) {\n        this._removeOnEventListener(BoardEventController.EVENT, listener);\n    };\n    BoardEventController.EVENT = 'event';\n    return BoardEventController;\n}(EventHandler_1.default));\nexports.default = BoardEventController;\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventHandler = /** @class */ (function () {\n    function EventHandler(options) {\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this.events = options.events;\n    }\n    EventHandler.prototype._checkPropEvent = function () {\n        if (this._isLockProp) {\n            return;\n        }\n        while (this._propEvent.length) {\n            var event = this._propEvent.shift();\n            this._checkOnEvent(event.name, event.data);\n        }\n    };\n    EventHandler.prototype._addPropEvent = function (event, data) {\n        this._propEvent.push({\n            name: event,\n            data: data,\n        });\n        this._checkPropEvent();\n    };\n    EventHandler.prototype._guardEventName = function (eventName) {\n        if (!eventName) {\n            throw new Error('invalid event name');\n        }\n    };\n    EventHandler.prototype._checkOnEvent = function (eventName, data) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].forEach(function (listener) {\n            listener(data);\n        });\n    };\n    EventHandler.prototype._addOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].push(listener);\n    };\n    EventHandler.prototype._removeOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        var index = this._onEventListeners[eventName].indexOf(listener);\n        ~index && this._onEventListeners[eventName].splice(index, 1);\n    };\n    return EventHandler;\n}());\nexports.default = EventHandler;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.table = exports.BoardEvent = exports.BoardEventController = exports.EventHandler = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar EventHandler_1 = require(\"./EventHandler\");\nObject.defineProperty(exports, \"EventHandler\", { enumerable: true, get: function () { return __importDefault(EventHandler_1).default; } });\nvar BoardEventController_1 = require(\"./BoardEventController\");\nObject.defineProperty(exports, \"BoardEventController\", { enumerable: true, get: function () { return __importDefault(BoardEventController_1).default; } });\nvar BoardEventController_2 = require(\"./BoardEventController\");\nObject.defineProperty(exports, \"BoardEvent\", { enumerable: true, get: function () { return BoardEventController_2.BoardEvent; } });\nvar table_1 = require(\"./table\");\nObject.defineProperty(exports, \"table\", { enumerable: true, get: function () { return __importDefault(table_1).default; } });\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n/*\n  \n8              k          \n  \n7                         \n  \n6                         \n  \n5                         \n  \n4                         \n  \n3                         \n  \n2                         \n  \n1           K             \n  \n    a   b   c   d   e   f   g   h\n  \n   b  h  g  q  g  h  b  f  f  f  f  f  f  f  f  F  F  F  F  F  F  F  F  B  H  G  Q  G  H  B \n  \n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction asciiTable(renInstance) {\n    var arr = renInstance.board.piecesMultiArray;\n    var str = '  ';\n    var result = arr.reverse().reduce(function (s, subArr, i) {\n        var rs = subArr.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('');\n        var bottom = i === arr.length - 1 ? '' : '';\n        s += \"\\n\" + (8 - i) + \" \\u2503\" + rs + \"\\u2503\\n  \" + bottom;\n        return s;\n    }, str);\n    var gyTStr = renInstance.graveyard.pieces.map(function () { return ''; }).join('');\n    var gyStr = renInstance.graveyard.pieces.map(function (p) { return \" \" + (p ? p.pieceCharCode : ' ') + \" \"; }).join('');\n    var gyBStr = renInstance.graveyard.pieces.map(function () { return ''; }).join('');\n    var graveyardStr = \"  \\u250F\" + gyTStr + \"\\u2513\\n  \\u2503\" + gyStr + \"\\u2503\\n  \\u2517\" + gyBStr + \"\\u251B\";\n    return result + \"\\n    a   b   c   d   e   f   g   h\\n\" + graveyardStr;\n}\nexports.default = asciiTable;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar PieceIndex_1 = __importDefault(require(\"./PieceIndex\"));\nvar constant_1 = require(\"./constant\");\nvar constant_2 = require(\"../brain/constant\");\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\nvar Point_1 = __importDefault(require(\"./Point\"));\n/**\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\n */\nvar Board = /** @class */ (function () {\n    function Board(boardStr) {\n        this.pieceIndices = Array.from({\n            length: constant_2.CELL_COUNT,\n        }, function (_, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, null);\n        });\n        if (jsis_1.default.isUndefined(boardStr)) {\n            boardStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var newBoardStr = this.extract(boardStr).replace(/\\//g, '');\n        if (newBoardStr.length < constant_2.CELL_COUNT ||\n            !Piece_1.default.isValidPiecesString(newBoardStr)) {\n            throw new Error(\"Invalid board string \" + boardStr);\n        }\n        this.pieceIndices = newBoardStr.split('').map(function (charCode, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, charCode === constant_2.EMPTY_PIECE ? null : Piece_1.default.fromCharCode(charCode));\n        });\n    }\n    Object.defineProperty(Board.prototype, \"piecesMultiArray\", {\n        get: function () {\n            var arr = [[], [], [], [], [], [], [], []];\n            this.pieceIndices.forEach(function (pieceIndex) {\n                arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\n            });\n            return arr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"pieces\", {\n        get: function () {\n            return this.pieceIndices.map(function (pieceIndex) {\n                return pieceIndex.piece;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Board.prototype.compress = function (str) {\n        var reg = new RegExp(\"(\\\\\" + constant_2.EMPTY_PIECE + \"+)\", 'g');\n        return str.replace(reg, function ($1) { return $1.length; });\n    };\n    Board.prototype.extract = function (str) {\n        return str.replace(/(\\d+)/g, function ($1) {\n            // $1 == 3 => '...', bh6 => 'bh......'\n            return Array.from({\n                length: $1,\n            }, function () { return constant_2.EMPTY_PIECE; }).join('');\n        });\n    };\n    Board.prototype.toStringFull = function () {\n        var str = this.pieceIndices.map(function (pos, i) {\n            var p = pos.toPieceCharCode();\n            if (i && i % constant_2.ROW_NUMBER === 0 && i !== constant_2.CELL_COUNT) {\n                return \"\" + constant_2.BOARD_SEPARATOR + p;\n            }\n            return p;\n        }).join('');\n        return str;\n    };\n    Board.prototype.toStringFullNoSeparate = function () {\n        var str = this.toStringFull();\n        str = str.replace(/\\//g, '');\n        return str;\n    };\n    Board.prototype.toString = function () {\n        var str = this.toStringFull();\n        str = this.compress(str);\n        return str;\n    };\n    Board.prototype.getPieceAtIndex = function (index) {\n        return this.pieceIndices[index].piece;\n    };\n    return Board;\n}());\nexports.default = Board;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\nvar constant_1 = require(\"./constant\");\n// 23.-\nvar CountDown = /** @class */ (function () {\n    function CountDown(countdownStr) {\n        if (countdownStr === void 0) { countdownStr = ''; }\n        this.white = null;\n        this.black = null;\n        var newCountdownStr = countdownStr.split('.');\n        this.white = jsis_1.default.isStringNumber(newCountdownStr[0]) ? Number(newCountdownStr[0]) : null;\n        this.black = jsis_1.default.isStringNumber(newCountdownStr[1]) ? Number(newCountdownStr[1]) : null;\n        if (!jsis_1.default.isNull(this.white) && !jsis_1.default.isNull(this.white)) {\n            throw new Error(\"Invalid countdown string \" + countdownStr);\n        }\n    }\n    CountDown.prototype.toString = function () {\n        var str = \"\" + (jsis_1.default.isNull(this.white) ? constant_1.NOT_SET : this.white);\n        str += \".\" + (jsis_1.default.isNull(this.black) ? constant_1.NOT_SET : this.black);\n        return str;\n    };\n    return CountDown;\n}());\nexports.default = CountDown;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar Graveyard = /** @class */ (function () {\n    function Graveyard(graveyardStr) {\n        this.pieces = [];\n        if (graveyardStr) {\n            if (graveyardStr.length > 30 ||\n                !Piece_1.default.isValidPiecesString(graveyardStr, true)) {\n                throw new Error(\"Invalid graveyard string \" + graveyardStr);\n            }\n            this.pieces = graveyardStr.split('').map(function (charCode, i) {\n                var p = Piece_1.default.fromCharCode(charCode);\n                if (p.isTypeKing) {\n                    throw new Error(\"King cannot die graveyard:\" + graveyardStr);\n                }\n                return p;\n            });\n        }\n    }\n    Object.defineProperty(Graveyard.prototype, \"lastIndex\", {\n        get: function () {\n            return this.pieces.length - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Graveyard.prototype.toString = function () {\n        return this.pieces.map(function (p) {\n            return p.pieceCharCode;\n        }).join('');\n    };\n    return Graveyard;\n}());\nexports.default = Graveyard;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King has attacked, this will effect jumping\n */\nvar KAttacked = /** @class */ (function () {\n    function KAttacked(kAttackedStr) {\n        this.whiteKing = false;\n        this.blackKing = false;\n        if (kAttackedStr) {\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.blackKing = !!~kAttackedStr.indexOf(constant_1.PIECE_TYPE_KING);\n        }\n    }\n    KAttacked.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        return str;\n    };\n    return KAttacked;\n}());\nexports.default = KAttacked;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King or Queen has moved, the will effect jumping\n */\nvar KqMoved = /** @class */ (function () {\n    function KqMoved(kqMovedStr) {\n        this.whiteKing = false;\n        this.whiteQueen = false;\n        this.blackKing = false;\n        this.blackQueen = false;\n        if (kqMovedStr) {\n            this.whiteKing = !!~kqMovedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.whiteQueen = !!~kqMovedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN));\n            this.blackKing = !!~kqMovedStr.indexOf(constant_1.PIECE_TYPE_KING);\n            this.blackQueen = !!~kqMovedStr.indexOf(constant_1.PIECE_TYPE_QUEEN);\n        }\n    }\n    KqMoved.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.whiteQueen ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        str += \"\" + (this.blackQueen ? constant_1.PIECE_TYPE_QUEEN : constant_2.NOT_SET);\n        return str;\n    };\n    return KqMoved;\n}());\nexports.default = KqMoved;\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\nvar Piece = /** @class */ (function () {\n    function Piece(type, color) {\n        this.type = Piece.toNormalCharCode(type);\n        this.color = color;\n    }\n    Object.defineProperty(Piece.prototype, \"colorOpponent\", {\n        get: function () {\n            return Piece.oppositeColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCode\", {\n        get: function () {\n            if (this.isColorWhite) {\n                return this.pieceCharCodeWhite;\n            }\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCodeWhite\", {\n        get: function () {\n            return Piece.toWhiteCharCode(this.type);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.PIECE_NAMES[this.type] + constant_1.COLOR_NAMES[this.color];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"titleEnglish\", {\n        get: function () {\n            return constant_1.COLOR_NAMES_ENGLISH[this.color] + \"-\" + constant_1.PIECE_NAMES_ENGLISH[this.type];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.prototype._isTypeEqual = function (type) {\n        return this.type === type;\n    };\n    Object.defineProperty(Piece.prototype, \"isTypeKing\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_KING);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeQueen\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_QUEEN);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeBoat\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_BOAT);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeHorse\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_HORSE);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeGeneral\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_GENERAL);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeTransformedFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_TRANSFORM_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorBlack\", {\n        get: function () {\n            return Piece.isBlackColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorWhite\", {\n        get: function () {\n            return Piece.isWhiteColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.fromCharCode = function (charCode) {\n        if (!Piece.isValidPiece(charCode)) {\n            return null;\n        }\n        var color = Piece.isWhiteCharCode(charCode) ? constant_1.PIECE_COLOR_WHITE : constant_1.PIECE_COLOR_BLACK;\n        var type = Piece.toNormalCharCode(charCode);\n        return new Piece(type, color);\n    };\n    Object.defineProperty(Piece.prototype, \"originPiece\", {\n        get: function () {\n            if (this.isTypeTransformedFish) {\n                return new Piece(constant_1.PIECE_TYPE_FISH, this.color);\n            }\n            return this;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"pieceChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_TYPE_BOAT,\n                constant_1.PIECE_TYPE_HORSE,\n                constant_1.PIECE_TYPE_GENERAL,\n                constant_1.PIECE_TYPE_KING,\n                constant_1.PIECE_TYPE_QUEEN,\n                constant_1.PIECE_TYPE_FISH,\n                constant_1.PIECE_TYPE_TRANSFORM_FISH,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"colorChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_COLOR_WHITE,\n                constant_1.PIECE_COLOR_BLACK,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.toWhiteCharCode = function (charCode) {\n        return charCode.toUpperCase();\n    };\n    Piece.isWhiteCharCode = function (charCode) {\n        return jsis_1.default.isUpperCase(charCode);\n    };\n    Piece.toBlackCharCode = function (charCode) {\n        return charCode.toLowerCase();\n    };\n    Piece.toNormalCharCode = function (charCode) {\n        return Piece.toBlackCharCode(charCode);\n    };\n    Piece.isValidPiece = function (charCode) {\n        return charCode !== constant_1.EMPTY_PIECE;\n    };\n    Piece.isWhiteColor = function (color) {\n        return color === constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isBlackColor = function (color) {\n        return color === constant_1.PIECE_COLOR_BLACK;\n    };\n    Piece.oppositeColor = function (color) {\n        return Piece.isWhiteColor(color) ? constant_1.PIECE_COLOR_BLACK : constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isValidPiecesString = function (str, onlyPiece) {\n        var ruler = onlyPiece ? allPiecesString.filter(function (c) {\n            return !~[constant_1.EMPTY_PIECE, constant_1.BOARD_SEPARATOR].indexOf(c);\n        }) : allPiecesString;\n        return !str.split('').some(function (c) {\n            return !~ruler.indexOf(c);\n        });\n    };\n    return Piece;\n}());\nexports.default = Piece;\nvar allPiecesString = __spreadArray(__spreadArray(__spreadArray([], Piece.pieceChars), Piece.pieceChars.map(function (pieceChar) {\n    return Piece.toWhiteCharCode(pieceChar);\n})), [\n    constant_1.EMPTY_PIECE,\n    constant_1.BOARD_SEPARATOR,\n]);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\nvar PieceIndex = /** @class */ (function () {\n    function PieceIndex(point, piece) {\n        this.canMovePoints = [];\n        this.point = point;\n        this.piece = piece;\n    }\n    PieceIndex.prototype.toCode = function () {\n        return jsis_1.default.isNull(this.piece) ? \"\" + this.piece.pieceCharCode + this.point.indexCode : null;\n    };\n    PieceIndex.prototype.toPieceCharCode = function () {\n        return jsis_1.default.isNull(this.piece) ? constant_1.EMPTY_PIECE : this.piece.pieceCharCode;\n    };\n    return PieceIndex;\n}());\nexports.default = PieceIndex;\n","\"use strict\";\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_1 = require(\"../brain/constant\");\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    Object.defineProperty(Point.prototype, \"index\", {\n        get: function () {\n            return Point.xyToIndex(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"graveyardIndex\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.HORIZONTAL_NOTE_LETTERS[this.x] + constant_1.VERTICAL_NOTE_LETTERS[this.y];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"titleEnglish\", {\n        get: function () {\n            return this.indexCode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"h\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS[this.x];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"v\", {\n        get: function () {\n            return this.y + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Point.xyToIndex = function (x, y) {\n        return y * constant_1.ROW_NUMBER + x;\n    };\n    Point.indexCodeToXY = function (indexCode) {\n        var x = constant_1.HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\n        var y = Number(indexCode[1]) - 1;\n        return { x: x, y: y };\n    };\n    Point.indexCodeToIndex = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return Point.xyToIndex(x, y);\n    };\n    Point.fromIndexCode = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.indexToXY = function (index) {\n        var x = index % constant_1.ROW_NUMBER;\n        var y = Math.floor(index / constant_1.ROW_NUMBER);\n        return { x: x, y: y };\n    };\n    Point.fromIndex = function (index) {\n        var _a = Point.indexToXY(index), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.fromIndexGraveyardIndex = function (index) {\n        return new Point(index, 0);\n    };\n    Point.isIndexInBoard = function (index) {\n        return index >= 0 && index <= constant_1.CELL_COUNT - 1;\n    };\n    return Point;\n}());\nexports.default = Point;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = __importDefault(require(\"./Board\"));\nvar KqMoved_1 = __importDefault(require(\"./KqMoved\"));\nvar KAttacked_1 = __importDefault(require(\"./KAttacked\"));\nvar CountDown_1 = __importDefault(require(\"./CountDown\"));\nvar Graveyard_1 = __importDefault(require(\"./Graveyard\"));\nvar constant_1 = require(\"./constant\");\nvar kpgn_1 = require(\"../kpgn\");\nvar Move_1 = __importDefault(require(\"../kpgn/Move\"));\nvar Point_1 = __importDefault(require(\"./Point\"));\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar _1 = require(\".\");\nvar MoveHelper_1 = __importDefault(require(\"../brain/MoveHelper\"));\nvar constant_2 = require(\"../brain/constant\");\nvar jsis_1 = __importDefault(require(\"../brain/jsis\"));\nvar REN = /** @class */ (function () {\n    function REN(renProps) {\n        this.moveHelper = new MoveHelper_1.default();\n        this.init(renProps);\n    }\n    REN.prototype.init = function (_a) {\n        var boardStr = _a.boardStr, turnStr = _a.turnStr, kqMovedStr = _a.kqMovedStr, kAttackedStr = _a.kAttackedStr, countdownStr = _a.countdownStr, graveyardStr = _a.graveyardStr;\n        this.board = new Board_1.default(boardStr);\n        this.turn = turnStr || constant_2.PIECE_COLOR_WHITE;\n        this.kqMoved = new KqMoved_1.default(kqMovedStr);\n        this.kAttacked = new KAttacked_1.default(kAttackedStr);\n        this.countdown = new CountDown_1.default(countdownStr);\n        this.graveyard = new Graveyard_1.default(graveyardStr);\n        var invalidPiecesString = this.isInvalidPieceCount();\n        if (invalidPiecesString) {\n            var msg = \"Invalid piece string board:\" + boardStr;\n            msg += \", graveyard:\" + graveyardStr + \", count:\" + invalidPiecesString;\n            throw new Error(msg);\n        }\n        this.moveHelper = new MoveHelper_1.default();\n    };\n    REN.prototype.isInvalidPieceCount = function () {\n        var pieces = this.board.pieceIndices.map(function (pos) {\n            return pos.piece;\n        }).filter(function (p) {\n            return !jsis_1.default.isNull(p);\n        }).concat(this.graveyard.pieces).map(function (p) {\n            return p.originPiece;\n        });\n        var piecesCount = pieces.reduce(function (obj, p) {\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\n            obj[p.pieceCharCode]++;\n            return obj;\n        }, {});\n        var str = Object.keys(piecesCount).map(function (k) {\n            return \"\" + k + piecesCount[k];\n        }).sort().join('');\n        if (str === constant_1.STRING_COUNT) {\n            return false;\n        }\n        return str;\n    };\n    REN.fromString = function (renStr) {\n        if (jsis_1.default.isUndefined(renStr)) {\n            renStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var renArr = renStr.split(' ');\n        return new REN({\n            boardStr: renArr[0],\n            turnStr: renArr[1],\n            kqMovedStr: renArr[2],\n            kAttackedStr: renArr[3],\n            countdownStr: renArr[4],\n            graveyardStr: renArr[5],\n        });\n    };\n    REN.prototype.move = function (moveFromIndex, moveToIndex) {\n        var piece = this.board.getPieceAtIndex(moveFromIndex);\n        if (jsis_1.default.isNull(piece)) {\n            return null;\n        }\n        this.board.pieceIndices[moveFromIndex].piece = null;\n        var move = new Move_1.default({\n            moveFrom: Point_1.default.fromIndex(moveFromIndex),\n            moveTo: Point_1.default.fromIndex(moveToIndex),\n            piece: piece,\n        });\n        var targetPiece = this.board.getPieceAtIndex(moveToIndex);\n        if (targetPiece) {\n            this.graveyard.pieces.push(targetPiece);\n            move.captured = new kpgn_1.Captured({\n                fromBoardPoint: Point_1.default.fromIndex(moveToIndex),\n                toGraveyardPoint: Point_1.default.fromIndex(this.graveyard.lastIndex),\n                piece: targetPiece,\n            });\n        }\n        this.board.pieceIndices[moveToIndex].piece = piece;\n        return move;\n    };\n    REN.prototype.toString = function () {\n        var str = this.board.toString();\n        str += \" \" + this.turn.toString();\n        str += \" \" + this.kqMoved.toString();\n        str += \" \" + this.kAttacked.toString();\n        str += \" \" + this.countdown.toString();\n        str += \" \" + this.graveyard.toString();\n        return str;\n    };\n    Object.defineProperty(REN.prototype, \"isQueenMoved\", {\n        get: function () {\n            var isQueenMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqMoved.whiteQueen ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqMoved.blackQueen;\n            return isQueenMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(REN.prototype, \"isKingMoved\", {\n        get: function () {\n            var isKingMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqMoved.whiteKing ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqMoved.blackKing;\n            return isKingMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    REN.prototype.genAllCanMoves = function () {\n        var canMoves = this.moveHelper.calcCanMove({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: true,\n            genCanMoveForAnother: false,\n        });\n        return canMoves.moves;\n    };\n    REN.prototype.isHasMoved = function (piece) {\n        var isHasMoved = false;\n        if ((this.kqMoved.blackKing && piece.isColorBlack && piece.isTypeKing) ||\n            (this.kqMoved.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\n            (this.kqMoved.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\n            (this.kqMoved.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\n            isHasMoved = true;\n        }\n        return isHasMoved;\n    };\n    REN.prototype.getCanMovePointsByPoint = function (point) {\n        var piece = this.board.getPieceAtIndex(point.index);\n        if (jsis_1.default.isNull(piece)) {\n            return [];\n        }\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece, this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\n    };\n    REN.prototype.getAttacker = function () {\n        var _this = this;\n        var state = this.moveHelper.calcState({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        var kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\n        if (kingInDanger) {\n            var pieceIndex = kingInDanger.map(function (point) {\n                return new _1.PieceIndex(point, _this.board.getPieceAtIndex(point.index));\n            }).filter(function (pieceIndex) {\n                return !pieceIndex.piece.isTypeKing;\n            })[0];\n            return pieceIndex;\n        }\n        return null;\n    };\n    REN.prototype.getWinColor = function () {\n        var state = this.moveHelper.calcState({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        return state.winColor;\n    };\n    return REN;\n}());\nexports.default = REN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENT_FLAG_DRAW = exports.EVENT_FLAG_WINN = exports.EVENT_FLAG_ATTACK = exports.PIECE_FLAG_UPGRADE = exports.PIECE_FLAG_JUMP = exports.PIECE_FLAG_KILL = exports.NOT_SET = exports.DEFAULT_BOARD_STR = exports.STRING_COUNT = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\nexports.NOT_SET = '-';\nexports.PIECE_FLAG_KILL = 'x';\nexports.PIECE_FLAG_JUMP = 'j';\nexports.PIECE_FLAG_UPGRADE = 'u';\nexports.EVENT_FLAG_ATTACK = 'attack';\nexports.EVENT_FLAG_WINN = 'win';\nexports.EVENT_FLAG_DRAW = 'draw';\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Point = exports.REN = exports.PieceIndex = exports.Piece = exports.KqMoved = exports.KAttacked = exports.Graveyard = exports.CountDown = exports.Board = void 0;\n/*\n * Copyright (c) 2021, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = require(\"./Board\");\nObject.defineProperty(exports, \"Board\", { enumerable: true, get: function () { return __importDefault(Board_1).default; } });\nvar CountDown_1 = require(\"./CountDown\");\nObject.defineProperty(exports, \"CountDown\", { enumerable: true, get: function () { return __importDefault(CountDown_1).default; } });\nvar Graveyard_1 = require(\"./Graveyard\");\nObject.defineProperty(exports, \"Graveyard\", { enumerable: true, get: function () { return __importDefault(Graveyard_1).default; } });\nvar KAttacked_1 = require(\"./KAttacked\");\nObject.defineProperty(exports, \"KAttacked\", { enumerable: true, get: function () { return __importDefault(KAttacked_1).default; } });\nvar KqMoved_1 = require(\"./KqMoved\");\nObject.defineProperty(exports, \"KqMoved\", { enumerable: true, get: function () { return __importDefault(KqMoved_1).default; } });\nvar Piece_1 = require(\"./Piece\");\nObject.defineProperty(exports, \"Piece\", { enumerable: true, get: function () { return __importDefault(Piece_1).default; } });\nvar PieceIndex_1 = require(\"./PieceIndex\");\nObject.defineProperty(exports, \"PieceIndex\", { enumerable: true, get: function () { return __importDefault(PieceIndex_1).default; } });\nvar REN_1 = require(\"./REN\");\nObject.defineProperty(exports, \"REN\", { enumerable: true, get: function () { return __importDefault(REN_1).default; } });\nvar Point_1 = require(\"./Point\");\nObject.defineProperty(exports, \"Point\", { enumerable: true, get: function () { return __importDefault(Point_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(303);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","prototype","hasOwnProperty","call","__importDefault","package_json_1","brain_1","KPGN_1","BoardEventController_1","table_1","constant_1","REN_1","KhmerChess","renStr","renInstance","default","fromString","kpgnInstance","boardEventController","loadRENStr","resetBoard","getCanMoves","genAllCanMoves","getCanMovePointsByPoint","point","getAttacker","getWinColor","getStuckColor","isDraw","getDrawCountColor","gameOver","validateRENStr","valid","error_number","error","message","getRENStr","toString","board","piecesMultiArray","configurable","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","options","drawAscii","turn","set","move","moveFromIndex","moveToIndex","moves","push","undoMove","clearBoard","getHistories","checkBoardEvent","pieceIndex","jsis","isNull","boardEvent","BoardEvent","flag","EVENT_FLAG_ATTACK","actorPieceIndex","fireEvent","winColor","EVENT_FLAG_WINN","addBoardEventListener","listener","removeBoardEventListener","title","name","version","jsis_1","HVPont","h","isUndefined","Number","HORIZONTAL_CODE_LETTERS","indexOf","Piece_1","boardHelper_1","MoveHelper","isWhiteColor","currentTurn","init","option","piecesString","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","stuckColor","generateCanMoves","_this","filter","filterPieceInBoard","whitePieces","blackPieces","genMoves","pieceIndices","forEach","isHaveMoved","piece","isTypeKing","isTypeQueen","canMovePoints","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","length","splice","checkIfKingInDanger","getKingInDanger","PIECE_COLOR_WHITE","getKingWillInDanger","PIECE_COLOR_BLACK","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","blackCountable","checkCountable","whiteCountable","calCount","countingBlack","checkCount","force","countingWhite","isHasMoved","index","Rectangle","x","y","width","height","isContainsPoint","isValidPoint","ROW_LAST_INDEX","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","TypeError","String","__","constructor","EventHandler_1","TRIGGER_MOVE","BoardEventController","_super","events","removeOnTriggerMoveEventListener","_removeOnEventListener","addOnTriggerMoveEventListener","_addOnEventListener","genMask_1","Point_1","Rectangle_1","ren_1","mask","BoardHelper","convertMask","point1","color","sign","point2","fromIndex","getCharPieceFromString","isIndexInBoard","CELL_COUNT","EMPTY_PIECE","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","type","_pos","newIndex","getPieceCanMovePosesValid","_poses","n","thisPos","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","Math","abs","_s","xyToIndex","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","c","isCharPiecesInBoard","kingPos","PIECE_TYPE_KING","pieceCharCode","j","isHaveCaptured","points","str","code","getPiecesInBoard","split","ROW_NUMBER","PieceIndex","isColorWhite","extractPiecesToArray","_a","piecesStringArr","pieceAll","isStateCount","weaker","stronger","oppositeColor","countChar","join","PIECE_TYPE_FISH","count","toukCount","PIECE_TYPE_BOAT","PIECE_TYPE_GENERAL","PIECE_TYPE_HORSE","isUpgradable","isColorBlack","_b","_c","_d","VERTICAL_NOTE_LETTERS_ENGLISH","HORIZONTAL_NOTE_LETTERS_ENGLISH","VERTICAL_NOTE_LETTERS","HORIZONTAL_NOTE_LETTERS","ROW_FIRST_INDEX","BOARD_SEPARATOR","PIECE_COLOR_EMPTY","PIECE_NAMES_ENGLISH","PIECE_NAMES","PIECE_TYPE_TRANSFORM_FISH","PIECE_TYPE_QUEEN","COLOR_NAMES_ENGLISH","COLOR_NAMES","from","_","concat","__exportStar","genMask","boardHelper","boardEventController_1","HVPont_1","MoveHelper_1","isValid","isString","isNotEmpty","isValidString","isNumber","isStringNumber","isNaN","isArray","arr","isFunction","f","isObject","isBoolean","isValidBoolean","isFalse","isPoint","isValidObject","isValidNumber","isSize","size","isOdd","isEven","isUpperCase","toUpperCase","KhmerChess_1","fromBoardPoint","toGraveyardPoint","Player_1","Result_1","KPGN","renInstant","players","white","black","last","whiteWin","blackWin","event","date","location","map","ren","timer","Captured_1","Move","moveFrom","moveTo","isJumping","isUpgrading","captured","fromMovedString","graveyardLastIndex","fromIndexCode","substr","PIECE_FLAG_KILL","capturedPieceChar","fromIndexGraveyardIndex","PIECE_FLAG_JUMP","pCode","fIndexCode","indexCode","tIndexCode","flags","PIECE_FLAG_UPGRADE","toIndex","capturedPiece","getMessage","isEnglish","titleEnglish","upgrade","Player","id","Result","win","draw","lost","Timer","totalSecond","currentWhite","currentBlack","Captured","Move_1","Timer_1","EVENT","_addPropEvent","EventHandler","_onEventListeners","_propEvent","_checkPropEvent","_isLockProp","shift","_checkOnEvent","data","_guardEventName","eventName","Error","table","BoardEventController_2","reverse","reduce","s","subArr","PieceIndex_1","constant_2","Board","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","replace","isValidPiecesString","compress","reg","RegExp","$1","toStringFull","pos","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","CountDown","countdownStr","newCountdownStr","NOT_SET","Graveyard","graveyardStr","KAttacked","kAttackedStr","whiteKing","blackKing","toWhiteCharCode","KqMoved","kqMovedStr","whiteQueen","blackQueen","__spreadArray","to","il","Piece","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","pieceChars","pieceChar","toCode","Point","indexCodeToXY","indexCodeToIndex","indexToXY","floor","Board_1","KqMoved_1","KAttacked_1","CountDown_1","Graveyard_1","kpgn_1","_1","REN","renProps","moveHelper","turnStr","kqMoved","kAttacked","countdown","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","originPiece","obj","keys","sort","STRING_COUNT","renArr","targetPiece","lastIndex","state","kingInDanger","EVENT_FLAG_DRAW","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}