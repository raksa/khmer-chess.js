{"version":3,"file":"khmer-chess.umd.js","mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,MAAM,WACT,M,8CCTA,IAAIC,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIC,EAAiBP,EAAgB,EAAQ,MACzCQ,EAAa,EAAQ,KACrBC,EAAST,EAAgB,EAAQ,MACjCU,EAAUV,EAAgB,EAAQ,MAClCW,EAAQX,EAAgB,EAAQ,MAChCY,EAA4B,WAC5B,SAASA,EAAWC,GAChB,IAAIC,EAAMH,EAAMI,QAAQC,WAAWH,GACnCZ,KAAKgB,KAAO,IAAIR,EAAOM,QAAQD,GAiGnC,OA/FAF,EAAWM,UAAUC,SAAW,SAAUC,GACtCnB,KAAKgB,KAAKI,SAASD,IAEvBR,EAAWM,UAAUI,WAAa,WAC9BrB,KAAKgB,KAAKH,IAAMH,EAAMI,QAAQC,cAElCJ,EAAWM,UAAUK,YAAc,WAE/B,OADmBtB,KAAKgB,KAAKH,IAAIU,kBAGrCZ,EAAWM,UAAUO,wBAA0B,SAAUC,GAErD,OADoBzB,KAAKgB,KAAKH,IAAIW,wBAAwBC,IAG9Dd,EAAWM,UAAUS,eAAiB,SAAUd,GAC5C,IAEI,OADAF,EAAMI,QAAQC,WAAWH,GAClB,CAAEe,OAAO,EAAMC,aAAc,EAAGC,MAAO,cAElD,MAAOA,GACH,MAAO,CACHF,OAAO,EACPC,aAAc,EACdC,MAAOA,EAAMC,WAIzBnB,EAAWM,UAAUc,UAAY,WAC7B,OAAO/B,KAAKgB,KAAKH,IAAImB,YAEzB7B,OAAOC,eAAeO,EAAWM,UAAW,0BAA2B,CACnEgB,IAAK,WACD,OAAOjC,KAAKgB,KAAKH,IAAIqB,MAAMC,kBAE/BC,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeO,EAAWM,UAAW,gBAAiB,CACzDgB,IAAK,WACD,OAAOjC,KAAKgB,KAAKH,IAAIqB,MAAMI,QAE/BF,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeO,EAAWM,UAAW,oBAAqB,CAC7DgB,IAAK,WACD,OAAOjC,KAAKgB,KAAKH,IAAI0B,UAAUD,QAEnCF,YAAY,EACZC,cAAc,IAGlB1B,EAAWM,UAAUuB,QAAU,WAC3B,OAAOxC,KAAKgB,KAAKyB,UAErB9B,EAAWM,UAAUyB,SAAW,SAAUC,EAAUC,GAChD5C,KAAKgB,KAAO,IAAIR,EAAOM,QAAQd,KAAKgB,KAAKH,MAE7CF,EAAWM,UAAU4B,UAAY,WAC7B,OAAO,EAAIpC,EAAQK,SAASd,KAAKgB,KAAKH,MAE1CV,OAAOC,eAAeO,EAAWM,UAAW,OAAQ,CAChDgB,IAAK,WACD,OAAOjC,KAAKgB,KAAKH,IAAIiC,MAEzBC,IAAK,SAAUD,GACX9C,KAAKgB,KAAKH,IAAIiC,KAAOA,GAEzBV,YAAY,EACZC,cAAc,IAElB1B,EAAWM,UAAU+B,KAAO,SAAUC,EAAeC,GACjD,IAAIF,EAAOhD,KAAKgB,KAAKH,IAAImC,KAAKC,EAAeC,GAE7C,OADAlD,KAAKgB,KAAKmC,QAAQH,GACXA,GAMXrC,EAAWM,UAAUmC,WAAa,WAC9BpD,KAAKgB,KAAKH,IAAMH,EAAMI,QAAQC,WAAW,qEAE7CJ,EAAWM,UAAUoC,aAAe,WAChC,OAAOrD,KAAKgB,KAAKsC,OAErB3C,EAAW4C,WAAa,SAAUC,GAK9B,OAJU,GAAKA,GACEC,MAAM,IAAIC,KAAI,SAAUC,GACrC,OAAOpD,EAAWqD,sBAAsBrD,EAAWsD,8BAA8BC,QAAQH,OAC1FI,KAAK,KAGZpD,EAAWqD,MAAQ1D,EAAeQ,QAAQmD,KAC1CtD,EAAWuD,QAAU5D,EAAeQ,QAAQoD,QACrCvD,EApGoB,GAsG/BnB,EAAQsB,QAAUH,G,cC1IlBR,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrB4D,EAAwB,WACxB,SAASA,EAAOC,EAAGC,GACVA,IAEDA,GADAD,EAAIA,EAAE,IACA,IAEVpE,KAAKoE,EAAIA,EACTpE,KAAKqE,EAAIC,OAAOD,GAuBpB,OArBAlE,OAAOC,eAAe+D,EAAOlD,UAAW,IAAK,CACzCgB,IAAK,WACD,OAAO1B,EAAWgE,wBAAwBT,QAAQ9D,KAAKoE,IAE3DhC,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe+D,EAAOlD,UAAW,IAAK,CACzCgB,IAAK,WACD,OAAOjC,KAAKqE,EAAI,GAEpBjC,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe+D,EAAOlD,UAAW,YAAa,CACjDgB,IAAK,WACD,MAAO,GAAKjC,KAAKoE,EAAIpE,KAAKqE,GAE9BjC,YAAY,EACZC,cAAc,IAEX8B,EA9BgB,GAgC3B3E,EAAQsB,QAAUqD,G,oBC7DlB,IAAIpE,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAImE,EAAUzE,EAAgB,EAAQ,KAClC0E,EAAgB1E,EAAgB,EAAQ,MACxCQ,EAAa,EAAQ,KACrBmE,EAA4B,WAC5B,SAASA,IACL1E,KAAK2E,aAAe,GACpB3E,KAAK4E,YAAc,GACnB5E,KAAK6E,cAAe,EACpB7E,KAAK8E,aAAc,EACnB9E,KAAK+E,YAAa,EAClB/E,KAAKgF,sBAAuB,EAC5BhF,KAAKiF,WAAa,GAClBjF,KAAKkF,WAAa,GAClBlF,KAAKmF,kBAAoB,KACzBnF,KAAKoF,sBAAwB,KAC7BpF,KAAKqF,kBAAoB,KACzBrF,KAAKsF,sBAAwB,KAC7BtF,KAAKuF,SAAW,KAChBvF,KAAKwF,WAAa,KAgItB,OA9HArF,OAAOC,eAAesE,EAAWzD,UAAW,cAAe,CACvDgB,IAAK,WACD,OAAOuC,EAAQ1D,QAAQ2E,aAAazF,KAAK4E,cAE7CxC,YAAY,EACZC,cAAc,IAElBqC,EAAWzD,UAAUyE,KAAO,SAAUvE,GAClCnB,KAAK2E,aAAexD,EAAOwD,aAC3B3E,KAAK4E,YAAczD,EAAOyD,YAC1B5E,KAAK6E,aAAe1D,EAAO0D,aAC3B7E,KAAK8E,YAAc3D,EAAO2D,YAC1B9E,KAAK+E,WAAa5D,EAAO4D,WACzB/E,KAAKgF,qBAAuB7D,EAAO6D,qBACnChF,KAAKiF,WAAa,GAClBjF,KAAKkF,WAAa,GAClBlF,KAAKmF,kBAAoB,KACzBnF,KAAKoF,sBAAwB,KAC7BpF,KAAKqF,kBAAoB,KACzBrF,KAAKsF,sBAAwB,KAC7BtF,KAAKuF,SAAW,KAChBvF,KAAKwF,WAAa,MAEtBd,EAAWzD,UAAU0E,iBAAmB,WACpC,IAAIC,EAAQ5F,KACR6F,EAASpB,EAAc3D,QAAQgF,mBAAmB9F,KAAK2E,cAC3D3E,KAAKiF,WAAaY,EAAOE,YACzB/F,KAAKkF,WAAaW,EAAOG,YACzB,IAAIC,EAAW,SAAUC,GACrBA,EAAaC,SAAQ,SAAUC,GAC3B,IAAIC,EAAcT,EAAMd,YACxB,GAAyB,OAArBsB,EAAWE,MAAgB,CACF,OAArBF,EAAWE,OAAmBF,EAAWE,MAAMC,aAC/CF,IAAcD,EAAWE,MAAME,aAAcZ,EAAMf,cAEvD,IAAI4B,EAAgBb,EAAMc,6BAA6BN,EAAW3E,MAAO2E,EAAWE,MAAOV,EAAMjB,aAAc0B,GAC/GD,EAAWK,cAAgBA,OAIvCR,EAASjG,KAAKiF,YACdgB,EAASjG,KAAKkF,aAElBR,EAAWzD,UAAU0F,iBAAmB,WACpC,IAAIC,EAAa,SAAUtE,GAEvB,IADA,IAAIuE,GAAS,EACNA,GAAQ,CACXA,GAAS,EACT,IAAK,IAAIhH,EAAI,EAAGA,EAAIyC,EAAOwE,OAAQjH,IAE/B,IADYyC,EAAOzC,GACR4G,cAAcK,OAAQ,CAC7BxE,EAAOyE,OAAOlH,EAAG,GACjBgH,GAAS,EACT,SAKhBD,EAAW5G,KAAKiF,YAChB2B,EAAW5G,KAAKkF,aAEpBR,EAAWzD,UAAU+F,oBAAsB,WACvChH,KAAKmF,kBAAoBV,EAAc3D,QAAQmG,gBAAgB1G,EAAW2G,kBAAmBlH,KAAK2E,cAClG3E,KAAKoF,sBAAwBX,EAAc3D,QAAQqG,oBAAoB5G,EAAW2G,kBAAmBlH,KAAK2E,cAC1G3E,KAAKqF,kBAAoBZ,EAAc3D,QAAQmG,gBAAgB1G,EAAW6G,kBAAmBpH,KAAK2E,cAClG3E,KAAKsF,sBAAwBb,EAAc3D,QAAQqG,oBAAoB5G,EAAW6G,kBAAmBpH,KAAK2E,eAE9GD,EAAWzD,UAAUoG,WAAa,WAC1BrH,KAAKmF,oBAAsBnF,KAAKiF,WAAW6B,OAC3C9G,KAAKuF,SAAWhF,EAAW6G,kBAEtBpH,KAAKqF,oBAAsBrF,KAAKkF,WAAW4B,SAChD9G,KAAKuF,SAAWhF,EAAW2G,oBAGnCxC,EAAWzD,UAAUqG,SAAW,WACxBtH,KAAKuF,WAGLvF,KAAKuH,cAAgBvH,KAAKiF,WAAW6B,OACrC9G,KAAKwF,WAAajF,EAAW2G,kBAEvBlH,KAAKuH,aAAgBvH,KAAKkF,WAAW4B,SAC3C9G,KAAKwF,WAAajF,EAAW6G,qBAGrC1C,EAAWzD,UAAUuG,YAAc,SAAUrG,GACzCnB,KAAK0F,KAAKvE,GACVnB,KAAK2F,mBACL3F,KAAK2G,mBACL,IAAIrD,EAAQ,GACRtD,KAAK+E,aACLzB,EAAQtD,KAAKuH,YAAcvH,KAAKiF,WAAajF,KAAKkF,YAEtD,IAAIuC,EAAe,GAInB,OAHIzH,KAAKgF,uBACLyC,EAAgBzH,KAAKuH,YAAgCvH,KAAKkF,WAAvBlF,KAAKiF,YAErC,CACH3B,MAAOA,EACPmE,aAAcA,IAGtB/C,EAAWzD,UAAUyG,UAAY,SAAUvG,GAOvC,OANAnB,KAAK0F,KAAKvE,GACVnB,KAAK2F,mBACL3F,KAAK2G,mBACL3G,KAAKgH,sBACLhH,KAAKqH,aACLrH,KAAKsH,WACE,CACHjC,kBAAmBrF,KAAKqF,kBACxBF,kBAAmBnF,KAAKmF,kBACxBG,sBAAuBtF,KAAKsF,sBAC5BF,sBAAuBpF,KAAKoF,sBAC5BG,SAAUvF,KAAKuF,SACfC,WAAYxF,KAAKwF,aAGzBd,EAAWzD,UAAU0G,SAAW,SAAUC,GACtC,IAAIC,EAAQD,EAAGC,MAAOlD,EAAeiD,EAAGjD,aAAcmD,EAAQF,EAAGE,MACjE,OAAOrD,EAAc3D,QAAQiH,WAAWF,EAAOlD,EAAcmD,IAEjEpD,EAAWzD,UAAUyF,6BAA+B,SAAUjF,EAAO6E,EAAO3B,EAAcqD,GACtF,OAAOvD,EAAc3D,QAAQ4F,6BAA6BjF,EAAMwG,MAAO3B,EAAO3B,EAAcqD,IAEzFtD,EA/IoB,GAiJ/BlF,EAAQsB,QAAU4D,G,cCnLlBvE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,IAAIE,EAAa,EAAQ,KACrB2H,EAA2B,WAC3B,SAASA,EAAUC,EAAGC,EAAGC,EAAOC,GAC5BtI,KAAKmI,EAAIA,EACTnI,KAAKoI,EAAIA,EACTpI,KAAKqI,MAAQA,EACbrI,KAAKsI,OAASA,EAalB,OAXAJ,EAAUjH,UAAUsH,gBAAkB,SAAU9G,GAC5C,IAAI0G,EAAI1G,EAAM0G,EAAGC,EAAI3G,EAAM2G,EAK3B,OAJsBpI,KAAKmI,GAAKA,GAC3BnI,KAAKmI,EAAInI,KAAKqI,OAAUF,GACzBnI,KAAKoI,GAAKA,GACTpI,KAAKoI,EAAIpI,KAAKsI,QAAWF,GAGlCF,EAAUM,aAAe,SAAU/G,GAC/B,OAAO,IAAIyG,EAAU,EAAG,EAAG3H,EAAWkI,eAAgBlI,EAAWkI,gBAAgBF,gBAAgB9G,IAE9FyG,EAlBmB,GAoB9B1I,EAAQsB,QAAUoH,G,oBCtBlB,IAAInI,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQkJ,kBAAe,EA4BvB,IAAIC,EAAY5I,EAAgB,EAAQ,MACpCQ,EAAa,EAAQ,KACrBqI,EAAU7I,EAAgB,EAAQ,KAClCyE,EAAUzE,EAAgB,EAAQ,KAClC8I,EAAc9I,EAAgB,EAAQ,MACtC+I,EAAQ,EAAQ,KAChBC,GAAO,EAAIJ,EAAU7H,WACrB4H,EACA,SAAsBM,EAAgBC,GAClCjJ,KAAKgJ,eAAiBA,EACtBhJ,KAAKiJ,iBAAmBA,GAIhCzJ,EAAQkJ,aAAeA,EACvB,IAAIQ,EAA6B,WAC7B,SAASA,IACLlJ,KAAKmJ,YAAc,SAAUC,EAAQnB,EAAOJ,GACxC,IAAIwB,EAAO7E,EAAQ1D,QAAQ2E,aAAaoC,GAAS,GAAK,EAClDyB,EAASV,EAAQ9H,QAAQyI,UAAUtB,GAGvC,OAFAmB,EAAOjB,EAAIiB,EAAOjB,EAAIkB,EAAOC,EAAOnB,EACpCiB,EAAOhB,EAAIgB,EAAOhB,EAAIiB,EAAOC,EAAOlB,EAC7BS,EAAY/H,QAAQ0H,aAAaY,GAAUA,EAAOnB,MAAQ,MA2QzE,OAxQAiB,EAAYjI,UAAUuI,uBAAyB,SAAU7E,EAAcsD,GACnE,OAAIW,EAAQ9H,QAAQ2I,eAAexB,IAAUtD,EAAamC,SAAWvG,EAAWmJ,WACrE/E,EAAasD,GAEjB1H,EAAWoJ,aAEtBT,EAAYjI,UAAU2I,kBAAoB,SAAU3B,EAAOtD,GACvD,OAAO3E,KAAKwJ,uBAAuB7E,EAAcsD,IAErDiB,EAAYjI,UAAU4I,gBAAkB,SAAU5B,EAAOtD,GACrD,IAAImF,EAAW9J,KAAK4J,kBAAkB3B,EAAOtD,GAC7C,MAAO,CACHoF,aAAcvF,EAAQ1D,QAAQiJ,aAAaD,GAC3CxD,MAAO9B,EAAQ1D,QAAQkJ,aAAaF,KAG5CZ,EAAYjI,UAAUgJ,qBAAuB,SAAUhC,EAAO3B,GAC1D,IAAIV,EAAQ5F,KACRkG,EAAe,GAOnB,OANA6C,EAAKzC,EAAM4D,MAAM/D,SAAQ,SAAUgE,GAC/B,IAAIC,EAAWxE,EAAMuD,YAAY,IAAIP,EAAQ9H,QAAQqJ,EAAK,GAAIA,EAAK,IAAKlC,EAAO3B,EAAMuB,OACpE,OAAbuC,GACAlE,EAAamE,KAAKD,MAGnBlE,GAEXgD,EAAYjI,UAAUqJ,0BAA4B,SAAUrC,EAAO3B,EAAO3B,GAKtE,IAJA,IAAI4F,EAASvK,KAAKiK,qBAAqBhC,EAAO3B,GAC1CJ,EAAe,GACfsE,EAAID,EAAOzD,OACX2D,EAAU7B,EAAQ9H,QAAQyI,UAAUtB,GAC/BpI,EAAI,EAAGA,EAAI2K,EAAG3K,IAAK,CACxB,IAAI6K,EAAI9B,EAAQ9H,QAAQyI,UAAUgB,EAAO1K,IACrC8K,EAAY3K,KAAK6J,gBAAgBa,EAAEzC,MAAOtD,GAY9C,GAXIgG,EAAUZ,cACNY,EAAUrE,OAASA,EAAMuB,QAAU8C,EAAUrE,MAAMuB,OAClDvB,EAAMsE,YAAcF,EAAEvC,IAAMsC,EAAQtC,KACrCuC,EAAI,MAIJpE,EAAMsE,YAAcF,EAAEvC,IAAMsC,EAAQtC,IACpCuC,EAAI,MAGF,OAANA,GAAcpE,EAAMuE,WAAY,CAChC,IAAIC,EAAKL,EAAQtC,EACb4C,EAAKN,EAAQrC,EACjB,GAAIsC,EAAEvC,IAAMsC,EAAQtC,GAGhB,IAFA,IAAI6C,EAAKC,KAAKC,IAAIR,EAAEtC,EAAIqC,EAAQrC,GAC5B+C,EAAKV,EAAQrC,EAAIsC,EAAEtC,EAAI,GAAK,IACvB4C,EAAK,GACV,GAAIhL,KAAK6J,gBAAgBjB,EAAQ9H,QAAQsK,UAAUN,EAAIC,EAAKI,EAAKH,GAAKrG,GAAcoF,aAAc,CAC9FW,EAAI,KACJ,YAIP,GAAIA,EAAEtC,IAAMqC,EAAQrC,EAGrB,IAFI4C,EAAKC,KAAKC,IAAIR,EAAEvC,EAAIsC,EAAQtC,GAC5BgD,EAAKV,EAAQtC,EAAIuC,EAAEvC,EAAI,GAAK,IACvB6C,EAAK,GACV,GAAIhL,KAAK6J,gBAAgBjB,EAAQ9H,QAAQsK,UAAUN,EAAKK,EAAKH,EAAID,GAAKpG,GAAcoF,aAAc,CAC9FW,EAAI,KACJ,OAKN,OAANA,GACAxE,EAAamE,KAAKE,EAAO1K,IAGjC,OAAOqG,GAEXgD,EAAYjI,UAAUoK,2BAA6B,SAAU1G,EAAcmF,EAAU7B,GACjF,OAAOtD,EAAa2G,UAAU,EAAGrD,GAAS6B,EAAWnF,EAAa2G,UAAUrD,EAAQ,IAExFiB,EAAYjI,UAAUsK,YAAc,SAAU5G,EAAc6G,EAAQC,GAChE,IAAI9H,EAAIgB,EAAa6G,GACrB,OAAKxL,KAAK0L,oBAAoB/H,EAAGgB,IAGjCA,EAAe3E,KAAKqL,2BAA2B1G,EAAcpE,EAAWoJ,YAAa6B,GACrF7G,EAAe3E,KAAKqL,2BAA2B1G,EAAchB,EAAG8H,IAHrD,MAMfvC,EAAYjI,UAAUkG,oBAAsB,SAAUU,EAAOlD,GAGzD,IAFA,IAAIgH,EAAUhH,EAAab,QAAQ,IAAIU,EAAQ1D,QAAQP,EAAWqL,gBAAiB/D,GAAOgE,eACtFrB,EAAI7F,EAAamC,OACZjH,EAAI,EAAGA,EAAI2K,EAAG3K,IAAK,CACxB,IAAI6K,EAAI1K,KAAK6J,gBAAgBhK,EAAG8E,GAChC,GAAgB,OAAZ+F,EAAEpE,OAAkBoE,EAAEX,cAAgBW,EAAEpE,MAAMuB,QAAUA,GACxD6C,EAAEpE,MAAMuE,WAER,IADA,IAAIN,EAASvK,KAAKiK,qBAAqBpK,EAAG6K,EAAEpE,OACnCwF,EAAI,EAAGA,EAAIvB,EAAOzD,OAAQgF,IAC/B,GAAIvB,EAAOuB,KAAOH,EACd,MAAO,CAAC/C,EAAQ9H,QAAQyI,UAAU1J,GAAI+I,EAAQ9H,QAAQyI,UAAUoC,IAKhF,OAAO,MAEXzC,EAAYjI,UAAUgG,gBAAkB,SAAUY,EAAOlD,GAGrD,IAFA,IAAIgH,EAAUhH,EAAab,QAAQ,IAAIU,EAAQ1D,QAAQP,EAAWqL,gBAAiB/D,GAAOgE,eACtFrB,EAAI7F,EAAamC,OACZjH,EAAI,EAAGA,EAAI2K,EAAG3K,IAAK,CACxB,IAAI6K,EAAI1K,KAAK6J,gBAAgBhK,EAAG8E,GAChC,GAAgB,OAAZ+F,EAAEpE,OAAkBoE,EAAEX,cAAgBW,EAAEpE,MAAMuB,QAAUA,EAExD,IADA,IAAI0C,EAASvK,KAAKsK,0BAA0BzK,EAAG6K,EAAEpE,MAAO3B,GAC/CmH,EAAI,EAAGA,EAAIvB,EAAOzD,OAAQgF,IAC/B,GAAIvB,EAAOuB,KAAOH,EACd,MAAO,CAAC/C,EAAQ9H,QAAQyI,UAAU1J,GAAI+I,EAAQ9H,QAAQyI,UAAUoC,IAKhF,OAAO,MAEXzC,EAAYjI,UAAUyF,6BAA+B,SAAUuB,EAAO3B,EAAO3B,EAAcqD,GACvF,IAAIuC,EAASvK,KAAKsK,0BAA0BrC,EAAO3B,EAAO3B,GACtDoH,EAAiB/L,KAAK+L,eAAepH,GACzC,GAAI2B,EAAMC,WACDwF,GAAmB/D,KAChB0C,EAAI1K,KAAKmJ,YAAY,IAAIP,EAAQ9H,QAAQ,EAAG,GAAImH,EAAO3B,EAAMuB,UACvD7H,KAAK6J,gBAAgBa,EAAG/F,GAAcoF,cAC5CQ,EAAOF,KAAKK,IAEhBA,EAAI1K,KAAKmJ,YAAY,IAAIP,EAAQ9H,SAAS,EAAG,GAAImH,EAAO3B,EAAMuB,UACpD7H,KAAK6J,gBAAgBa,EAAG/F,GAAcoF,cAC5CQ,EAAOF,KAAKK,SAInB,GAAIpE,EAAME,YAAa,CAEpB,IAAIkE,EADHqB,GAAmB/D,IAChB0C,EAAI1K,KAAKmJ,YAAY,IAAIP,EAAQ9H,SAAS,EAAG,GAAImH,EAAO3B,EAAMuB,UACxD7H,KAAK6J,gBAAgBa,EAAG/F,GAAcoF,cAC5CQ,EAAOF,KAAKK,GAMxB,IAFA,IAAIF,EAAID,EAAOzD,OACXkF,EAAS,GACJnM,EAAI,EAAGA,EAAI2K,EAAG3K,IAAK,CACxB,IAAIoM,EAAMjM,KAAKuL,YAAY5G,EAAcsD,EAAOsC,EAAO1K,IAC3C,OAARoM,GAA2D,OAA3CjM,KAAKiH,gBAAgBX,EAAMuB,MAAOoE,IAClDD,EAAO3B,KAAKzB,EAAQ9H,QAAQyI,UAAUgB,EAAO1K,KAGrD,OAAOmM,GAEX9C,EAAYjI,UAAUyK,oBAAsB,SAAUQ,EAAMvH,GACxD,SAAUA,EAAab,QAAQoI,IAEnChD,EAAYjI,UAAUkL,iBAAmB,SAAUxH,GAC/C,OAAOA,EAAalB,MAAM,IAAIoC,QAAO,SAAUiE,GAC3C,OAAOtF,EAAQ1D,QAAQiJ,aAAaD,OAG5CZ,EAAYjI,UAAU8K,eAAiB,SAAUpH,GAC7C,OAAO3E,KAAKmM,iBAAiBxH,GAAcmC,OAAiC,EAAxBvG,EAAW6L,YAEnElD,EAAYjI,UAAU6E,mBAAqB,SAAUnB,GAGjD,IAFA,IAAIoB,EAAc,GACdC,EAAc,GACTnG,EAAI,EAAGA,EAAI8E,EAAamC,OAAQjH,IAAK,CAC1C,IAAIiK,EAAWnF,EAAa9E,GAC5B,GAAI2E,EAAQ1D,QAAQiJ,aAAaD,GAAW,CACxC,IAAI1D,EAAa,IAAI0C,EAAMuD,WAAWzD,EAAQ9H,QAAQyI,UAAU1J,GAAI2E,EAAQ1D,QAAQkJ,aAAaF,IACxE,OAArB1D,EAAWE,OAAkBF,EAAWE,MAAMgG,aAC9CvG,EAAYsE,KAAKjE,GAGjBJ,EAAYqE,KAAKjE,IAI7B,MAAO,CACHL,YAAaA,EACbC,YAAaA,IAGrBkD,EAAYjI,UAAUsL,qBAAuB,SAAU5H,GACnD,IAAIiD,EACA4E,EAAkB7H,EAAalB,MAAM,IACrCgJ,IAAY7E,EAAK,IACdrH,EAAW6G,mBAAqB,GACnCQ,EAAGrH,EAAW2G,mBAAqB,GACnCU,GAUJ,OATA4E,EAAgBrG,SAAQ,SAAU2D,GAC9B,GAAIA,IAAavJ,EAAWoJ,YAA5B,CAGA,IAAIrD,EAAQ9B,EAAQ1D,QAAQkJ,aAAaF,GACrCxD,GACAmG,EAASnG,EAAMuB,OAAOwC,KAAK/D,EAAM4D,UAGlCuC,GAEXvD,EAAYjI,UAAUyL,aAAe,SAAU/I,EAAGgB,GAE9C,OAA+B,IADf3E,KAAKuM,qBAAqB5H,GACzBhB,GAAGmD,QAExBoC,EAAYjI,UAAU0L,eAAiB,SAAU9E,EAAOlD,GACpD,IAAI8H,EAAWzM,KAAKuM,qBAAqB5H,GACrCiI,EAASH,EAAS5E,GAClBgF,EAAWJ,EAASjI,EAAQ1D,QAAQgM,cAAcjF,IACtD,OAAO+E,EAAO9F,QAAU,GAAK+F,EAAS/F,QAAU,GAEpDoC,EAAYjI,UAAU8G,WAAa,SAAUF,EAAOlD,EAAcmD,GAC9D,IAG0BmE,EAAKtI,EAH3BoJ,EAAY,SAAUd,EAAKtI,GAC3B,OAAOsI,EAAIlI,KAAK,IAAIN,MAAME,GAAGmD,OAAS,GAKtC2F,EAAWzM,KAAKuM,qBAAqB5H,GACrCiI,EAASH,EAAS5E,GAClBgF,EAAWJ,EAASjI,EAAQ1D,QAAQgM,cAAcjF,IACtD,GAAsB,IAAlB+E,EAAO9F,QAAgB+F,EAAS/F,OAAS,EAAG,CAC5C,GAPsBmF,EAOPY,EAPYlJ,EAOFpD,EAAWyM,kBAN1Bf,EAAInI,QAAQH,GAMgC,CAClD,IAAIsJ,EAAQ,GACRC,EAAYH,EAAUF,EAAUtM,EAAW4M,iBAC3CD,EACAD,EAAQC,EAAY,EAAI,EAAI,GAEvBH,EAAUF,EAAUtM,EAAW6M,oBAAsB,EAC1DH,EAAQ,GAEHF,EAAUF,EAAUtM,EAAW8M,kBAAoB,EACxDJ,EAAQ,GAEHF,EAAUF,EAAUtM,EAAW6M,sBACpCH,EAAQ,IAGZ,IAAIK,EAAQT,EAAS/F,OAIrB,OAHIwG,EAAQ,IACRA,EAAQ,GAEL,IAAI5E,EAAa4E,EAAOL,GAEnC,OAAO,IAAIvE,EAAa,EAAG,IAE1B,OAAIZ,GAAS9H,KAAK2M,eAAe9E,EAAOlD,GAClC,IAAI+D,EAAa,EAAG,IAExB,MAEXQ,EAAYjI,UAAUsM,aAAe,SAAUjH,EAAO7E,GAClD,GAAI6E,EAAMsE,WAAY,CAClB,GAAItE,EAAMkH,cAAgB/L,EAAM2G,GAAK,EACjC,OAAO,EAEX,GAAI9B,EAAMgG,cAAgB7K,EAAM2G,GAAK,EACjC,OAAO,EAGf,OAAO,GAEJc,EAlRqB,GAqRhC1J,EAAQsB,QAAU,IAAIoI,G,YCpUtB,IAAItB,EAAI6F,EAAIC,EAAIC,EAChBxN,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQqE,8BAAgCrE,EAAQoO,gCAAkCpO,EAAQoE,sBAAwBpE,EAAQqO,wBAA0BrO,EAAQ+E,wBAA0B/E,EAAQkK,WAAalK,EAAQiJ,eAAiBjJ,EAAQsO,gBAAkBtO,EAAQ4M,WAAa5M,EAAQuO,gBAAkBvO,EAAQwO,kBAAoBxO,EAAQmK,YAAcnK,EAAQyO,oBAAsBzO,EAAQ0O,YAAc1O,EAAQ2O,0BAA4B3O,EAAQwN,gBAAkBxN,EAAQ4O,iBAAmB5O,EAAQoM,gBAAkBpM,EAAQ4N,mBAAqB5N,EAAQ6N,iBAAmB7N,EAAQ2N,gBAAkB3N,EAAQ6O,oBAAsB7O,EAAQ8O,YAAc9O,EAAQ4H,kBAAoB5H,EAAQ0H,uBAAoB,EA4BpsB1H,EAAQ0H,kBAAoB,IAC5B1H,EAAQ4H,kBAAoB,IAC5B5H,EAAQ8O,cAAe1G,EAAK,IACrBpI,EAAQ4H,mBAAqB,OAChCQ,EAAGpI,EAAQ0H,mBAAqB,IAChCU,GACJpI,EAAQ6O,sBAAuBZ,EAAK,IAC7BjO,EAAQ4H,mBAAqB,QAChCqG,EAAGjO,EAAQ0H,mBAAqB,QAChCuG,GACJjO,EAAQ2N,gBAAkB,IAC1B3N,EAAQ6N,iBAAmB,IAC3B7N,EAAQ4N,mBAAqB,IAC7B5N,EAAQoM,gBAAkB,IAC1BpM,EAAQ4O,iBAAmB,IAC3B5O,EAAQwN,gBAAkB,IAC1BxN,EAAQ2O,0BAA4B,IACpC3O,EAAQ0O,cAAeR,EAAK,IACrBlO,EAAQ2N,iBAAmB,MAC9BO,EAAGlO,EAAQ6N,kBAAoB,MAC/BK,EAAGlO,EAAQ4N,oBAAsB,MACjCM,EAAGlO,EAAQoM,iBAAmB,QAC9B8B,EAAGlO,EAAQ4O,kBAAoB,MAC/BV,EAAGlO,EAAQwN,iBAAmB,OAC9BU,EAAGlO,EAAQ2O,2BAA6B,SACxCT,GACJlO,EAAQyO,sBAAuBN,EAAK,IAC7BnO,EAAQ2N,iBAAmB,OAC9BQ,EAAGnO,EAAQ6N,kBAAoB,QAC/BM,EAAGnO,EAAQ4N,oBAAsB,UACjCO,EAAGnO,EAAQoM,iBAAmB,OAC9B+B,EAAGnO,EAAQ4O,kBAAoB,QAC/BT,EAAGnO,EAAQwN,iBAAmB,OAC9BW,EAAGnO,EAAQ2O,2BAA6B,mBACxCR,GACJnO,EAAQmK,YAAc,IACtBnK,EAAQwO,kBAAoB,IAC5BxO,EAAQuO,gBAAkB,IAC1BvO,EAAQ4M,WAAa,EACrB5M,EAAQsO,gBAAkB,EAC1BtO,EAAQiJ,eAAiB,EACzBjJ,EAAQkK,WAAalK,EAAQ4M,WAAa5M,EAAQ4M,WAClD5M,EAAQ+E,wBAA0B,WAClC/E,EAAQqO,wBAA0B,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACtErO,EAAQoE,sBAAwB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC9EpE,EAAQoO,gCAAkC,WAC1CpO,EAAQqE,8BAAgC0K,MAAMC,KAAK,CAAE1H,OAAQ,KAAM,SAAU2H,EAAG5O,GAAK,MAAO,GAAKA,M,cC5EjGM,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KAyCzBf,EAAQsB,QAxCR,WACI,IAAIiI,EAAO,GAqCX,OApCAA,EAAKxI,EAAW4M,iBAAmB,CAC/B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5D,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GACpE,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5D,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,IAExEpE,EAAKxI,EAAW8M,kBAAoB,CAChC,EAAE,GAAI,GACN,CAAC,GAAI,GACL,EAAE,GAAI,GACN,CAAC,GAAI,GACL,EAAE,EAAG,GACL,CAAC,EAAG,GACJ,EAAE,EAAG,GACL,CAAC,EAAG,IAERtE,EAAKxI,EAAW6N,kBAAoB,CAChC,EAAE,GAAI,GACN,CAAC,GAAI,GACL,EAAE,EAAG,GACL,CAAC,EAAG,IAERrF,EAAKxI,EAAW6M,oBAAsBrE,EAAKxI,EAAW6N,kBAAkBM,OAAO,CAC3E,CAAC,EAAG,KAER3F,EAAKxI,EAAWqL,iBAAmB7C,EAAKxI,EAAW6M,oBAAoBsB,OAAO,CAC1E,CAAC,GAAI,GACL,CAAC,EAAG,GACJ,EAAE,EAAG,KAET3F,EAAKxI,EAAWyM,iBAAmB,CAC/B,CAAC,EAAG,GACJ,EAAE,EAAG,GACL,CAAC,EAAG,IAERjE,EAAKxI,EAAW4N,2BAA6BpF,EAAKxI,EAAW6N,kBACtDrF,I,oBCnEX,IAAI4F,EAAmB3O,MAAQA,KAAK2O,kBAAqBxO,OAAOyO,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B5O,OAAOC,eAAeyO,EAAGG,EAAI,CAAE5M,YAAY,EAAMH,IAAK,WAAa,OAAO6M,EAAEC,OAC3E,SAAUF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVG,EAAgBlP,MAAQA,KAAKkP,cAAiB,SAASJ,EAAGtP,GAC1D,IAAK,IAAIkL,KAAKoE,EAAa,YAANpE,GAAoBvK,OAAOc,UAAUkO,eAAeC,KAAK5P,EAASkL,IAAIiE,EAAgBnP,EAASsP,EAAGpE,IAEvH3K,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQkF,WAAalF,EAAQ2E,OAAS3E,EAAQ6P,QAAU7P,EAAQ8P,YAAc9P,EAAQ0I,eAAY,EA4BlG,IAAIW,EAAc,EAAQ,KAC1B1I,OAAOC,eAAeZ,EAAS,YAAa,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB8I,GAAa/H,WACvH,IAAI2D,EAAgB,EAAQ,KAC5BtE,OAAOC,eAAeZ,EAAS,cAAe,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB0E,GAAe3D,WAC3H,IAAI6H,EAAY,EAAQ,KACxBxI,OAAOC,eAAeZ,EAAS,UAAW,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB4I,GAAW7H,WACnH,IAAIyO,EAAW,EAAQ,KACvBpP,OAAOC,eAAeZ,EAAS,SAAU,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBwP,GAAUzO,WACjH,IAAI0O,EAAe,EAAQ,KAC3BrP,OAAOC,eAAeZ,EAAS,aAAc,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgByP,GAAc1O,WACzHoO,EAAa,EAAQ,KAAe1P,I,oBCpDpC,IAAImP,EAAmB3O,MAAQA,KAAK2O,kBAAqBxO,OAAOyO,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B5O,OAAOC,eAAeyO,EAAGG,EAAI,CAAE5M,YAAY,EAAMH,IAAK,WAAa,OAAO6M,EAAEC,OAC3E,SAAUF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVG,EAAgBlP,MAAQA,KAAKkP,cAAiB,SAASJ,EAAGtP,GAC1D,IAAK,IAAIkL,KAAKoE,EAAa,YAANpE,GAAoBvK,OAAOc,UAAUkO,eAAeC,KAAK5P,EAASkL,IAAIiE,EAAgBnP,EAASsP,EAAGpE,IAEvH3K,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQmB,gBAAa,EA4BrBuO,EAAa,EAAQ,KAAY1P,GACjC0P,EAAa,EAAQ,KAAW1P,GAChC0P,EAAa,EAAQ,KAAU1P,GAC/B0P,EAAa,EAAQ,KAAY1P,GACjC,IAAIiQ,EAAe,EAAQ,KAC3BtP,OAAOC,eAAeZ,EAAS,aAAc,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB0P,GAAc3O,Y,oBC/CzH,IAAI6N,EAAmB3O,MAAQA,KAAK2O,kBAAqBxO,OAAOyO,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B5O,OAAOC,eAAeyO,EAAGG,EAAI,CAAE5M,YAAY,EAAMH,IAAK,WAAa,OAAO6M,EAAEC,OAC3E,SAAUF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVW,EAAsB1P,MAAQA,KAAK0P,qBAAwBvP,OAAOyO,OAAS,SAAUC,EAAGxK,GACxFlE,OAAOC,eAAeyO,EAAG,UAAW,CAAEzM,YAAY,EAAM/B,MAAOgE,KAC9D,SAASwK,EAAGxK,GACbwK,EAAW,QAAIxK,IAEfsL,EAAgB3P,MAAQA,KAAK2P,cAAiB,SAAU1P,GACxD,GAAIA,GAAOA,EAAIC,WAAY,OAAOD,EAClC,IAAI2P,EAAS,GACb,GAAW,MAAP3P,EAAa,IAAK,IAAI8O,KAAK9O,EAAe,YAAN8O,GAAmB5O,OAAOc,UAAUkO,eAAeC,KAAKnP,EAAK8O,IAAIJ,EAAgBiB,EAAQ3P,EAAK8O,GAEtI,OADAW,EAAmBE,EAAQ3P,GACpB2P,GAEP7P,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQqQ,aAAerQ,EAAQmB,gBAAa,EA4B5C,IAAI8O,EAAe,EAAQ,KAC3BtP,OAAOC,eAAeZ,EAAS,aAAc,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB0P,GAAc3O,WACzHtB,EAAQqQ,aAAeF,EAAa,EAAQ,O,YCrD5CxP,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IAUtDb,EAAQsB,QARJ,SAAkB8G,GACd,IAAItB,EAAQsB,EAAGtB,MAAOwJ,EAAiBlI,EAAGkI,eAAgBC,EAAmBnI,EAAGmI,iBAChF/P,KAAKsG,MAAQA,EACbtG,KAAK8P,eAAiBA,EACtB9P,KAAK+P,iBAAmBA,I,oBCNhC,IAAIhQ,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIK,EAAQX,EAAgB,EAAQ,MAChCiQ,EAASjQ,EAAgB,EAAQ,MACjCkQ,EAAWlQ,EAAgB,EAAQ,MACnCmQ,EAAWnQ,EAAgB,EAAQ,MACnCoQ,EAAUpQ,EAAgB,EAAQ,MAClCqQ,EAAiBrQ,EAAgB,EAAQ,MACzCsQ,EAAsB,WACtB,SAASA,EAAKxP,GACVb,KAAKsQ,MAAQ,GACbtQ,KAAKuQ,KAAO,KACZvQ,KAAKwQ,SAAW,GAChBxQ,KAAKyQ,QAAU,CACXC,MAAO,IAAIT,EAASnP,QAAQ,IAC5B6P,MAAO,IAAIV,EAASnP,QAAQ,KAEhCd,KAAK4P,OAAS,CACVgB,KAAM,CACFC,UAAU,EACVC,UAAU,GAEdJ,MAAO,IAAIR,EAASpP,QAAQ,KAEhCd,KAAK+Q,MAAQ,IAAIZ,EAAQrP,QAAQ,IACjCd,KAAKa,IAAMA,EACXb,KAAKsD,MAAQ,GA4GjB,OA1GAnD,OAAOC,eAAeiQ,EAAKpP,UAAW,gBAAiB,CACnDgB,IAAK,WACD,IAAI2F,EACJ,OAAmC,QAA1BA,EAAK5H,KAAKgR,kBAA+B,IAAPpJ,OAAgB,EAASA,EAAGqJ,gBAAkBjR,KAAKa,IAAIoQ,eAEtG7O,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeiQ,EAAKpP,UAAW,aAAc,CAChDgB,IAAK,WACD,OAAOjC,KAAKsD,MAAMtD,KAAKsD,MAAMwD,OAAS,IAAM,MAEhD1E,YAAY,EACZC,cAAc,IAElBgO,EAAKpP,UAAUkC,QAAU,SAAUH,GAC/B,QAAIA,IACAhD,KAAKsD,MAAM+G,KAAKrH,IACT,IAIfqN,EAAKpP,UAAUiQ,QAAU,SAAUjJ,GAC/B,OAAOjI,KAAKsD,MAAM2E,IAAU,MAEhCoI,EAAKpP,UAAUkQ,WAAa,SAAUvQ,GAClCZ,KAAKa,IAAMH,EAAMI,QAAQC,WAAWH,GAChCZ,KAAKgR,YACLhR,KAAKa,IAAIuQ,aAAapR,KAAKgR,aAGnCX,EAAKpP,UAAUoQ,iBAAmB,SAAU/N,GACxC,IAAIgO,EAAatR,KAAKa,IACtBb,KAAKsD,MAAQA,EAAMiO,UAAU7N,KAAI,SAAU8N,GACvC,IAAIxO,EAAOgN,EAAOlP,QAAQC,WAAWyQ,EAASF,GAC9C,GAAa,OAATtO,EACA,MAAM,IAAIyO,MAAM,uBAGpB,OADAH,EAAaA,EAAWI,QAAQ1O,GACzBA,KACRuO,UACCvR,KAAKgR,YACLhR,KAAKa,IAAIuQ,aAAapR,KAAKgR,aAGnCX,EAAKpP,UAAUG,SAAW,SAAUD,GAChC,IACI,IAAIN,EAAMM,EAAON,IAAKyC,EAAQnC,EAAOmC,MAAOyN,EAAQ5P,EAAO4P,MAAOnB,EAASzO,EAAOyO,OAAQa,EAAUtP,EAAOsP,QAASD,EAAWrP,EAAOqP,SAAUD,EAAOpP,EAAOoP,KAAMD,EAAQnP,EAAOmP,MAmBnL,OAlBAtQ,KAAKsQ,MAAQA,GAAStQ,KAAKsQ,MAC3BtQ,KAAKuQ,KAAOA,EAAO,IAAIoB,KAAKpB,GAAQvQ,KAAKuQ,KACzCvQ,KAAKwQ,SAAWA,GAAYxQ,KAAKwQ,SAC7BC,IACAzQ,KAAKyQ,QAAU,CACXC,MAAO,IAAIT,EAASnP,QAAQ2P,EAAQC,OACpCC,MAAO,IAAIV,EAASnP,QAAQ2P,EAAQE,SAGxCf,IACA5P,KAAK4P,OAAS,CACVgB,KAAMhB,EAAOgB,KACbF,MAAO,IAAIR,EAASpP,QAAQ8O,EAAOc,SAG3C1Q,KAAKa,IAAMH,EAAMI,QAAQC,WAAWF,GAAO,IAC3Cb,KAAKqR,iBAAiB/N,GAAS,IAC/BtD,KAAK+Q,MAAQ,IAAIZ,EAAQrP,QAAQiQ,GAAS,KACnC,EAEX,MAAOlP,GAEH,OADA+P,QAAQC,IAAIhQ,IACL,IAGfwO,EAAKpP,UAAUwB,OAAS,WACpB,IAAI7B,EAASZ,KAAKa,IAAImB,WAItB,OAHIhC,KAAKgR,aACLpQ,EAASZ,KAAKgR,WAAWpQ,QAEtB,CACH0P,MAAOtQ,KAAKsQ,MACZC,KAAMvQ,KAAKuQ,KAAOvQ,KAAKuQ,KAAKvO,WAAa,GACzCwO,SAAUxQ,KAAKwQ,SACfC,QAAS,CACLC,MAAO1Q,KAAKyQ,QAAQC,MAAMjO,SAC1BkO,MAAO3Q,KAAKyQ,QAAQE,MAAMlO,UAE9BmN,OAAQ,CACJgB,KAAM,CACFC,SAAU7Q,KAAK4P,OAAOgB,KAAKC,SAC3BC,SAAU9Q,KAAK4P,OAAOgB,KAAKE,UAE/BJ,MAAO1Q,KAAK4P,OAAOc,MAAMjO,UAE7BsO,MAAO/Q,KAAK+Q,MAAMtO,SAClBa,MAAOtD,KAAKsD,MAAMI,KAAI,SAAUoL,GAAK,OAAOA,EAAE9M,cAC9CnB,IAAKD,IAGbyP,EAAKpP,UAAU6Q,WAAa,SAAU7F,GAClC,IAAI8F,EAAOC,KAAKC,MAAM7B,EAAetP,QAAQoR,OAAOjG,IACpD,OAAOjM,KAAKoB,SAAS2Q,IAEzB1B,EAAKpP,UAAUkR,SAAW,WACtB,IAAIC,EAAQJ,KAAKK,UAAUrS,KAAKyC,UAChC,OAAO2N,EAAetP,QAAQwR,OAAOF,IAElC/B,EA9Hc,GAgIzB7Q,EAAQsB,QAAUuP,G,oBCrKlB,IAAItQ,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIkS,EAAU,EAAQ,KAClBzJ,EAAQ,EAAQ,KAChBvI,EAAa,EAAQ,KACrBiE,EAAUzE,EAAgB,EAAQ,KAClC6I,EAAU7I,EAAgB,EAAQ,KAClCyS,EAAazS,EAAgB,EAAQ,MACrC0S,EAAsB,WACtB,SAASA,EAAK7K,GACV,IAAItB,EAAQsB,EAAGtB,MAAOoM,EAAW9K,EAAG8K,SAAUC,EAAS/K,EAAG+K,OAAQC,EAAchL,EAAGgL,YAAaC,EAAWjL,EAAGiL,SAC9G7S,KAAKY,OAAS,KACdZ,KAAK8S,YAAc,CACfC,SAAU,KACVxN,SAAU,KACVC,WAAY,KACZwN,eAAgB,MAEpBhT,KAAKiT,iBAAkB,EACvBjT,KAAKsG,MAAQA,EACbtG,KAAK0S,SAAWA,EAChB1S,KAAK2S,OAASA,EACd3S,KAAK4S,cAAgBA,EACrB5S,KAAK6S,SAAWA,GAAY,KACxBN,EAAQjD,YAAY/B,aAAajH,EAAOqM,KACxC3S,KAAK4S,aAAc,EACnBtM,EAAM4M,WAEVlT,KAAKmT,UAAY,IAAIrK,EAAMsK,SA2M/B,OAzMAX,EAAKxR,UAAUoS,OAAS,SAAUxS,GAC9BA,EAAIyS,iBAAiBtT,MACrBa,EAAI0S,SAASC,aAAaxT,MAC1Ba,EAAI4S,iBAAiBzT,OAEzByS,EAAKxR,UAAUyS,QAAU,SAAU7S,GAC/Bb,KAAKY,OAASC,EAAImB,YAEtB7B,OAAOC,eAAeqS,EAAKxR,UAAW,gBAAiB,CACnDgB,IAAK,WACD,QAASjC,KAAK8S,YAAYE,gBAAkBhT,KAAK8S,YAAYvN,UAAYvF,KAAK8S,YAAYtN,aAE9FpD,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,qBAAsB,CACxDgB,IAAK,WACD,QAASjC,KAAKmT,UAAUQ,WAE5BvR,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,sBAAuB,CACzDgB,IAAK,WACD,QAASjC,KAAKmT,UAAUS,YAE5BxR,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,qBAAsB,CACxDgB,IAAK,WACD,QAASjC,KAAKmT,UAAUU,WAE5BzR,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,sBAAuB,CACzDgB,IAAK,WACD,QAASjC,KAAKmT,UAAUW,YAE5B1R,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,WAAY,CAC9CgB,IAAK,WACD,OAAOjC,KAAK8S,YAAYC,UAAY,MAExC3Q,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,WAAY,CAC9CgB,IAAK,WACD,OAAOjC,KAAK8S,YAAYvN,UAAY,MAExCnD,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,aAAc,CAChDgB,IAAK,WACD,OAAOjC,KAAK8S,YAAYtN,YAAc,MAE1CpD,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,iBAAkB,CACpDgB,IAAK,WACD,OAAOjC,KAAK8S,YAAYE,gBAAkB,MAE9C5Q,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,SAAU,CAC5CgB,IAAK,WACD,OAAOjC,KAAKwF,YAAcxF,KAAKgT,gBAEnC5Q,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqS,EAAKxR,UAAW,aAAc,CAChDgB,IAAK,WACD,OAAOjC,KAAKuF,UAAYvF,KAAK+T,QAEjC3R,YAAY,EACZC,cAAc,IAElBoQ,EAAK1R,WAAa,SAAUkL,EAAKpL,GAC7B,IAAIyF,EAAQ9B,EAAQ1D,QAAQkJ,aAAaiC,EAAI,IAC7C,GAAc,OAAV3F,EACA,OAAO,KAEX,IAAIoM,EAAW9J,EAAQ9H,QAAQkT,cAAc/H,EAAIgI,OAAO,EAAG,IACvDtB,EAAS/J,EAAQ9H,QAAQkT,cAAc/H,EAAIgI,OAAO,EAAG,IACrDjR,EAAO,IAAIyP,EAAK,CAChBnM,MAAOA,EACPoM,SAAUA,EACVC,OAAQA,IAERuB,EAAYjI,EAAInI,QAAQvD,EAAW4T,iBACvC,IAAOD,EAAW,CAEd,GAAc,QADVE,EAAQnI,EAAIgI,OAAOC,EAAY,GAAGE,MAAM,WAExC,OAAO,KAEX,IAAIC,EAAU/P,OAAO8P,EAAM,IACvBE,EAAgBzT,EAAI0B,UAAUN,IAAIoS,GACtC,IAAKC,EACD,MAAM,IAAI7C,MAAM,0BAEpBzO,EAAK6P,SAAW,IAAIL,EAAW1R,QAAQ,CACnCgP,eAAgB6C,EAChB5C,iBAAkBnH,EAAQ9H,QAAQyT,wBAAwBF,GAC1D/N,MAAOgO,IAGf,IAAIE,EAAevI,EAAInI,QAAQvD,EAAWkU,iBAC1C,IAAOD,EAAc,CACjB,IAAIJ,EACJ,GAAc,QADVA,EAAQnI,EAAIgI,OAAOO,EAAe,GAAGJ,MAAM,WAE3C,OAAO,KAEX,IAAI5J,EAAIlG,OAAO8P,EAAM,IACrBpR,EAAKmQ,UAAYrK,EAAMsK,SAASsB,WAAWlK,GAO/C,OALyByB,EAAInI,QAAQvD,EAAWoU,6BAE5C3R,EAAKiQ,iBAAkB,GAE3BjQ,EAAKqQ,OAAOxS,GACLmC,GAEXyP,EAAKxR,UAAUe,SAAW,WACtB,IAAI4S,EAAQ5U,KAAKsG,MAAMuF,cACnBgJ,EAAa7U,KAAK0S,SAASoC,UAC3BC,EAAa/U,KAAK2S,OAAOmC,UACzBE,EAAQ,GAaZ,OAZIhV,KAAK6S,WACLmC,GAASzU,EAAW4T,gBAAkBnU,KAAK6S,SAAS9C,iBAAiB9H,OAErEjI,KAAKmT,UAAU8B,WACfD,GAASzU,EAAWkU,gBAAkBzU,KAAKmT,UAAU+B,YAErDlV,KAAK4S,cACLoC,GAASzU,EAAW4U,oBAEpBnV,KAAKiT,kBACL+B,GAASzU,EAAWoU,2BAEjB,GAAKC,EAAQC,EAAaE,EAAaC,GAElDvC,EAAKxR,UAAUmU,kBAAoB,SAAUC,GACzC,IAAIC,EAAO,GA6BX,OA5BID,GACIrV,KAAKuV,qBACLD,GAAQ,uBAERtV,KAAKwV,sBACLF,GAAQ,wBAERtV,KAAKyV,qBACLH,GAAQ,uBAERtV,KAAK0V,sBACLJ,GAAQ,0BAIRtV,KAAKuV,qBACLD,GAAQ,kBAERtV,KAAKwV,sBACLF,GAAQ,gBAERtV,KAAKyV,qBACLH,GAAQ,qBAERtV,KAAK0V,sBACLJ,GAAQ,oBAGTA,GAEX7C,EAAKxR,UAAU0U,WAAa,SAAUN,GAClC,GAAIA,EAAW,CACX,IAAIxC,EAAW,GACX7S,KAAK6S,WACLA,EAAW,aAAe7S,KAAK6S,SAASvM,MAAMsP,cAElD,IAAI1C,EAAUlT,KAAK4S,YAAc,cAAgB,GAC7C0C,EAAOtV,KAAKoV,kBAAkBC,GAClC,MAAO,IAAMrV,KAAKgC,WAAa,KAAOhC,KAAKsG,MAAMsP,aAAe,eAAiB5V,KAAK0S,SAASkD,aAAe,OAAS5V,KAAK2S,OAAOiD,aAAe1C,EAAUL,EAAW,IAAMyC,EAS7K,OANIzC,EAAW,GACX7S,KAAK6S,WACLA,EAAW,OAAwB7S,KAAK6S,SAASvM,MAAMtC,OAEvDkP,EAAUlT,KAAK4S,YAAc,MAAQ,GACrC0C,EAAOtV,KAAKoV,kBAAkBC,GAC3B,IAAMrV,KAAKgC,WAAa,KAAOhC,KAAKsG,MAAMtC,MAAQ,WAA2ChE,KAAK0S,SAAS1O,MAAQ,OAAmBhE,KAAK2S,OAAO3O,MAAQkP,EAAUL,EAAW,IAAMyC,GAG7L7C,EA/Nc,GAiOzBjT,EAAQsB,QAAU2R,G,YCtQlBtS,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,IAAIwV,EAAwB,WACxB,SAASA,EAAOjO,GACZ,IAAIkO,EAAKlO,EAAGkO,GAAI7R,EAAO2D,EAAG3D,KAC1BjE,KAAK8V,GAAKA,GAAM,GAChB9V,KAAKiE,KAAOA,GAAQ,GAQxB,OANA4R,EAAO5U,UAAUwB,OAAS,WACtB,MAAO,CACHqT,GAAI9V,KAAK8V,GACT7R,KAAMjE,KAAKiE,OAGZ4R,EAZgB,GAc3BrW,EAAQsB,QAAU+U,G,YCflB1V,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,IAAI0V,EAAwB,WACxB,SAASA,EAAOnO,GACZ,IAAIoO,EAAMpO,EAAGoO,IAAKC,EAAOrO,EAAGqO,KAAMC,EAAOtO,EAAGsO,KAC5ClW,KAAKgW,IAAMA,GAAO,EAClBhW,KAAKiW,KAAOA,GAAQ,EACpBjW,KAAKkW,KAAOA,GAAQ,EASxB,OAPAH,EAAO9U,UAAUwB,OAAS,WACtB,MAAO,CACHuT,IAAKhW,KAAKgW,IACVC,KAAMjW,KAAKiW,KACXC,KAAMlW,KAAKkW,OAGZH,EAdgB,GAgB3BvW,EAAQsB,QAAUiV,G,YCjBlB5V,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,IAAI8V,EAAuB,WACvB,SAASA,EAAMvO,GACX,IAAIwO,EAAcxO,EAAGwO,YAAaC,EAAYzO,EAAGyO,UAAWC,EAAe1O,EAAG0O,aAAcC,EAAe3O,EAAG2O,aAC9GvW,KAAKqW,UAAYA,GAAa,EAC9BrW,KAAKoW,YAAcA,GAAe,EAClCpW,KAAKsW,aAAeA,GAAgB,EACpCtW,KAAKuW,aAAeA,GAAgB,EAUxC,OARAJ,EAAMlV,UAAUwB,OAAS,WACrB,MAAO,CACH2T,YAAapW,KAAKoW,YAClBC,UAAWrW,KAAKqW,UAChBC,aAActW,KAAKsW,aACnBC,aAAcvW,KAAKuW,eAGpBJ,EAhBe,GAkB1B3W,EAAQsB,QAAUqV,G,oBCnBlB,IAAIpW,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQ2W,MAAQ3W,EAAQuW,OAASvW,EAAQqW,OAASrW,EAAQgX,SAAWhX,EAAQiT,KAAOjT,EAAQ6Q,UAAO,EA4BnG,IAAI7P,EAAS,EAAQ,KACrBL,OAAOC,eAAeZ,EAAS,OAAQ,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBS,GAAQM,WAC7G,IAAIkP,EAAS,EAAQ,KACrB7P,OAAOC,eAAeZ,EAAS,OAAQ,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBiQ,GAAQlP,WAC7G,IAAI0R,EAAa,EAAQ,KACzBrS,OAAOC,eAAeZ,EAAS,WAAY,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgByS,GAAY1R,WACrH,IAAImP,EAAW,EAAQ,KACvB9P,OAAOC,eAAeZ,EAAS,SAAU,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBkQ,GAAUnP,WACjH,IAAIoP,EAAW,EAAQ,KACvB/P,OAAOC,eAAeZ,EAAS,SAAU,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBmQ,GAAUpP,WACjH,IAAIqP,EAAU,EAAQ,KACtBhQ,OAAOC,eAAeZ,EAAS,QAAS,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBoQ,GAASrP,Y,UC3C/GX,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtD,IAAIoW,EAA8B,WAC9B,SAASA,EAAa7T,GAClB5C,KAAK0W,kBAAoB,GACzB1W,KAAK2W,WAAa,GAClB3W,KAAK4W,aAAc,EACnB5W,KAAK0W,kBAAoB,GACzB1W,KAAK2W,WAAa,GAClB3W,KAAK6W,OAASjU,EAAQiU,OA6C1B,OA3CAJ,EAAaxV,UAAU6V,QAAU,WAC7B9W,KAAK0W,kBAAoB,GACzB1W,KAAK2W,WAAa,IAEtBF,EAAaxV,UAAU8V,gBAAkB,WACrC,IAAI/W,KAAK4W,YAGT,KAAO5W,KAAK2W,WAAW7P,QAAQ,CAC3B,IAAIwJ,EAAQtQ,KAAK2W,WAAWK,QAC5BhX,KAAKiX,cAAc3G,EAAMrM,KAAMqM,EAAM4G,QAG7CT,EAAaxV,UAAUkW,cAAgB,SAAU7G,EAAO4G,GACpDlX,KAAK2W,WAAWtM,KAAK,CACjBpG,KAAMqM,EACN4G,KAAMA,IAEVlX,KAAK+W,mBAETN,EAAaxV,UAAUmW,gBAAkB,SAAUC,GAC/C,IAAKA,EACD,MAAM,IAAI5F,MAAM,uBAGxBgF,EAAaxV,UAAUgW,cAAgB,SAAUI,EAAWH,GACxDlX,KAAKoX,gBAAgBC,GACrBrX,KAAK0W,kBAAkBW,GAAarX,KAAK0W,kBAAkBW,IAAc,GACzErX,KAAK0W,kBAAkBW,GAAWlR,SAAQ,SAAUmR,GAChDA,EAASJ,OAGjBT,EAAaxV,UAAUsW,oBAAsB,SAAUF,EAAWC,GAC9DtX,KAAKoX,gBAAgBC,GACrBrX,KAAK0W,kBAAkBW,GAAarX,KAAK0W,kBAAkBW,IAAc,GACzErX,KAAK0W,kBAAkBW,GAAWhN,KAAKiN,IAE3Cb,EAAaxV,UAAUuW,uBAAyB,SAAUH,EAAWC,GACjEtX,KAAKoX,gBAAgBC,GACrBrX,KAAK0W,kBAAkBW,GAAarX,KAAK0W,kBAAkBW,IAAc,GACzE,IAAIpP,EAAQjI,KAAK0W,kBAAkBW,GAAWvT,QAAQwT,IACrDrP,GAASjI,KAAK0W,kBAAkBW,GAAWtQ,OAAOkB,EAAO,IAEvDwO,EApDsB,GAsDjCjX,EAAQsB,QAAU2V,G,YCvDlBtW,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IAQtD,IAAIoX,EAAS,CAETC,QAAS,oEAETpF,OAAQ,SAAUqF,GACd,IACIC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EADpCC,EAAS,GAETtY,EAAI,EAER,IADA8X,EAAQF,EAAOW,aAAaT,GACrB9X,EAAI8X,EAAM7Q,QAIbiR,GAHAH,EAAOD,EAAMU,WAAWxY,OAGT,EACfmY,GAAgB,EAAPJ,IAAa,GAHtBC,EAAOF,EAAMU,WAAWxY,OAGY,EACpCoY,GAAgB,GAAPJ,IAAc,GAHvBC,EAAOH,EAAMU,WAAWxY,OAGa,EACrCqY,EAAc,GAAPJ,EACHQ,MAAMT,GACNI,EAAOC,EAAO,GAETI,MAAMR,KACXI,EAAO,IAEXC,EAASA,EACLnY,KAAK0X,QAAQa,OAAOR,GAAQ/X,KAAK0X,QAAQa,OAAOP,GAChDhY,KAAK0X,QAAQa,OAAON,GAAQjY,KAAK0X,QAAQa,OAAOL,GAExD,OAAOC,GAGXjG,OAAQ,SAAUyF,GACd,IACIC,EAAMC,EAAMC,EACNE,EAAMC,EAAMC,EAFlBC,EAAS,GAGTtY,EAAI,EAER,IADA8X,EAAQA,EAAMa,QAAQ,sBAAuB,IACtC3Y,EAAI8X,EAAM7Q,QAKb8Q,EAJO5X,KAAK0X,QAAQ5T,QAAQ6T,EAAMY,OAAO1Y,OAIzB,GAHhBmY,EAAOhY,KAAK0X,QAAQ5T,QAAQ6T,EAAMY,OAAO1Y,QAGX,EAC9BgY,GAAgB,GAAPG,IAAc,GAHvBC,EAAOjY,KAAK0X,QAAQ5T,QAAQ6T,EAAMY,OAAO1Y,QAGJ,EACrCiY,GAAgB,EAAPG,IAAa,GAHtBC,EAAOlY,KAAK0X,QAAQ5T,QAAQ6T,EAAMY,OAAO1Y,OAIzCsY,GAAkBM,OAAOzO,aAAa4N,GAC1B,IAARK,IACAE,GAAkBM,OAAOzO,aAAa6N,IAE9B,IAARK,IACAC,GAAkBM,OAAOzO,aAAa8N,IAI9C,OADSL,EAAOiB,aAAaP,IAIjCC,aAAc,SAAUO,GACpBA,EAASA,EAAOH,QAAQ,QAAS,MAEjC,IADA,IAAII,EAAU,GACLpO,EAAI,EAAGA,EAAImO,EAAO7R,OAAQ0D,IAAK,CACpC,IAAI7G,EAAIgV,EAAON,WAAW7N,GACtB7G,EAAI,IACJiV,GAAWH,OAAOzO,aAAarG,GAEzBA,EAAI,KAASA,EAAI,MACvBiV,GAAWH,OAAOzO,aAAcrG,GAAK,EAAK,KAC1CiV,GAAWH,OAAOzO,aAAkB,GAAJrG,EAAU,OAG1CiV,GAAWH,OAAOzO,aAAcrG,GAAK,GAAM,KAC3CiV,GAAWH,OAAOzO,aAAerG,GAAK,EAAK,GAAM,KACjDiV,GAAWH,OAAOzO,aAAkB,GAAJrG,EAAU,MAGlD,OAAOiV,GAGXF,aAAc,SAAUE,GACpB,IAEIjV,EAAGkV,EAFHF,EAAS,GACT9Y,EAAI,EACGiZ,EAAK,EAEhB,IADAnV,EAAIkV,EAAKC,EAAK,EACPjZ,EAAI+Y,EAAQ9R,SACfnD,EAAIiV,EAAQP,WAAWxY,IACf,KACJ8Y,GAAUF,OAAOzO,aAAarG,GAC9B9D,KAEM8D,EAAI,KAASA,EAAI,KACvBkV,EAAKD,EAAQP,WAAWxY,EAAI,GAC5B8Y,GAAUF,OAAOzO,cAAmB,GAAJrG,IAAW,EAAW,GAALkV,GACjDhZ,GAAK,IAGLgZ,EAAKD,EAAQP,WAAWxY,EAAI,GAC5BiZ,EAAKF,EAAQP,WAAWxY,EAAI,GAC5B8Y,GAAUF,OAAOzO,cAAmB,GAAJrG,IAAW,IAAa,GAALkV,IAAY,EAAW,GAALC,GACrEjZ,GAAK,GAGb,OAAO8Y,IAGfnZ,EAAQsB,QAAU2W,G,oBC/GlB,IAAI1X,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQuZ,MAAQvZ,EAAQiX,kBAAe,EA4BvC,IAAIuC,EAAiB,EAAQ,GAC7B7Y,OAAOC,eAAeZ,EAAS,eAAgB,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBiZ,GAAgBlY,WAC7H,IAAIL,EAAU,EAAQ,KACtBN,OAAOC,eAAeZ,EAAS,QAAS,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBU,GAASK,Y,kBCnC/G,IAAImY,EAAiBjZ,MAAQA,KAAKiZ,eAAkB,SAAUC,EAAI1K,EAAM2K,GACpE,GAAIA,GAA6B,IAArBC,UAAUtS,OAAc,IAAK,IAA4BuS,EAAxBxZ,EAAI,EAAGyZ,EAAI9K,EAAK1H,OAAYjH,EAAIyZ,EAAGzZ,KACxEwZ,GAAQxZ,KAAK2O,IACR6K,IAAIA,EAAK9K,MAAMtN,UAAUsY,MAAMnK,KAAKZ,EAAM,EAAG3O,IAClDwZ,EAAGxZ,GAAK2O,EAAK3O,IAGrB,OAAOqZ,EAAGxK,OAAO2K,GAAM9K,MAAMtN,UAAUsY,MAAMnK,KAAKZ,KAGtD,SAASgL,EAAWlX,GAChB,OAAOA,EAAOoB,KAAI,SAAU4C,GACxB,MAAO,KAAiB,OAAVA,EAAiB,IAAMA,EAAMuF,eAAiB,OAC7D9H,KAAK,KAJZ5D,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IAuBtDb,EAAQsB,QAjBR,SAAoBD,GAChB,IAAIsB,EAAmBtB,EAAIqB,MAAMC,iBAcjC,OAZa8W,EAAc,GAAI9W,GAAkB,GAAMoP,UAAUkI,QAAO,SAAUC,EAAGC,EAAQ9Z,GAMzF,OADA6Z,EAAK,MAAQ,EAAI7Z,GAAK,KAJb2Z,EAAWG,GAImB,SAH1B9Z,IAAMsC,EAAiB2E,OAAS,EACzC,oCACA,uCALE,uCAaH8I,2CAJM/O,EAAI0B,UAAUD,OAAOoB,KAAI,WAAc,MAAO,SAAUK,KAAK,KAGjC,SAF7ByV,EAAW3Y,EAAI0B,UAAUD,QAEiC,SADzDzB,EAAI0B,UAAUD,OAAOoB,KAAI,WAAc,MAAO,SAAUK,KAAK,KAC0B,M,oBC7BxG,IAAIhE,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAImE,EAAUzE,EAAgB,EAAQ,KAClC6Z,EAAe7Z,EAAgB,EAAQ,MACvCQ,EAAa,EAAQ,KACrBsZ,EAAa,EAAQ,KACrBjR,EAAU7I,EAAgB,EAAQ,KAIlC+Z,EAAuB,WACvB,SAASA,EAAMC,GACX/Z,KAAKkG,aAAeqI,MAAMC,KAAK,CAC3B1H,OAAQ+S,EAAWnQ,aACpB,SAAU+E,EAAG5O,GACZ,IAAI4B,EAAQmH,EAAQ9H,QAAQyI,UAAU1J,GACtC,OAAO,IAAI+Z,EAAa9Y,QAAQW,EAAO,SAEtCsY,IACDA,EAAWxZ,EAAWyZ,mBAE1B,IAAIC,EAAcja,KAAKka,QAAQH,GAAUvB,QAAQ,MAAO,IACxD,GAAIyB,EAAYnT,OAAS+S,EAAWnQ,aAC/BlF,EAAQ1D,QAAQqZ,oBAAoBF,GACrC,MAAM,IAAIxI,MAAM,wBAA0BsI,GAE9C/Z,KAAKkG,aAAe+T,EAAYxW,MAAM,IAAIC,KAAI,SAAUoG,EAAUjK,GAC9D,IAAI4B,EAAQmH,EAAQ9H,QAAQyI,UAAU1J,GACtC,OAAO,IAAI+Z,EAAa9Y,QAAQW,EAAOqI,IAAa+P,EAAWlQ,YAAc,KAAOnF,EAAQ1D,QAAQkJ,aAAaF,OAmFzH,OAhFA3J,OAAOC,eAAe0Z,EAAM7Y,UAAW,mBAAoB,CACvDgB,IAAK,WACD,IAAImY,EAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAIvC,OAHApa,KAAKkG,aAAaC,SAAQ,SAAUC,GAChCgU,EAAIhU,EAAW3E,MAAM2G,GAAGhC,EAAW3E,MAAM0G,GAAK/B,EAAWE,SAEtD8T,GAEXhY,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe0Z,EAAM7Y,UAAW,SAAU,CAC7CgB,IAAK,WACD,OAAOjC,KAAKkG,aAAaxC,KAAI,SAAU0C,GACnC,OAAOA,EAAWE,UAG1BlE,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe0Z,EAAM7Y,UAAW,YAAa,CAChDgB,IAAK,WACD,OAAOjC,KAAKkG,aAAamU,MAAK,SAAUjU,GACpC,OAAOA,EAAWE,OAASF,EAAWE,MAAMC,YAAcH,EAAWE,MAAMgG,iBAGnFlK,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe0Z,EAAM7Y,UAAW,YAAa,CAChDgB,IAAK,WACD,OAAOjC,KAAKkG,aAAamU,MAAK,SAAUjU,GACpC,OAAOA,EAAWE,OAASF,EAAWE,MAAMC,YAAcH,EAAWE,MAAMkH,iBAGnFpL,YAAY,EACZC,cAAc,IAElByX,EAAM7Y,UAAUqZ,QAAU,SAAUzS,GAChC,OAAOrD,EAAQ1D,QAAQ2E,aAAaoC,GAAS7H,KAAK2T,UAAY3T,KAAK6T,WAEvEiG,EAAM7Y,UAAUsZ,SAAW,SAAUtO,GACjC,IAAIuO,EAAM,IAAIC,OAAO,MAAQZ,EAAWlQ,YAAc,KAAM,KAC5D,OAAOsC,EAAIuM,QAAQgC,GAAK,SAAUE,GAAM,OAAOA,EAAG5T,WAEtDgT,EAAM7Y,UAAUiZ,QAAU,SAAUjO,GAChC,OAAOA,EAAIuM,QAAQ,UAAU,SAAUkC,GAEnC,OAAOnM,MAAMC,KAAK,CACd1H,OAAQ4T,IACT,WAAc,OAAOb,EAAWlQ,eAAgB5F,KAAK,QAGhE+V,EAAM7Y,UAAU0Z,aAAe,SAAUzU,GASrC,YARqB,IAAjBA,IAA2BA,EAAelG,KAAKkG,cACzCA,EAAaxC,KAAI,SAAU0C,EAAYvG,GAC7C,IAAI6K,EAAItE,EAAWwU,kBACnB,OAAI/a,GAAKA,EAAIga,EAAWzN,YAAe,GAAKvM,IAAMga,EAAWnQ,WAClD,GAAKmQ,EAAW9L,gBAAkBrD,EAEtCA,KACR3G,KAAK,KAGZ+V,EAAM7Y,UAAU4Z,uBAAyB,WACrC,IAAI5O,EAAMjM,KAAK2a,eAEf,OADM1O,EAAIuM,QAAQ,MAAO,KAG7BsB,EAAM7Y,UAAUe,SAAW,SAAUkE,GACjC,IAAI+F,EAAMjM,KAAK2a,aAAazU,GAE5B,OADMlG,KAAKua,SAAStO,IAGxB6N,EAAM7Y,UAAU6Z,gBAAkB,SAAU7S,GACxC,OAAOjI,KAAKkG,aAAa+B,GAAO3B,OAEpCwT,EAAM7Y,UAAU8Z,gBAAkB,SAAU9S,EAAO3B,GAC/CtG,KAAKkG,aAAa+B,GAAO3B,MAAQA,GAE9BwT,EArGe,GAuG1Bta,EAAQsB,QAAUgZ,G,aC9IlB3Z,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIkS,EAAU,EAAQ,KAClBhS,EAAa,EAAQ,KAErBya,EAAyB,WACzB,SAASA,IACLhb,KAAKiJ,iBAAmB,KACxBjJ,KAAKgJ,eAAiB,KACtBhJ,KAAKib,cAAe,EACpBjb,KAAK6H,MAAQ,KA+FjB,OA7FA1H,OAAOC,eAAe4a,EAAQ/Z,UAAW,UAAW,CAChDgB,IAAK,WACD,OAAOjC,KAAK6H,QAAU0K,EAAQrL,mBAElC9E,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe4a,EAAQ/Z,UAAW,UAAW,CAChDgB,IAAK,WACD,OAAOjC,KAAK6H,QAAU0K,EAAQnL,mBAElChF,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe4a,EAAQ/Z,UAAW,kBAAmB,CACxDgB,IAAK,WACD,OAAOjC,KAAKkb,YAAclb,KAAKmb,SAEnC/Y,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe4a,EAAQ/Z,UAAW,kBAAmB,CACxDgB,IAAK,WACD,OAAOjC,KAAKkb,aAAelb,KAAKmb,SAEpC/Y,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe4a,EAAQ/Z,UAAW,aAAc,CACnDgB,IAAK,WACD,OAAiC,OAA1BjC,KAAKiJ,kBAEhB7G,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAe4a,EAAQ/Z,UAAW,gBAAiB,CACtDgB,IAAK,WACD,SAAKjC,KAAKkb,YAAsC,OAAxBlb,KAAKgJ,gBACC,OAA1BhJ,KAAKiJ,mBAGFjJ,KAAKgJ,gBAAkBhJ,KAAKiJ,kBAEvC7G,YAAY,EACZC,cAAc,IAElB2Y,EAAQ/Z,UAAU8B,IAAM,SAAU8E,EAAOoB,EAAkBD,GACvDhJ,KAAK6H,MAAQA,EACb7H,KAAKiJ,iBAAmBA,EACxBjJ,KAAKgJ,eAAiBA,GAE1BgS,EAAQ/Z,UAAUma,MAAQ,WACtBpb,KAAK6H,MAAQ,KACb7H,KAAKiJ,iBAAmB,KACxBjJ,KAAKgJ,eAAiB,MAE1BgS,EAAQ/Z,UAAUoa,QAAU,SAAUxT,GACN,OAAxB7H,KAAKgJ,gBAA2BnB,IAAU7H,KAAK6H,OAC/C7H,KAAKgJ,iBACLhJ,KAAKib,cAAe,GAGpBjb,KAAKib,cAAe,GAG5BD,EAAQja,WAAa,SAAUua,GACtBA,IACDA,EAAa/a,EAAWgb,QAAU,IAAMhb,EAAWgb,QAAU,IAAMhb,EAAWgb,SAElF,IAAIC,EAAU,IAAIR,EACdS,EAAaH,EAAW7X,MAAM,KAC9BgY,EAAW,KAAOlb,EAAWgb,UAC7BC,EAAQvS,iBAAmB3E,OAAOmX,EAAW,KAEjD,IAAIC,EAAeD,EAAW,GAAGhY,MAAM,KASvC,OARIiY,EAAa,KAAOnb,EAAWgb,UAC/BC,EAAQ3T,MAAQ0K,EAAQrL,kBACxBsU,EAAQxS,eAAiB1E,OAAOoX,EAAa,KAE7CA,EAAa,KAAOnb,EAAWgb,UAC/BC,EAAQ3T,MAAQ0K,EAAQnL,kBACxBoU,EAAQxS,eAAiB1E,OAAOoX,EAAa,KAE1CF,GAEXR,EAAQ/Z,UAAUe,SAAW,WACzB,IAEIiK,EAAM,IAFajM,KAAKkb,YAAclb,KAAKmb,QAAUnb,KAAKgJ,eAAiBzI,EAAWgb,SAK1F,OAFAtP,GAAO,KAFgBjM,KAAKkb,aAAelb,KAAKmb,QAAUnb,KAAKgJ,eAAiBzI,EAAWgb,UAGpF,KAAOvb,KAAKkb,WAAalb,KAAKiJ,iBAAmB1I,EAAWgb,UAGhEP,EApGiB,GAsG5Bxb,EAAQsB,QAAUka,G,oBCrIlB,IAAIjb,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAImE,EAAUzE,EAAgB,EAAQ,KAClC4b,EAA2B,WAC3B,SAASA,EAAUC,GAEf,GADA5b,KAAKsC,OAAS,GACVsZ,EAAc,CACd,GAAIA,EAAa9U,OAAS,KACrBtC,EAAQ1D,QAAQqZ,oBAAoByB,GAAc,GACnD,MAAM,IAAInK,MAAM,4BAA8BmK,GAElD5b,KAAKsC,OAASsZ,EAAanY,MAAM,IAAIC,KAAI,SAAUoG,EAAUjK,GAEzD,OADQ2E,EAAQ1D,QAAQkJ,aAAaF,MAEtCjE,QAAO,SAAUS,GAChB,OAAiB,OAAVA,MAyBnB,OArBAnG,OAAOC,eAAeub,EAAU1a,UAAW,YAAa,CACpDgB,IAAK,WACD,OAAOjC,KAAKsC,OAAOwE,OAAS,GAEhC1E,YAAY,EACZC,cAAc,IAElBsZ,EAAU1a,UAAUgB,IAAM,SAAUgG,GAChC,OAAOjI,KAAKsC,OAAO2F,IAEvB0T,EAAU1a,UAAU4a,cAAgB,SAAU5T,GAI1C,OAHMjI,KAAKiC,IAAIgG,IACXjI,KAAKsC,OAAOyE,OAAOkB,EAAO,IAEvB,GAEX0T,EAAU1a,UAAUe,SAAW,WAC3B,OAAOhC,KAAKsC,OAAOoB,KAAI,SAAUgH,GAC7B,OAAOA,EAAEmB,iBACV9H,KAAK,KAEL4X,EArCmB,GAuC9Bnc,EAAQsB,QAAU6a,G,oBCvElB,IAAI5b,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrBsZ,EAAa,EAAQ,KACrBrV,EAAUzE,EAAgB,EAAQ,KAIlC+b,EAA2B,WAC3B,SAASA,EAAUC,GACf/b,KAAK2T,WAAY,EACjB3T,KAAK6T,WAAY,EACbkI,IACA/b,KAAK2T,aAAeoI,EAAajY,QAAQU,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,kBACpF5L,KAAK6T,aAAekI,EAAajY,QAAQvD,EAAWqL,kBAQ5D,OALAkQ,EAAU7a,UAAUe,SAAW,WAG3B,MAFU,IAAMhC,KAAK2T,UAAYnP,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,iBAAmBiO,EAAW0B,SACnG,IAAMvb,KAAK6T,UAAYtT,EAAWqL,gBAAkBiO,EAAW0B,UAGnEO,EAdmB,GAgB9Btc,EAAQsB,QAAUgb,G,oBCrDlB,IAAI/b,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrBsZ,EAAa,EAAQ,KACrBrV,EAAUzE,EAAgB,EAAQ,KAIlCqT,EAA0B,WAC1B,SAASA,EAAS6I,GACd,IAAIrU,EACJ5H,KAAK2T,WAAY,EACjB3T,KAAK4T,YAAa,EAClB5T,KAAK6T,WAAY,EACjB7T,KAAK8T,YAAa,EAClB9T,KAAKkc,SAAW,CACZrI,UAAWrP,EAAQ1D,QAAQkb,gBAAgBzb,EAAW6N,kBACtDuF,UAAWnP,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,iBACtDgI,WAAYrT,EAAWqL,gBACvBkI,WAAYvT,EAAW6N,kBAE3BpO,KAAKmc,WAAYvU,EAAK,IACfpD,EAAQ1D,QAAQkb,gBAAgBzb,EAAW6N,mBAAqB,cACnExG,EAAGpD,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,kBAAoB,cAClEhE,EAAGrH,EAAWqL,iBAAmB,eACjChE,EAAGrH,EAAW6N,kBAAoB,eAClCxG,GACAqU,IACAjc,KAAK2T,aAAesI,EAAYnY,QAAQU,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,kBACnF5L,KAAK4T,cAAgBqI,EAAYnY,QAAQU,EAAQ1D,QAAQkb,gBAAgBzb,EAAW6N,mBACpFpO,KAAK6T,aAAeoI,EAAYnY,QAAQvD,EAAWqL,iBACnD5L,KAAK8T,cAAgBmI,EAAYnY,QAAQvD,EAAW6N,mBAmE5D,OAhEAjO,OAAOC,eAAegT,EAASnS,UAAW,WAAY,CAClDgB,IAAK,WACD,OAAOjC,KAAK2T,WAAa3T,KAAK4T,YAAc5T,KAAK6T,WAAa7T,KAAK8T,YAEvE1R,YAAY,EACZC,cAAc,IAElB+Q,EAASnS,UAAUmb,QAAU,SAAUC,EAAKhc,GACxCL,KAAKqc,GAAOhc,GAEhB+S,EAASnS,UAAUqb,aAAe,SAAUC,EAASvZ,GAC5ChD,KAAKuc,KACNvZ,EAAKmQ,UAAUiJ,QAAQG,GAAS,GAChCvc,KAAKoc,QAAQG,GAAS,KAG9BnJ,EAASnS,UAAUuS,aAAe,SAAUxQ,IACpCA,EAAK+P,UAAY/P,EAAK6P,YACtB7S,KAAKsc,aAAa,YAAatZ,GAC/BhD,KAAKsc,aAAa,YAAatZ,GAC/BhD,KAAKsc,aAAa,aAActZ,GAChChD,KAAKsc,aAAa,aAActZ,IAEpC,IAAIsD,EAAQtD,EAAKsD,MACbA,EAAMC,WACFD,EAAMgG,aACNtM,KAAKsc,aAAa,YAAatZ,GAG/BhD,KAAKsc,aAAa,YAAatZ,GAG9BsD,EAAME,cACPF,EAAMgG,aACNtM,KAAKsc,aAAa,aAActZ,GAGhChD,KAAKsc,aAAa,aAActZ,KAI5CoQ,EAASnS,UAAUe,SAAW,WAC1B,IAAIiK,EAAM,IAAMjM,KAAK2T,UAAYnP,EAAQ1D,QAAQkb,gBAAgBzb,EAAWqL,iBAAmBiO,EAAW0B,SAI1G,OAHAtP,GAAO,IAAMjM,KAAK4T,WAAapP,EAAQ1D,QAAQkb,gBAAgBzb,EAAW6N,kBAAoByL,EAAW0B,UACzGtP,GAAO,IAAMjM,KAAK6T,UAAYtT,EAAWqL,gBAAkBiO,EAAW0B,UAC/D,IAAMvb,KAAK8T,WAAavT,EAAW6N,iBAAmByL,EAAW0B,UAG5EnI,EAASnS,UAAUiU,SAAW,WAC1B,IAAIjJ,EAAM,IAAMjM,KAAK2T,UAAY,EAAI,GAIrC,OAHA1H,GAAO,IAAMjM,KAAK4T,WAAa,EAAI,GACnC3H,GAAO,IAAMjM,KAAK6T,UAAY,EAAI,GAClC5H,GAAO,IAAMjM,KAAK8T,WAAa,EAAI,GAC5B0I,SAASvQ,EAAK,IAEzBmH,EAASsB,WAAa,SAAUlK,GAC5B,IAAIiS,GAAK,OAASnY,OAAOkG,GAAGxI,SAAS,IAAIiS,QAAQ,GAC7CV,EAAW,IAAIH,EAKnB,OAJAG,EAASI,UAAqB,MAAT8I,EAAE,GACvBlJ,EAASK,WAAsB,MAAT6I,EAAE,GACxBlJ,EAASM,UAAqB,MAAT4I,EAAE,GACvBlJ,EAASO,WAAsB,MAAT2I,EAAE,GACjBlJ,GAEJH,EA1FkB,GA4F7B5T,EAAQsB,QAAUsS,G,mBCjIlB,IAAI6F,EAAiBjZ,MAAQA,KAAKiZ,eAAkB,SAAUC,EAAI1K,EAAM2K,GACpE,GAAIA,GAA6B,IAArBC,UAAUtS,OAAc,IAAK,IAA4BuS,EAAxBxZ,EAAI,EAAGyZ,EAAI9K,EAAK1H,OAAYjH,EAAIyZ,EAAGzZ,KACxEwZ,GAAQxZ,KAAK2O,IACR6K,IAAIA,EAAK9K,MAAMtN,UAAUsY,MAAMnK,KAAKZ,EAAM,EAAG3O,IAClDwZ,EAAGxZ,GAAK2O,EAAK3O,IAGrB,OAAOqZ,EAAGxK,OAAO2K,GAAM9K,MAAMtN,UAAUsY,MAAMnK,KAAKZ,KAEtDrO,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrBmc,EAAuB,WACvB,SAASA,EAAMxS,EAAMrC,GACjB7H,KAAKkK,KAAOwS,EAAMC,iBAAiBzS,GACnClK,KAAK6H,MAAQA,EAsMjB,OApMA1H,OAAOC,eAAesc,EAAMzb,UAAW,gBAAiB,CACpDgB,IAAK,WACD,OAAOya,EAAM5P,cAAc9M,KAAK6H,QAEpCzF,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,gBAAiB,CACpDgB,IAAK,WACD,OAAIjC,KAAKsM,aACEtM,KAAK4c,mBAET5c,KAAKkK,MAEhB9H,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,qBAAsB,CACzDgB,IAAK,WACD,OAAOya,EAAMV,gBAAgBhc,KAAKkK,OAEtC9H,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,QAAS,CAC5CgB,IAAK,WACD,MAAO,GAAK1B,EAAW2N,YAAYlO,KAAKkK,MAAQ3J,EAAW+N,YAAYtO,KAAK6H,QAEhFzF,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,eAAgB,CACnDgB,IAAK,WACD,OAAO1B,EAAW8N,oBAAoBrO,KAAK6H,OAAS,IAAMtH,EAAW0N,oBAAoBjO,KAAKkK,OAElG9H,YAAY,EACZC,cAAc,IAElBqa,EAAMzb,UAAU4b,aAAe,SAAU3S,GACrC,OAAOlK,KAAKkK,OAASA,GAEzB/J,OAAOC,eAAesc,EAAMzb,UAAW,aAAc,CACjDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAWqL,kBAExCxJ,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,cAAe,CAClDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAW6N,mBAExChM,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,aAAc,CACjDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAW4M,kBAExC/K,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,cAAe,CAClDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAW8M,mBAExCjL,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,gBAAiB,CACpDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAW6M,qBAExChL,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,aAAc,CACjDgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAWyM,kBAExC5K,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,wBAAyB,CAC5DgB,IAAK,WACD,OAAOjC,KAAK6c,aAAatc,EAAW4N,4BAExC/L,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,eAAgB,CACnDgB,IAAK,WACD,OAAOya,EAAMI,aAAa9c,KAAK6H,QAEnCzF,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAMzb,UAAW,eAAgB,CACnDgB,IAAK,WACD,OAAOya,EAAMjX,aAAazF,KAAK6H,QAEnCzF,YAAY,EACZC,cAAc,IAElBqa,EAAM1S,aAAe,SAAUF,GAC3B,IAAK4S,EAAM3S,aAAaD,GACpB,OAAO,KAEX,IAAIjC,EAAQ6U,EAAMK,gBAAgBjT,GAAYvJ,EAAW2G,kBAAoB3G,EAAW6G,kBACpF8C,EAAOwS,EAAMC,iBAAiB7S,GAClC,OAAO,IAAI4S,EAAMxS,EAAMrC,IAE3B1H,OAAOC,eAAesc,EAAMzb,UAAW,cAAe,CAClDgB,IAAK,WACD,OAAIjC,KAAKgd,sBACE,IAAIN,EAAMnc,EAAWyM,gBAAiBhN,KAAK6H,OAE/C7H,MAEXoC,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAO,aAAc,CACvCza,IAAK,WACD,MAAO,CACH1B,EAAW4M,gBACX5M,EAAW8M,iBACX9M,EAAW6M,mBACX7M,EAAWqL,gBACXrL,EAAW6N,iBACX7N,EAAWyM,gBACXzM,EAAW4N,4BAGnB/L,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAesc,EAAO,aAAc,CACvCza,IAAK,WACD,MAAO,CACH1B,EAAW2G,kBACX3G,EAAW6G,oBAGnBhF,YAAY,EACZC,cAAc,IAElBqa,EAAMV,gBAAkB,SAAUlS,GAC9B,OAAOA,EAASmT,eAEpBP,EAAMK,gBAAkB,SAAUjT,GAC9B,OAAOA,IAAaA,EAASmT,eAEjCP,EAAMQ,gBAAkB,SAAUpT,GAC9B,OAAOA,EAASqT,eAEpBT,EAAMC,iBAAmB,SAAU7S,GAC/B,OAAO4S,EAAMQ,gBAAgBpT,IAEjC4S,EAAM3S,aAAe,SAAUD,GAC3B,OAAOA,IAAavJ,EAAWoJ,aAEnC+S,EAAMjX,aAAe,SAAUoC,GAC3B,OAAOA,IAAUtH,EAAW2G,mBAEhCwV,EAAMI,aAAe,SAAUjV,GAC3B,OAAOA,IAAUtH,EAAW6G,mBAEhCsV,EAAM5P,cAAgB,SAAUjF,GAC5B,OAAO6U,EAAMjX,aAAaoC,GAAStH,EAAW6G,kBAAoB7G,EAAW2G,mBAEjFwV,EAAMvC,oBAAsB,SAAUlO,EAAKmR,GACvC,IAAIC,EAAQD,EAAYE,EAAgBzX,QAAO,SAAUlC,GACrD,QAAS,CAACpD,EAAWoJ,YAAapJ,EAAWwN,iBAAiBjK,QAAQH,MACrE2Z,EACL,OAAQrR,EAAIxI,MAAM,IAAI8Z,MAAK,SAAU5Z,GACjC,QAAS0Z,EAAMvZ,QAAQH,OAG/B+Y,EAAMzb,UAAUiS,QAAU,WACtB,QAAIlT,KAAK4K,aACL5K,KAAKkK,KAAO3J,EAAW4N,2BAChB,IAIfuO,EAAMzb,UAAUuc,UAAY,WACxB,QAAIxd,KAAKgd,wBACLhd,KAAKkK,KAAO3J,EAAWyM,iBAChB,IAIf0P,EAAMzb,UAAUwc,MAAQ,WACpB,OAAOf,EAAM1S,aAAahK,KAAK6L,gBAE5B6Q,EAzMe,GA2M1Bld,EAAQsB,QAAU4b,EAClB,IAAIY,EAAkBrE,EAAcA,EAAcA,EAAc,GAAIyD,EAAMgB,YAAY,GAAOhB,EAAMgB,WAAWha,KAAI,SAAUia,GACxH,OAAOjB,EAAMV,gBAAgB2B,OAC7B,GAAO,CACPpd,EAAWoJ,YACXpJ,EAAWwN,kBACZ,I,cCvPH5N,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrB8L,EAA4B,WAC5B,SAASA,EAAW5K,EAAO6E,GACvBtG,KAAKyG,cAAgB,GACrBzG,KAAKyB,MAAQA,EACbzB,KAAKsG,MAAQA,EAcjB,OAZA+F,EAAWpL,UAAU2c,OAAS,WAC1B,OAAmB,OAAf5d,KAAKsG,MACE,KAEJ,GAAKtG,KAAKsG,MAAMuF,cAAgB7L,KAAKyB,MAAMqT,WAEtDzI,EAAWpL,UAAU2Z,gBAAkB,WACnC,OAAmB,OAAf5a,KAAKsG,MACE/F,EAAWoJ,YAEf3J,KAAKsG,MAAMuF,eAEfQ,EAlBoB,GAoB/B7M,EAAQsB,QAAUuL,G,aCjDlBlM,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAIE,EAAa,EAAQ,KACrBsd,EAAuB,WACvB,SAASA,EAAM1V,EAAGC,GACdpI,KAAKmI,EAAIA,EACTnI,KAAKoI,EAAIA,EAkFb,OAhFAjI,OAAOC,eAAeyd,EAAM5c,UAAW,QAAS,CAC5CgB,IAAK,WACD,OAAO4b,EAAMzS,UAAUpL,KAAKmI,EAAGnI,KAAKoI,IAExChG,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,iBAAkB,CACrDgB,IAAK,WACD,OAAOjC,KAAKmI,GAEhB/F,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,YAAa,CAChDgB,IAAK,WACD,MAAO,GAAKjC,KAAKoE,EAAIpE,KAAKqE,GAE9BjC,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,QAAS,CAC5CgB,IAAK,WACD,MAAO,GAAK1B,EAAWsN,wBAAwB7N,KAAKmI,GAAK5H,EAAWqD,sBAAsB5D,KAAKoI,IAEnGhG,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,eAAgB,CACnDgB,IAAK,WACD,OAAOjC,KAAK8U,WAEhB1S,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,IAAK,CACxCgB,IAAK,WACD,OAAO1B,EAAWgE,wBAAwBvE,KAAKmI,IAEnD/F,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeyd,EAAM5c,UAAW,IAAK,CACxCgB,IAAK,WACD,OAAOjC,KAAKoI,EAAI,GAEpBhG,YAAY,EACZC,cAAc,IAElBwb,EAAMzS,UAAY,SAAUjD,EAAGC,GAC3B,OAAOA,EAAI7H,EAAW6L,WAAajE,GAEvC0V,EAAMC,cAAgB,SAAUhJ,GAG5B,MAAO,CAAE3M,EAFD5H,EAAWgE,wBAAwBT,QAAQgR,EAAU,IAE9C1M,EADP9D,OAAOwQ,EAAU,IAAM,IAGnC+I,EAAME,iBAAmB,SAAUjJ,GAC/B,IAAIlN,EAAKiW,EAAMC,cAAchJ,GAAY3M,EAAIP,EAAGO,EAAGC,EAAIR,EAAGQ,EAC1D,OAAOyV,EAAMzS,UAAUjD,EAAGC,IAE9ByV,EAAM7J,cAAgB,SAAUc,GAC5B,IAAIlN,EAAKiW,EAAMC,cAAchJ,GAC7B,OAAO,IAAI+I,EADkCjW,EAAGO,EAAOP,EAAGQ,IAG9DyV,EAAMG,UAAY,SAAU/V,GAGxB,MAAO,CAAEE,EAFDF,EAAQ1H,EAAW6L,WAEZhE,EADP6C,KAAKgT,MAAMhW,EAAQ1H,EAAW6L,cAG1CyR,EAAMtU,UAAY,SAAUtB,GACxB,IAAIL,EAAKiW,EAAMG,UAAU/V,GACzB,OAAO,IAAI4V,EAD0BjW,EAAGO,EAAOP,EAAGQ,IAGtDyV,EAAMtJ,wBAA0B,SAAUtM,GACtC,OAAO,IAAI4V,EAAM5V,EAAO,IAE5B4V,EAAMpU,eAAiB,SAAUxB,GAC7B,OAAOA,GAAS,GAAKA,GAAS1H,EAAWmJ,WAAa,GAEnDmU,EArFe,GAuF1Bre,EAAQsB,QAAU+c,G,oBCpHlB,IAAI9d,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IA4BtD,IAAI6d,EAAUne,EAAgB,EAAQ,MAClCoe,EAAape,EAAgB,EAAQ,MACrCqe,EAAcre,EAAgB,EAAQ,MACtCse,EAAYte,EAAgB,EAAQ,KACpCue,EAAcve,EAAgB,EAAQ,MACtCQ,EAAa,EAAQ,KACrBge,EAAS,EAAQ,KACjBvO,EAASjQ,EAAgB,EAAQ,MACjC6I,EAAU7I,EAAgB,EAAQ,KAClCyE,EAAUzE,EAAgB,EAAQ,KAClCye,EAAK,EAAQ,KACbhP,EAAezP,EAAgB,EAAQ,MACvC8Z,EAAa,EAAQ,KACrB4E,EAAqB,WACrB,SAASA,EAAIC,GACT1e,KAAK2e,WAAa,IAAInP,EAAa1O,QACnC,IAAIiZ,EAAW2E,EAAS3E,SAAU6E,EAAUF,EAASE,QAAS3C,EAAcyC,EAASzC,YAAaF,EAAe2C,EAAS3C,aAAcT,EAAaoD,EAASpD,WAAYM,EAAe8C,EAAS9C,aAElM5b,KAAKkC,MAAQ,IAAIgc,EAAQpd,QAAQiZ,GACjC/Z,KAAK8C,KAAO8b,GAAW/E,EAAW3S,kBAClClH,KAAKuT,SAAW,IAAI4K,EAAWrd,QAAQmb,GACvCjc,KAAK6e,UAAY,IAAIT,EAAYtd,QAAQib,GACzC/b,KAAKwb,QAAU6C,EAAUvd,QAAQC,WAAWua,GAC5Ctb,KAAKuC,UAAY,IAAI+b,EAAYxd,QAAQ8a,GACzC,IAAIkD,EAAsB9e,KAAK+e,sBAC/B,GAAID,EAAqB,CACrB,IAAIE,EAAM,8BAAgCjF,EAE1C,MAAM,IAAItI,MADVuN,GAAO,eAAiBpD,EAAe,WAAakD,GAGxD9e,KAAK2e,WAAa,IAAInP,EAAa1O,QA4OvC,OA1OA2d,EAAIxd,UAAU8d,oBAAsB,WAChC,IAOIE,EAPSjf,KAAKkC,MAAMgE,aAAaxC,KAAI,SAAUwb,GAC/C,OAAOA,EAAI5Y,SACZT,QAAO,SAAU6E,GAChB,OAAa,OAANA,KACRgE,OAAO1O,KAAKuC,UAAUD,QAAQoB,KAAI,SAAUgH,GAC3C,OAAOA,EAAEyU,eAEY1F,QAAO,SAAU2F,EAAK1U,GAG3C,OAFA0U,EAAI1U,EAAEmB,eAAiBuT,EAAI1U,EAAEmB,gBAAkB,EAC/CuT,EAAI1U,EAAEmB,iBACCuT,IACR,IACCnT,EAAM9L,OAAOkf,KAAKJ,GAAavb,KAAI,SAAUqL,GAC7C,MAAO,GAAKA,EAAIkQ,EAAYlQ,MAC7BuQ,OAAOvb,KAAK,IACf,OAAIkI,IAAQ1L,EAAWgf,cAGhBtT,GAEXwS,EAAIxd,UAAUyQ,QAAU,SAAU1O,GAC9B,IAAInC,EAAM4d,EAAI1d,WAAWf,KAAKgC,YAE9B,OADAnB,EAAI2e,SAASxc,GACNnC,GAEXV,OAAOC,eAAeqe,EAAIxd,UAAW,gBAAiB,CAClDgB,IAAK,WACD,OAAQjC,KAAKwb,QAAQiE,eAEzBrd,YAAY,EACZC,cAAc,IAElBoc,EAAIxd,UAAU+B,KAAO,SAAUC,EAAeC,GAC1C,IAAKlD,KAAKiR,cACN,OAAO,KAEX,IAAI3K,EAAQtG,KAAKkC,MAAM4Y,gBAAgB7X,GACvC,IAAKqD,EACD,OAAO,KAEXtG,KAAKkC,MAAM6Y,gBAAgB9X,EAAe,MAC1C,IAAID,EAAO,IAAIgN,EAAOlP,QAAQ,CAC1B4R,SAAU9J,EAAQ9H,QAAQyI,UAAUtG,GACpC0P,OAAQ/J,EAAQ9H,QAAQyI,UAAUrG,GAClCoD,MAAOA,EAAMmX,UAEbza,EAAK4P,aACLtM,EAAM4M,UAEV,IAAIwM,EAAc1f,KAAKkC,MAAM4Y,gBAAgB5X,GAY7C,OAXIwc,IACA1f,KAAKuC,UAAUD,OAAO+H,KAAKqV,GAC3B1c,EAAK6P,SAAW,IAAI0L,EAAO/H,SAAS,CAChC1G,eAAgBlH,EAAQ9H,QAAQyI,UAAUrG,GAC1C6M,iBAAkBnH,EAAQ9H,QAAQyI,UAAUvJ,KAAKuC,UAAUod,WAC3DrZ,MAAOoZ,KAGf1f,KAAKkC,MAAM6Y,gBAAgB7X,EAAaoD,GACxCtG,KAAK8C,KAAO0B,EAAQ1D,QAAQgM,cAAcxG,EAAMuB,OAChD7E,EAAKqQ,OAAOrT,MACLgD,GAEXyb,EAAIxd,UAAUue,SAAW,SAAUxc,GAC/B,IAAI4c,EAAe5c,EAAK2P,OAAO1K,MAC3B4X,EAAiB7c,EAAK0P,SAASzK,MAC/B3B,EAAQtG,KAAKkC,MAAM4Y,gBAAgB8E,GAEvC,GADA5f,KAAKkC,MAAM6Y,gBAAgB6E,EAAc,OACpCtZ,EACD,OAAO,EAGX,GADAtG,KAAKkC,MAAM6Y,gBAAgB8E,EAAgBvZ,GACvCtD,EAAK6P,SAAU,CACf,IAAIiN,EAAiB9c,EAAK6P,SAAS9C,iBAAiB9H,MAChDqM,EAAgBtU,KAAKuC,UAAUN,IAAI6d,GACvC9f,KAAKkC,MAAM6Y,gBAAgB6E,EAActL,GACzCtU,KAAKuC,UAAUsZ,cAAciE,GAkBjC,OAhBI9c,EAAKmQ,UAAUQ,YACf3T,KAAKuT,SAASI,WAAY,GAE1B3Q,EAAKmQ,UAAUS,aACf5T,KAAKuT,SAASK,YAAa,GAE3B5Q,EAAKmQ,UAAUU,YACf7T,KAAKuT,SAASM,WAAY,GAE1B7Q,EAAKmQ,UAAUW,aACf9T,KAAKuT,SAASO,YAAa,GAE3B9T,KAAKwb,SACLxb,KAAKwb,QAAQJ,QAEjBpb,KAAK8C,KAAOwD,EAAMuB,OACX,GAEX4W,EAAI1d,WAAa,SAAUH,GAClBA,IACDA,EAASL,EAAWyZ,mBAExB,IAAI+F,EAASnf,EAAO6C,MAAM,KAC1B,OAAO,IAAIgb,EAAI,CACX1E,SAAUgG,EAAO,GACjBnB,QAASmB,EAAO,GAChB9D,YAAa8D,EAAO,GACpBhE,aAAcgE,EAAO,GACrBzE,WAAYyE,EAAO,GACnBnE,aAAcmE,EAAO,MAG7BtB,EAAIxd,UAAUe,SAAW,WACrB,IAAIiK,EAAMjM,KAAKkC,MAAMF,WAMrB,OALAiK,GAAO,IAAMjM,KAAK8C,KAAKd,WACvBiK,GAAO,IAAMjM,KAAKuT,SAASvR,WAC3BiK,GAAO,IAAMjM,KAAK6e,UAAU7c,YAC5BiK,GAAO,IAAMjM,KAAKwb,QAAQxZ,YACnB,IAAMhC,KAAKuC,UAAUP,YAGhC7B,OAAOC,eAAeqe,EAAIxd,UAAW,eAAgB,CACjDgB,IAAK,WAGD,OAFmBuC,EAAQ1D,QAAQ2E,aAAazF,KAAK8C,OAAS9C,KAAKuT,SAASK,YACxEpP,EAAQ1D,QAAQgc,aAAa9c,KAAK8C,OAAS9C,KAAKuT,SAASO,YAGjE1R,YAAY,EACZC,cAAc,IAElBlC,OAAOC,eAAeqe,EAAIxd,UAAW,cAAe,CAChDgB,IAAK,WAGD,OAFkBuC,EAAQ1D,QAAQ2E,aAAazF,KAAK8C,OAAS9C,KAAKuT,SAASI,WACvEnP,EAAQ1D,QAAQgc,aAAa9c,KAAK8C,OAAS9C,KAAKuT,SAASM,WAGjEzR,YAAY,EACZC,cAAc,IAElBoc,EAAIxd,UAAUM,eAAiB,WAS3B,OARevB,KAAK2e,WAAWnX,YAAY,CACvC7C,aAAc3E,KAAKkC,MAAM2Y,yBACzBjW,YAAa5E,KAAK8C,KAClB+B,aAAc7E,KAAK6E,aACnBC,YAAa9E,KAAK8E,YAClBC,YAAY,EACZC,sBAAsB,IAEV1B,OAEpBmb,EAAIxd,UAAU+G,WAAa,SAAU1B,GACjC,IAAI0B,GAAa,EAOjB,OANKhI,KAAKuT,SAASM,WAAavN,EAAMkH,cAAgBlH,EAAMC,YACvDvG,KAAKuT,SAASI,WAAarN,EAAMgG,cAAgBhG,EAAMC,YACvDvG,KAAKuT,SAASO,YAAcxN,EAAMkH,cAAgBlH,EAAME,aACxDxG,KAAKuT,SAASK,YAActN,EAAMgG,cAAgBhG,EAAME,eACzDwB,GAAa,GAEVA,GAEXyW,EAAIxd,UAAUO,wBAA0B,SAAUC,GAC9C,IAAI6E,EAAQtG,KAAKkC,MAAM4Y,gBAAgBrZ,EAAMwG,OAC7C,OAAc,OAAV3B,EACO,GAEJtG,KAAK2e,WAAWjY,6BAA6BjF,EAAO6E,EAAOtG,KAAKkC,MAAM2Y,yBAA0B7a,KAAKgI,WAAW1B,KAE3HmY,EAAIxd,UAAUqS,iBAAmB,SAAUtQ,EAAM8E,GAC7C,IAAIlC,EAAQ5F,KACR2E,EAAe3E,KAAKkC,MAAM2Y,yBAE1BmF,EAAQhgB,KAAK2e,WAAWjX,UAAU,CAClC/C,aAAcA,EACdC,YAAa5E,KAAK8C,KAClB+B,aAAc7E,KAAK6E,aACnBC,YAAa9E,KAAK8E,YAClBC,YAAY,EACZC,sBAAsB,IAEtBib,EAAeD,EAAM3a,mBAAqB2a,EAAM7a,kBACpD,GAAI8a,EAAc,CACd,IAAI7Z,EAAa6Z,EAAavc,KAAI,SAAUjC,GACxC,OAAO,IAAI+c,EAAGnS,WAAW5K,EAAOmE,EAAM1D,MAAM4Y,gBAAgBrZ,EAAMwG,WACnEpC,QAAO,SAAUO,GAChB,OAA4B,OAArBA,EAAWE,QAAmBF,EAAWE,MAAMC,cACvD,GACHvD,EAAK8P,YAAYC,SAAW3M,EAEhCpD,EAAK8P,YAAYvN,SAAWya,EAAMza,SAClCvC,EAAK8P,YAAYtN,WAAawa,EAAMxa,YAExCiZ,EAAIxd,UAAUwS,iBAAmB,SAAUzQ,EAAM8E,GAC7C,GAAI9E,EAAKiO,cAAe,CACpB,IAAItM,EAAe3E,KAAKkC,MAAM2Y,yBAC9B,GAAI7a,KAAKwb,QAAQN,WACblY,EAAKiQ,iBAAkB,EACvBjT,KAAKwb,QAAQH,QAAQrY,EAAKsD,MAAMuB,OAC5B7H,KAAKwb,QAAQiE,gBACbzc,EAAK8P,YAAYE,eAAiBhT,KAAKwb,QAAQ3T,WAGlD,CACD,IAAIA,EAAQrD,EAAQ1D,QAAQgM,cAAc9J,EAAKsD,MAAMuB,OACjDqY,EAAalgB,KAAK2e,WAAWhX,SAAS,CACtCE,MAAOrD,EAAQ1D,QAAQgM,cAAc9J,EAAKsD,MAAMuB,OAChDlD,aAAcA,EACdmD,QAASA,IAEToY,IACAlgB,KAAKwb,QAAQzY,IAAI8E,EAAOqY,EAAWjX,iBAAkBiX,EAAWlX,gBAChEhG,EAAKiQ,iBAAkB,IAInCjQ,EAAK0Q,QAAQ1T,OAEjBye,EAAIxd,UAAUkf,YAAc,WASxB,OARYngB,KAAK2e,WAAWjX,UAAU,CAClC/C,aAAc3E,KAAKkC,MAAM2Y,yBACzBjW,YAAa5E,KAAK8C,KAClB+B,aAAc7E,KAAK6E,aACnBC,YAAa9E,KAAK8E,YAClBC,YAAY,EACZC,sBAAsB,IAEbO,UAEjBkZ,EAAIxd,UAAUmQ,aAAe,SAAUpO,GACnC,GAAIA,EAAM,CACN,IAAIwY,EAAUxb,KAAKwb,QACfA,EAAQN,YAAclb,KAAK8C,OAAS0Y,EAAQ3T,QAAU7E,EAAKiQ,kBAC3DuI,EAAQP,cAAe,KAI5BwD,EA7Pa,GA+PxBjf,EAAQsB,QAAU2d,G,YC3SlBte,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQ4gB,kBAAoB5gB,EAAQ6gB,wBAA0B7gB,EAAQ8gB,uBAAyB9gB,EAAQ+gB,0BAA4B/gB,EAAQghB,gBAAkBhhB,EAAQihB,eAAiBjhB,EAAQkhB,kBAAoBlhB,EAAQmV,0BAA4BnV,EAAQ2V,mBAAqB3V,EAAQiV,gBAAkBjV,EAAQ2U,gBAAkB3U,EAAQ+b,QAAU/b,EAAQwa,kBAAoBxa,EAAQ+f,kBAAe,EA6B5Y/f,EAAQ+f,aAAe,2BAEvB/f,EAAQwa,kBAAoB,8CAC5Bxa,EAAQ+b,QAAU,IAClB/b,EAAQ2U,gBAAkB,IAC1B3U,EAAQiV,gBAAkB,IAC1BjV,EAAQ2V,mBAAqB,IAC7B3V,EAAQmV,0BAA4B,IACpCnV,EAAQkhB,kBAAoB,SAC5BlhB,EAAQihB,eAAiB,MACzBjhB,EAAQghB,gBAAkB,OAC1BhhB,EAAQ+gB,0BAA4B,iBACpC/gB,EAAQ8gB,uBAAyB,cACjC9gB,EAAQ6gB,wBAA0B,eAClC7gB,EAAQ4gB,kBAAoB,U,oBC5C5B,IAAIzR,EAAmB3O,MAAQA,KAAK2O,kBAAqBxO,OAAOyO,OAAS,SAAUC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3B5O,OAAOC,eAAeyO,EAAGG,EAAI,CAAE5M,YAAY,EAAMH,IAAK,WAAa,OAAO6M,EAAEC,OAC3E,SAAUF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVG,EAAgBlP,MAAQA,KAAKkP,cAAiB,SAASJ,EAAGtP,GAC1D,IAAK,IAAIkL,KAAKoE,EAAa,YAANpE,GAAoBvK,OAAOc,UAAUkO,eAAeC,KAAK5P,EAASkL,IAAIiE,EAAgBnP,EAASsP,EAAGpE,IAEvH3K,EAAmBC,MAAQA,KAAKD,iBAAoB,SAAUE,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDE,OAAOC,eAAeZ,EAAS,aAAc,CAAEa,OAAO,IACtDb,EAAQqe,MAAQre,EAAQif,IAAMjf,EAAQ6M,WAAa7M,EAAQkd,MAAQld,EAAQ4T,SAAW5T,EAAQsc,UAAYtc,EAAQmc,UAAYnc,EAAQwb,QAAUxb,EAAQsa,WAAQ,EA4BhK,IAAIoE,EAAU,EAAQ,KACtB/d,OAAOC,eAAeZ,EAAS,QAAS,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBme,GAASpd,WAC/G,IAAIud,EAAY,EAAQ,IACxBle,OAAOC,eAAeZ,EAAS,UAAW,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBse,GAAWvd,WACnH,IAAIwd,EAAc,EAAQ,KAC1Bne,OAAOC,eAAeZ,EAAS,YAAa,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBue,GAAaxd,WACvH,IAAIsd,EAAc,EAAQ,KAC1Bje,OAAOC,eAAeZ,EAAS,YAAa,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBqe,GAAatd,WACvH,IAAIqd,EAAa,EAAQ,KACzBhe,OAAOC,eAAeZ,EAAS,WAAY,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBoe,GAAYrd,WACrH,IAAI0D,EAAU,EAAQ,IACtBrE,OAAOC,eAAeZ,EAAS,QAAS,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgByE,GAAS1D,WAC/G,IAAI8Y,EAAe,EAAQ,KAC3BzZ,OAAOC,eAAeZ,EAAS,aAAc,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB6Z,GAAc9Y,WACzH,IAAIJ,EAAQ,EAAQ,KACpBP,OAAOC,eAAeZ,EAAS,MAAO,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgBW,GAAOI,WAC3G,IAAI8H,EAAU,EAAQ,IACtBzI,OAAOC,eAAeZ,EAAS,QAAS,CAAE4C,YAAY,EAAMH,IAAK,WAAc,OAAOlC,EAAgB6I,GAAS9H,WAC/GoO,EAAa,EAAQ,KAAe1P,I,+xCC5DhCmhB,EAA2B,G,OAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB5R,IAAjB6R,EACH,OAAOA,EAAathB,QAGrB,IAAIC,EAASkhB,EAAyBE,GAAY,CAGjDrhB,QAAS,IAOV,OAHAuhB,EAAoBF,GAAUzR,KAAK3P,EAAOD,QAASC,EAAQA,EAAOD,QAASohB,GAGpEnhB,EAAOD,QClBWohB,CAAoB,M","sources":["webpack://khmer-chess/webpack/universalModuleDefinition","webpack://khmer-chess/./src/KhmerChess.js","webpack://khmer-chess/./src/brain/HVPont.js","webpack://khmer-chess/./src/brain/MoveHelper.js","webpack://khmer-chess/./src/brain/Rectangle.js","webpack://khmer-chess/./src/brain/boardHelper.js","webpack://khmer-chess/./src/brain/constant.js","webpack://khmer-chess/./src/brain/genMask.js","webpack://khmer-chess/./src/brain/index.js","webpack://khmer-chess/./src/index.js","webpack://khmer-chess/./src/index.umd.js","webpack://khmer-chess/./src/kpgn/Captured.js","webpack://khmer-chess/./src/kpgn/KPGN.js","webpack://khmer-chess/./src/kpgn/Move.js","webpack://khmer-chess/./src/kpgn/Player.js","webpack://khmer-chess/./src/kpgn/Result.js","webpack://khmer-chess/./src/kpgn/Timer.js","webpack://khmer-chess/./src/kpgn/index.js","webpack://khmer-chess/./src/other/EventHandler.js","webpack://khmer-chess/./src/other/base64Helper.js","webpack://khmer-chess/./src/other/index.js","webpack://khmer-chess/./src/other/table.js","webpack://khmer-chess/./src/ren/Board.js","webpack://khmer-chess/./src/ren/CountUp.js","webpack://khmer-chess/./src/ren/Graveyard.js","webpack://khmer-chess/./src/ren/KAttacked.js","webpack://khmer-chess/./src/ren/KqJumped.js","webpack://khmer-chess/./src/ren/Piece.js","webpack://khmer-chess/./src/ren/PieceIndex.js","webpack://khmer-chess/./src/ren/Point.js","webpack://khmer-chess/./src/ren/REN.js","webpack://khmer-chess/./src/ren/constant.js","webpack://khmer-chess/./src/ren/index.js","webpack://khmer-chess/webpack/bootstrap","webpack://khmer-chess/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar package_json_1 = __importDefault(require(\"../package.json\"));\nvar constant_1 = require(\"./brain/constant\");\nvar KPGN_1 = __importDefault(require(\"./kpgn/KPGN\"));\nvar table_1 = __importDefault(require(\"./other/table\"));\nvar REN_1 = __importDefault(require(\"./ren/REN\"));\nvar KhmerChess = /** @class */ (function () {\n    function KhmerChess(renStr) {\n        var ren = REN_1.default.fromString(renStr);\n        this.kpgn = new KPGN_1.default(ren);\n    }\n    KhmerChess.prototype.loadKpng = function (option) {\n        this.kpgn.fromJson(option);\n    };\n    KhmerChess.prototype.resetBoard = function () {\n        this.kpgn.ren = REN_1.default.fromString();\n    };\n    KhmerChess.prototype.getCanMoves = function () {\n        var pieceIndices = this.kpgn.ren.genAllCanMoves();\n        return pieceIndices;\n    };\n    KhmerChess.prototype.getCanMovePointsByPoint = function (point) {\n        var canMovePoints = this.kpgn.ren.getCanMovePointsByPoint(point);\n        return canMovePoints;\n    };\n    KhmerChess.prototype.validateRENStr = function (renStr) {\n        try {\n            REN_1.default.fromString(renStr);\n            return { valid: true, error_number: 0, error: 'No errors.' };\n        }\n        catch (error) {\n            return {\n                valid: false,\n                error_number: 1,\n                error: error.message,\n            };\n        }\n    };\n    KhmerChess.prototype.getRENStr = function () {\n        return this.kpgn.ren.toString();\n    };\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoardMultiArray\", {\n        get: function () {\n            return this.kpgn.ren.board.piecesMultiArray;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInBoard\", {\n        get: function () {\n            return this.kpgn.ren.board.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KhmerChess.prototype, \"piecesInGraveyard\", {\n        get: function () {\n            return this.kpgn.ren.graveyard.pieces;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    // Khmer Portable Game Notation <file-name>.kpgn.json\n    KhmerChess.prototype.getKPGN = function () {\n        return this.kpgn.toJson();\n    };\n    KhmerChess.prototype.loadKpgn = function (kpgnJosn, options) {\n        this.kpgn = new KPGN_1.default(this.kpgn.ren);\n    };\n    KhmerChess.prototype.drawAscii = function () {\n        return (0, table_1.default)(this.kpgn.ren);\n    };\n    Object.defineProperty(KhmerChess.prototype, \"turn\", {\n        get: function () {\n            return this.kpgn.ren.turn;\n        },\n        set: function (turn) {\n            this.kpgn.ren.turn = turn;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KhmerChess.prototype.move = function (moveFromIndex, moveToIndex) {\n        var move = this.kpgn.ren.move(moveFromIndex, moveToIndex);\n        this.kpgn.addMove(move);\n        return move;\n    };\n    /**\n     * Move all pieces to graveyard except kings\n     * -> 4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB\n     */\n    KhmerChess.prototype.clearBoard = function () {\n        this.kpgn.ren = REN_1.default.fromString('4k3/8/8/8/8/8/8/3K4 w ---- -- -.- bhgqghbffffffffFFFFFFFFBHGQGHB');\n    };\n    KhmerChess.prototype.getHistories = function () {\n        return this.kpgn.moves;\n    };\n    KhmerChess.toKhmerNum = function (englishNum) {\n        var str = \"\" + englishNum;\n        var result = str.split('').map(function (c) {\n            return constant_1.VERTICAL_NOTE_LETTERS[constant_1.VERTICAL_NOTE_LETTERS_ENGLISH.indexOf(c)];\n        }).join('');\n        return result;\n    };\n    KhmerChess.title = package_json_1.default.name;\n    KhmerChess.version = package_json_1.default.version;\n    return KhmerChess;\n}());\nexports.default = KhmerChess;\n//# sourceMappingURL=KhmerChess.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nvar HVPont = /** @class */ (function () {\n    function HVPont(h, v) {\n        if (!v) {\n            h = h[0];\n            v = h[1];\n        }\n        this.h = h;\n        this.v = Number(v);\n    }\n    Object.defineProperty(HVPont.prototype, \"x\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS.indexOf(this.h);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"y\", {\n        get: function () {\n            return this.v - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HVPont.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return HVPont;\n}());\nexports.default = HVPont;\n//# sourceMappingURL=HVPont.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar boardHelper_1 = __importDefault(require(\"./boardHelper\"));\nvar constant_1 = require(\"./constant\");\nvar MoveHelper = /** @class */ (function () {\n    function MoveHelper() {\n        this.piecesString = '';\n        this.currentTurn = '';\n        this.isQueenMoved = false;\n        this.isKingMoved = false;\n        this.genCanMove = false;\n        this.genCanMoveForAnother = false;\n        this.whiteMoves = [];\n        this.blackMoves = [];\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n        this.winColor = null;\n        this.stuckColor = null;\n    }\n    Object.defineProperty(MoveHelper.prototype, \"isWhiteTurn\", {\n        get: function () {\n            return Piece_1.default.isWhiteColor(this.currentTurn);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MoveHelper.prototype.init = function (option) {\n        this.piecesString = option.piecesString;\n        this.currentTurn = option.currentTurn;\n        this.isQueenMoved = option.isQueenMoved;\n        this.isKingMoved = option.isKingMoved;\n        this.genCanMove = option.genCanMove;\n        this.genCanMoveForAnother = option.genCanMoveForAnother;\n        this.whiteMoves = [];\n        this.blackMoves = [];\n        this.whiteKingInDanger = null;\n        this.whiteKingWillInDanger = null;\n        this.blackKingInDanger = null;\n        this.blackKingWillInDanger = null;\n        this.winColor = null;\n        this.stuckColor = null;\n    };\n    MoveHelper.prototype.generateCanMoves = function () {\n        var _this = this;\n        var filter = boardHelper_1.default.filterPieceInBoard(this.piecesString);\n        this.whiteMoves = filter.whitePieces;\n        this.blackMoves = filter.blackPieces;\n        var genMoves = function (pieceIndices) {\n            pieceIndices.forEach(function (pieceIndex) {\n                var isHaveMoved = _this.isKingMoved;\n                if (pieceIndex.piece !== null) {\n                    if (pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing) {\n                        isHaveMoved = pieceIndex.piece.isTypeQueen ? _this.isQueenMoved : false;\n                    }\n                    var canMovePoints = _this.genCanMovePointsByPiecePoint(pieceIndex.point, pieceIndex.piece, _this.piecesString, isHaveMoved);\n                    pieceIndex.canMovePoints = canMovePoints;\n                }\n            });\n        };\n        genMoves(this.whiteMoves);\n        genMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.cleanPieceNoMove = function () {\n        var cleanMoves = function (pieces) {\n            var isTrue = true;\n            while (isTrue) {\n                isTrue = false;\n                for (var i = 0; i < pieces.length; i++) {\n                    var piece = pieces[i];\n                    if (!piece.canMovePoints.length) {\n                        pieces.splice(i, 1);\n                        isTrue = true;\n                        break;\n                    }\n                }\n            }\n        };\n        cleanMoves(this.whiteMoves);\n        cleanMoves(this.blackMoves);\n    };\n    MoveHelper.prototype.checkIfKingInDanger = function () {\n        this.whiteKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.whiteKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_WHITE, this.piecesString);\n        this.blackKingInDanger = boardHelper_1.default.getKingInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n        this.blackKingWillInDanger = boardHelper_1.default.getKingWillInDanger(constant_1.PIECE_COLOR_BLACK, this.piecesString);\n    };\n    MoveHelper.prototype.genWinLost = function () {\n        if (this.whiteKingInDanger && !this.whiteMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_BLACK;\n        }\n        else if (this.blackKingInDanger && !this.blackMoves.length) {\n            this.winColor = constant_1.PIECE_COLOR_WHITE;\n        }\n    };\n    MoveHelper.prototype.getStuck = function () {\n        if (this.winColor) {\n            return;\n        }\n        if (this.isWhiteTurn && !this.whiteMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_WHITE;\n        }\n        else if (!this.isWhiteTurn && !this.blackMoves.length) {\n            this.stuckColor = constant_1.PIECE_COLOR_BLACK;\n        }\n    };\n    MoveHelper.prototype.calcCanMove = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        var moves = [];\n        if (this.genCanMove) {\n            moves = this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        var anotherMoves = [];\n        if (this.genCanMoveForAnother) {\n            anotherMoves = !this.isWhiteTurn ? this.whiteMoves : this.blackMoves;\n        }\n        return {\n            moves: moves,\n            anotherMoves: anotherMoves,\n        };\n    };\n    MoveHelper.prototype.calcState = function (option) {\n        this.init(option);\n        this.generateCanMoves();\n        this.cleanPieceNoMove();\n        this.checkIfKingInDanger();\n        this.genWinLost();\n        this.getStuck();\n        return {\n            blackKingInDanger: this.blackKingInDanger,\n            whiteKingInDanger: this.whiteKingInDanger,\n            blackKingWillInDanger: this.blackKingWillInDanger,\n            whiteKingWillInDanger: this.whiteKingWillInDanger,\n            winColor: this.winColor,\n            stuckColor: this.stuckColor,\n        };\n    };\n    MoveHelper.prototype.calCount = function (_a) {\n        var color = _a.color, piecesString = _a.piecesString, force = _a.force;\n        return boardHelper_1.default.checkCount(color, piecesString, force);\n    };\n    MoveHelper.prototype.genCanMovePointsByPiecePoint = function (point, piece, piecesString, isHasMoved) {\n        return boardHelper_1.default.genCanMovePointsByPiecePoint(point.index, piece, piecesString, isHasMoved);\n    };\n    return MoveHelper;\n}());\nexports.default = MoveHelper;\n//# sourceMappingURL=MoveHelper.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_1 = require(\"./constant\");\nvar Rectangle = /** @class */ (function () {\n    function Rectangle(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    Rectangle.prototype.isContainsPoint = function (point) {\n        var x = point.x, y = point.y;\n        var isContainsPoint = this.x <= x &&\n            (this.x + this.width) >= x &&\n            this.y <= y &&\n            (this.y + this.height) >= y;\n        return isContainsPoint;\n    };\n    Rectangle.isValidPoint = function (point) {\n        return new Rectangle(0, 0, constant_1.ROW_LAST_INDEX, constant_1.ROW_LAST_INDEX).isContainsPoint(point);\n    };\n    return Rectangle;\n}());\nexports.default = Rectangle;\n//# sourceMappingURL=Rectangle.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CountUpState = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar genMask_1 = __importDefault(require(\"./genMask\"));\nvar constant_1 = require(\"./constant\");\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Rectangle_1 = __importDefault(require(\"./Rectangle\"));\nvar ren_1 = require(\"../ren\");\nvar mask = (0, genMask_1.default)();\nvar CountUpState = /** @class */ (function () {\n    function CountUpState(countingNumber, countingToNumber) {\n        this.countingNumber = countingNumber;\n        this.countingToNumber = countingToNumber;\n    }\n    return CountUpState;\n}());\nexports.CountUpState = CountUpState;\nvar BoardHelper = /** @class */ (function () {\n    function BoardHelper() {\n        this.convertMask = function (point1, index, color) {\n            var sign = Piece_1.default.isWhiteColor(color) ? 1 : -1;\n            var point2 = Point_1.default.fromIndex(index);\n            point1.x = point1.x * sign + point2.x;\n            point1.y = point1.y * sign + point2.y;\n            return Rectangle_1.default.isValidPoint(point1) ? point1.index : null;\n        };\n    }\n    BoardHelper.prototype.getCharPieceFromString = function (piecesString, index) {\n        if (Point_1.default.isIndexInBoard(index) && piecesString.length === constant_1.CELL_COUNT) {\n            return piecesString[index];\n        }\n        return constant_1.EMPTY_PIECE;\n    };\n    BoardHelper.prototype.getCharPieceInPos = function (index, piecesString) {\n        return this.getCharPieceFromString(piecesString, index);\n    };\n    BoardHelper.prototype.getPieceByIndex = function (index, piecesString) {\n        var charCode = this.getCharPieceInPos(index, piecesString);\n        return {\n            isValidPiece: Piece_1.default.isValidPiece(charCode),\n            piece: Piece_1.default.fromCharCode(charCode),\n        };\n    };\n    BoardHelper.prototype.getPieceCanMovePoses = function (index, piece) {\n        var _this = this;\n        var pieceIndices = [];\n        mask[piece.type].forEach(function (_pos) {\n            var newIndex = _this.convertMask(new Point_1.default(_pos[0], _pos[1]), index, piece.color);\n            if (newIndex !== null) {\n                pieceIndices.push(newIndex);\n            }\n        });\n        return pieceIndices;\n    };\n    BoardHelper.prototype.getPieceCanMovePosesValid = function (index, piece, piecesString) {\n        var _poses = this.getPieceCanMovePoses(index, piece);\n        var pieceIndices = [];\n        var n = _poses.length;\n        var thisPos = Point_1.default.fromIndex(index);\n        for (var i = 0; i < n; i++) {\n            var p = Point_1.default.fromIndex(_poses[i]);\n            var distPiece = this.getPieceByIndex(p.index, piecesString);\n            if (distPiece.isValidPiece) {\n                if (distPiece.piece && piece.color === distPiece.piece.color ||\n                    (piece.isTypeFish && p.x === thisPos.x)) {\n                    p = null;\n                }\n            }\n            else {\n                if (piece.isTypeFish && p.x !== thisPos.x) {\n                    p = null;\n                }\n            }\n            if (p !== null && piece.isTypeBoat) {\n                var _x = thisPos.x;\n                var _y = thisPos.y;\n                if (p.x === thisPos.x) {\n                    var _n = Math.abs(p.y - thisPos.y);\n                    var _s = thisPos.y < p.y ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x, _y + _s * _n), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n                else if (p.y === thisPos.y) {\n                    var _n = Math.abs(p.x - thisPos.x);\n                    var _s = thisPos.x < p.x ? 1 : -1;\n                    while (--_n > 0) {\n                        if (this.getPieceByIndex(Point_1.default.xyToIndex(_x + _s * _n, _y), piecesString).isValidPiece) {\n                            p = null;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (p !== null) {\n                pieceIndices.push(_poses[i]);\n            }\n        }\n        return pieceIndices;\n    };\n    BoardHelper.prototype.replacePiecesStringAtIndex = function (piecesString, charCode, index) {\n        return piecesString.substring(0, index) + charCode + piecesString.substring(index + 1);\n    };\n    BoardHelper.prototype.injectPiece = function (piecesString, index1, index2) {\n        var c = piecesString[index1];\n        if (!this.isCharPiecesInBoard(c, piecesString)) {\n            return null;\n        }\n        piecesString = this.replacePiecesStringAtIndex(piecesString, constant_1.EMPTY_PIECE, index1);\n        piecesString = this.replacePiecesStringAtIndex(piecesString, c, index2);\n        return piecesString;\n    };\n    BoardHelper.prototype.getKingWillInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color &&\n                p.piece.isTypeBoat) {\n                var _poses = this.getPieceCanMovePoses(i, p.piece);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.getKingInDanger = function (color, piecesString) {\n        var kingPos = piecesString.indexOf(new Piece_1.default(constant_1.PIECE_TYPE_KING, color).pieceCharCode);\n        var n = piecesString.length;\n        for (var i = 0; i < n; i++) {\n            var p = this.getPieceByIndex(i, piecesString);\n            if (p.piece !== null && p.isValidPiece && p.piece.color !== color) {\n                var _poses = this.getPieceCanMovePosesValid(i, p.piece, piecesString);\n                for (var j = 0; j < _poses.length; j++) {\n                    if (_poses[j] === kingPos) {\n                        return [Point_1.default.fromIndex(i), Point_1.default.fromIndex(kingPos)];\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    BoardHelper.prototype.genCanMovePointsByPiecePoint = function (index, piece, piecesString, isHasMoved) {\n        var _poses = this.getPieceCanMovePosesValid(index, piece, piecesString);\n        var isHaveCaptured = this.isHaveCaptured(piecesString);\n        if (piece.isTypeKing) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n                p = this.convertMask(new Point_1.default(-2, 1), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        else if (piece.isTypeQueen) {\n            if (!isHaveCaptured && !isHasMoved) {\n                var p = this.convertMask(new Point_1.default(-0, 2), index, piece.color);\n                if (p && !this.getPieceByIndex(p, piecesString).isValidPiece) {\n                    _poses.push(p);\n                }\n            }\n        }\n        var n = _poses.length;\n        var points = [];\n        for (var i = 0; i < n; i++) {\n            var str = this.injectPiece(piecesString, index, _poses[i]);\n            if (str !== null && this.getKingInDanger(piece.color, str) === null) {\n                points.push(Point_1.default.fromIndex(_poses[i]));\n            }\n        }\n        return points;\n    };\n    BoardHelper.prototype.isCharPiecesInBoard = function (code, piecesString) {\n        return !!~piecesString.indexOf(code);\n    };\n    BoardHelper.prototype.getPiecesInBoard = function (piecesString) {\n        return piecesString.split('').filter(function (charCode) {\n            return Piece_1.default.isValidPiece(charCode);\n        });\n    };\n    BoardHelper.prototype.isHaveCaptured = function (piecesString) {\n        return this.getPiecesInBoard(piecesString).length < constant_1.ROW_NUMBER * 4;\n    };\n    BoardHelper.prototype.filterPieceInBoard = function (piecesString) {\n        var whitePieces = [];\n        var blackPieces = [];\n        for (var i = 0; i < piecesString.length; i++) {\n            var charCode = piecesString[i];\n            if (Piece_1.default.isValidPiece(charCode)) {\n                var pieceIndex = new ren_1.PieceIndex(Point_1.default.fromIndex(i), Piece_1.default.fromCharCode(charCode));\n                if (pieceIndex.piece !== null && pieceIndex.piece.isColorWhite) {\n                    whitePieces.push(pieceIndex);\n                }\n                else {\n                    blackPieces.push(pieceIndex);\n                }\n            }\n        }\n        return {\n            whitePieces: whitePieces,\n            blackPieces: blackPieces,\n        };\n    };\n    BoardHelper.prototype.extractPiecesToArray = function (piecesString) {\n        var _a;\n        var piecesStringArr = piecesString.split('');\n        var pieceAll = (_a = {},\n            _a[constant_1.PIECE_COLOR_BLACK] = [],\n            _a[constant_1.PIECE_COLOR_WHITE] = [],\n            _a);\n        piecesStringArr.forEach(function (charCode) {\n            if (charCode === constant_1.EMPTY_PIECE) {\n                return;\n            }\n            var piece = Piece_1.default.fromCharCode(charCode);\n            if (piece) {\n                pieceAll[piece.color].push(piece.type);\n            }\n        });\n        return pieceAll;\n    };\n    BoardHelper.prototype.isStateCount = function (c, piecesString) {\n        var allPieces = this.extractPiecesToArray(piecesString);\n        return allPieces[c].length === 1;\n    };\n    BoardHelper.prototype.checkCountable = function (color, piecesString) {\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        return weaker.length <= 2 && stronger.length >= 2;\n    };\n    BoardHelper.prototype.checkCount = function (color, piecesString, force) {\n        var countChar = function (str, c) {\n            return str.join('').split(c).length - 1;\n        };\n        var charExist = function (str, c) {\n            return !!~str.indexOf(c);\n        };\n        var pieceAll = this.extractPiecesToArray(piecesString);\n        var weaker = pieceAll[color];\n        var stronger = pieceAll[Piece_1.default.oppositeColor(color)];\n        if (weaker.length === 1 && stronger.length > 1) {\n            if (!charExist(stronger, constant_1.PIECE_TYPE_FISH)) {\n                var count = 64;\n                var toukCount = countChar(stronger, constant_1.PIECE_TYPE_BOAT);\n                if (toukCount) {\n                    count = toukCount > 1 ? 8 : 16;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL) > 1) {\n                    count = 22;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_HORSE) > 1) {\n                    count = 32;\n                }\n                else if (countChar(stronger, constant_1.PIECE_TYPE_GENERAL)) {\n                    count = 44;\n                }\n                // FIXME: when touk 2 and stronger.length > 8 => start > count\n                var start = stronger.length;\n                if (start > 4) {\n                    start = 4;\n                }\n                return new CountUpState(start, count);\n            }\n            return new CountUpState(0, 64);\n        }\n        else if (force && this.checkCountable(color, piecesString)) {\n            return new CountUpState(0, 64);\n        }\n        return null;\n    };\n    BoardHelper.prototype.isUpgradable = function (piece, point) {\n        if (piece.isTypeFish) {\n            if (piece.isColorBlack && point.y <= 2) {\n                return true;\n            }\n            if (piece.isColorWhite && point.y >= 5) {\n                return true;\n            }\n        }\n        return false;\n    };\n    return BoardHelper;\n}());\n;\nexports.default = new BoardHelper();\n//# sourceMappingURL=boardHelper.js.map","\"use strict\";\nvar _a, _b, _c, _d;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = exports.HORIZONTAL_NOTE_LETTERS_ENGLISH = exports.VERTICAL_NOTE_LETTERS = exports.HORIZONTAL_NOTE_LETTERS = exports.HORIZONTAL_CODE_LETTERS = exports.CELL_COUNT = exports.ROW_LAST_INDEX = exports.ROW_FIRST_INDEX = exports.ROW_NUMBER = exports.BOARD_SEPARATOR = exports.PIECE_COLOR_EMPTY = exports.EMPTY_PIECE = exports.PIECE_NAMES_ENGLISH = exports.PIECE_NAMES = exports.PIECE_TYPE_TRANSFORM_FISH = exports.PIECE_TYPE_FISH = exports.PIECE_TYPE_QUEEN = exports.PIECE_TYPE_KING = exports.PIECE_TYPE_GENERAL = exports.PIECE_TYPE_HORSE = exports.PIECE_TYPE_BOAT = exports.COLOR_NAMES_ENGLISH = exports.COLOR_NAMES = exports.PIECE_COLOR_BLACK = exports.PIECE_COLOR_WHITE = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nexports.PIECE_COLOR_WHITE = 'w';\nexports.PIECE_COLOR_BLACK = 'b';\nexports.COLOR_NAMES = (_a = {},\n    _a[exports.PIECE_COLOR_BLACK] = 'ខ្មៅ',\n    _a[exports.PIECE_COLOR_WHITE] = 'ស',\n    _a);\nexports.COLOR_NAMES_ENGLISH = (_b = {},\n    _b[exports.PIECE_COLOR_BLACK] = 'black',\n    _b[exports.PIECE_COLOR_WHITE] = 'white',\n    _b);\nexports.PIECE_TYPE_BOAT = 'b'; // Boat\nexports.PIECE_TYPE_HORSE = 'h'; // Horse\nexports.PIECE_TYPE_GENERAL = 'g'; // General\nexports.PIECE_TYPE_KING = 'k'; // King\nexports.PIECE_TYPE_QUEEN = 'q'; // Queen\nexports.PIECE_TYPE_FISH = 'f'; // Fish\nexports.PIECE_TYPE_TRANSFORM_FISH = 't'; // Transform fish\nexports.PIECE_NAMES = (_c = {},\n    _c[exports.PIECE_TYPE_BOAT] = 'ទូក',\n    _c[exports.PIECE_TYPE_HORSE] = 'សេះ',\n    _c[exports.PIECE_TYPE_GENERAL] = 'គោល',\n    _c[exports.PIECE_TYPE_KING] = 'ស្តេច',\n    _c[exports.PIECE_TYPE_QUEEN] = 'នាង',\n    _c[exports.PIECE_TYPE_FISH] = 'ត្រី',\n    _c[exports.PIECE_TYPE_TRANSFORM_FISH] = 'ត្រីបក',\n    _c);\nexports.PIECE_NAMES_ENGLISH = (_d = {},\n    _d[exports.PIECE_TYPE_BOAT] = 'boat',\n    _d[exports.PIECE_TYPE_HORSE] = 'horse',\n    _d[exports.PIECE_TYPE_GENERAL] = 'general',\n    _d[exports.PIECE_TYPE_KING] = 'king',\n    _d[exports.PIECE_TYPE_QUEEN] = 'queen',\n    _d[exports.PIECE_TYPE_FISH] = 'fish',\n    _d[exports.PIECE_TYPE_TRANSFORM_FISH] = 'transformed-fish',\n    _d);\nexports.EMPTY_PIECE = '.';\nexports.PIECE_COLOR_EMPTY = '.';\nexports.BOARD_SEPARATOR = '/';\nexports.ROW_NUMBER = 8;\nexports.ROW_FIRST_INDEX = 0;\nexports.ROW_LAST_INDEX = 7;\nexports.CELL_COUNT = exports.ROW_NUMBER * exports.ROW_NUMBER;\nexports.HORIZONTAL_CODE_LETTERS = 'abcdefgh';\nexports.HORIZONTAL_NOTE_LETTERS = ['ក', 'ខ', 'គ', 'ឃ', 'ង', 'ច', 'ឆ', 'ជ'];\nexports.VERTICAL_NOTE_LETTERS = ['០', '១', '២', '៣', '៤', '៥', '៦', '៧', '៨', '៩'];\nexports.HORIZONTAL_NOTE_LETTERS_ENGLISH = 'abcdefgh';\nexports.VERTICAL_NOTE_LETTERS_ENGLISH = Array.from({ length: 10 }, function (_, i) { return \"\" + i; });\n//# sourceMappingURL=constant.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"./constant\");\nfunction genMask() {\n    var mask = {};\n    mask[constant_1.PIECE_TYPE_BOAT] = [\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6], [0, 7], [0, 8],\n        [0, -1], [0, -2], [0, -3], [0, -4], [0, -5], [0, -6], [0, -7], [0, -8],\n        [1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0],\n        [-1, 0], [-2, 0], [-3, 0], [-4, 0], [-5, 0], [-6, 0], [-7, 0], [-8, 0],\n    ];\n    mask[constant_1.PIECE_TYPE_HORSE] = [\n        [-1, -2],\n        [1, -2],\n        [-2, -1],\n        [2, -1],\n        [-1, 2],\n        [1, 2],\n        [-2, 1],\n        [2, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_QUEEN] = [\n        [-1, -1],\n        [1, -1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_GENERAL] = mask[constant_1.PIECE_TYPE_QUEEN].concat([\n        [0, 1],\n    ]);\n    mask[constant_1.PIECE_TYPE_KING] = mask[constant_1.PIECE_TYPE_GENERAL].concat([\n        [0, -1],\n        [1, 0],\n        [-1, 0],\n    ]);\n    mask[constant_1.PIECE_TYPE_FISH] = [\n        [0, 1],\n        [-1, 1],\n        [1, 1],\n    ];\n    mask[constant_1.PIECE_TYPE_TRANSFORM_FISH] = mask[constant_1.PIECE_TYPE_QUEEN];\n    return mask;\n}\nexports.default = genMask;\n//# sourceMappingURL=genMask.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoveHelper = exports.HVPont = exports.genMask = exports.boardHelper = exports.Rectangle = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Rectangle_1 = require(\"./Rectangle\");\nObject.defineProperty(exports, \"Rectangle\", { enumerable: true, get: function () { return __importDefault(Rectangle_1).default; } });\nvar boardHelper_1 = require(\"./boardHelper\");\nObject.defineProperty(exports, \"boardHelper\", { enumerable: true, get: function () { return __importDefault(boardHelper_1).default; } });\nvar genMask_1 = require(\"./genMask\");\nObject.defineProperty(exports, \"genMask\", { enumerable: true, get: function () { return __importDefault(genMask_1).default; } });\nvar HVPont_1 = require(\"./HVPont\");\nObject.defineProperty(exports, \"HVPont\", { enumerable: true, get: function () { return __importDefault(HVPont_1).default; } });\nvar MoveHelper_1 = require(\"./MoveHelper\");\nObject.defineProperty(exports, \"MoveHelper\", { enumerable: true, get: function () { return __importDefault(MoveHelper_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KhmerChess = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n__exportStar(require(\"./brain\"), exports);\n__exportStar(require(\"./kpgn\"), exports);\n__exportStar(require(\"./ren\"), exports);\n__exportStar(require(\"./other\"), exports);\nvar KhmerChess_1 = require(\"./KhmerChess\");\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.khmerChessNS = exports.KhmerChess = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar KhmerChess_1 = require(\"./KhmerChess\");\nObject.defineProperty(exports, \"KhmerChess\", { enumerable: true, get: function () { return __importDefault(KhmerChess_1).default; } });\nexports.khmerChessNS = __importStar(require(\"./index\"));\n//# sourceMappingURL=index.umd.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Captured = /** @class */ (function () {\n    function Captured(_a) {\n        var piece = _a.piece, fromBoardPoint = _a.fromBoardPoint, toGraveyardPoint = _a.toGraveyardPoint;\n        this.piece = piece;\n        this.fromBoardPoint = fromBoardPoint;\n        this.toGraveyardPoint = toGraveyardPoint;\n    }\n    return Captured;\n}());\nexports.default = Captured;\n//# sourceMappingURL=Captured.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar REN_1 = __importDefault(require(\"../ren/REN\"));\nvar Move_1 = __importDefault(require(\"./Move\"));\nvar Player_1 = __importDefault(require(\"./Player\"));\nvar Result_1 = __importDefault(require(\"./Result\"));\nvar Timer_1 = __importDefault(require(\"./Timer\"));\nvar base64Helper_1 = __importDefault(require(\"../other/base64Helper\"));\nvar KPGN = /** @class */ (function () {\n    function KPGN(ren) {\n        this.event = '';\n        this.date = null;\n        this.location = '';\n        this.players = {\n            white: new Player_1.default({}),\n            black: new Player_1.default({}),\n        };\n        this.result = {\n            last: {\n                whiteWin: false,\n                blackWin: false,\n            },\n            white: new Result_1.default({}),\n        };\n        this.timer = new Timer_1.default({});\n        this.ren = ren;\n        this.moves = [];\n    }\n    Object.defineProperty(KPGN.prototype, \"isCanMoveNext\", {\n        get: function () {\n            var _a;\n            return ((_a = this.latestMove) === null || _a === void 0 ? void 0 : _a.isCanMoveNext) && this.ren.isCanMoveNext;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(KPGN.prototype, \"latestMove\", {\n        get: function () {\n            return this.moves[this.moves.length - 1] || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KPGN.prototype.addMove = function (move) {\n        if (move) {\n            this.moves.push(move);\n            return true;\n        }\n        return false;\n    };\n    KPGN.prototype.getMove = function (index) {\n        return this.moves[index] || null;\n    };\n    KPGN.prototype.loadRENStr = function (renStr) {\n        this.ren = REN_1.default.fromString(renStr);\n        if (this.latestMove) {\n            this.ren.syncWithMove(this.latestMove);\n        }\n    };\n    KPGN.prototype.loadMovesStrings = function (moves) {\n        var currentRen = this.ren;\n        this.moves = moves.reverse().map(function (moveStr) {\n            var move = Move_1.default.fromString(moveStr, currentRen);\n            if (move === null) {\n                throw new Error('Invalid move string');\n            }\n            currentRen = currentRen.backRen(move);\n            return move;\n        }).reverse();\n        if (this.latestMove) {\n            this.ren.syncWithMove(this.latestMove);\n        }\n    };\n    KPGN.prototype.fromJson = function (option) {\n        try {\n            var ren = option.ren, moves = option.moves, timer = option.timer, result = option.result, players = option.players, location = option.location, date = option.date, event = option.event;\n            this.event = event || this.event;\n            this.date = date ? new Date(date) : this.date;\n            this.location = location || this.location;\n            if (players) {\n                this.players = {\n                    white: new Player_1.default(players.white),\n                    black: new Player_1.default(players.black),\n                };\n            }\n            if (result) {\n                this.result = {\n                    last: result.last,\n                    white: new Result_1.default(result.white),\n                };\n            }\n            this.ren = REN_1.default.fromString(ren || '');\n            this.loadMovesStrings(moves || []);\n            this.timer = new Timer_1.default(timer || {});\n            return true;\n        }\n        catch (error) {\n            console.log(error);\n            return false;\n        }\n    };\n    KPGN.prototype.toJson = function () {\n        var renStr = this.ren.toString();\n        if (this.latestMove) {\n            renStr = this.latestMove.renStr;\n        }\n        return {\n            event: this.event,\n            date: this.date ? this.date.toString() : '',\n            location: this.location,\n            players: {\n                white: this.players.white.toJson(),\n                black: this.players.black.toJson(),\n            },\n            result: {\n                last: {\n                    whiteWin: this.result.last.whiteWin,\n                    blackWin: this.result.last.blackWin,\n                },\n                white: this.result.white.toJson(),\n            },\n            timer: this.timer.toJson(),\n            moves: this.moves.map(function (m) { return m.toString(); }),\n            ren: renStr,\n        };\n    };\n    KPGN.prototype.fromBase64 = function (str) {\n        var json = JSON.parse(base64Helper_1.default.decode(str));\n        return this.fromJson(json);\n    };\n    KPGN.prototype.toBase64 = function () {\n        var jsStr = JSON.stringify(this.toJson());\n        return base64Helper_1.default.encode(jsStr);\n    };\n    return KPGN;\n}());\nexports.default = KPGN;\n//# sourceMappingURL=KPGN.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar brain_1 = require(\"../brain\");\nvar ren_1 = require(\"../ren\");\nvar constant_1 = require(\"../ren/constant\");\nvar Piece_1 = __importDefault(require(\"../ren/Piece\"));\nvar Point_1 = __importDefault(require(\"../ren/Point\"));\nvar Captured_1 = __importDefault(require(\"./Captured\"));\nvar Move = /** @class */ (function () {\n    function Move(_a) {\n        var piece = _a.piece, moveFrom = _a.moveFrom, moveTo = _a.moveTo, isUpgrading = _a.isUpgrading, captured = _a.captured;\n        this.renStr = null;\n        this.boardStatus = {\n            attacker: null,\n            winColor: null,\n            stuckColor: null,\n            drawCountColor: null,\n        };\n        this.isStartCounting = false;\n        this.piece = piece;\n        this.moveFrom = moveFrom;\n        this.moveTo = moveTo;\n        this.isUpgrading = !!isUpgrading;\n        this.captured = captured || null;\n        if (brain_1.boardHelper.isUpgradable(piece, moveTo)) {\n            this.isUpgrading = true;\n            piece.upgrade();\n        }\n        this.kqJumping = new ren_1.KqJumped();\n    }\n    Move.prototype.setRen = function (ren) {\n        ren.checkBoardStatus(this);\n        ren.kqJumped.checkKQMoved(this);\n        ren.checkCountStatus(this);\n    };\n    Move.prototype.syncRen = function (ren) {\n        this.renStr = ren.toString();\n    };\n    Object.defineProperty(Move.prototype, \"isCanMoveNext\", {\n        get: function () {\n            return !(this.boardStatus.drawCountColor || this.boardStatus.winColor || this.boardStatus.stuckColor);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isWhiteKingJumping\", {\n        get: function () {\n            return !!this.kqJumping.whiteKing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isWhiteQueenJumping\", {\n        get: function () {\n            return !!this.kqJumping.whiteQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isBlackKingJumping\", {\n        get: function () {\n            return !!this.kqJumping.blackKing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isBlackQueenJumping\", {\n        get: function () {\n            return !!this.kqJumping.blackQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"attacker\", {\n        get: function () {\n            return this.boardStatus.attacker || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"winColor\", {\n        get: function () {\n            return this.boardStatus.winColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"stuckColor\", {\n        get: function () {\n            return this.boardStatus.stuckColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"drawCountColor\", {\n        get: function () {\n            return this.boardStatus.drawCountColor || null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isDraw\", {\n        get: function () {\n            return this.stuckColor || this.drawCountColor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Move.prototype, \"isGameOver\", {\n        get: function () {\n            return this.winColor || this.isDraw;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Move.fromString = function (str, ren) {\n        var piece = Piece_1.default.fromCharCode(str[0]);\n        if (piece === null) {\n            return null;\n        }\n        var moveFrom = Point_1.default.fromIndexCode(str.substr(1, 2));\n        var moveTo = Point_1.default.fromIndexCode(str.substr(3, 2));\n        var move = new Move({\n            piece: piece,\n            moveFrom: moveFrom,\n            moveTo: moveTo,\n        });\n        var killIndex = str.indexOf(constant_1.PIECE_FLAG_KILL);\n        if (!!~killIndex) {\n            var match = str.substr(killIndex + 1).match(/^(\\d+)/);\n            if (match === null) {\n                return null;\n            }\n            var gyIndex = Number(match[1]);\n            var capturedPiece = ren.graveyard.get(gyIndex);\n            if (!capturedPiece) {\n                throw new Error('Invalid captured index');\n            }\n            move.captured = new Captured_1.default({\n                fromBoardPoint: moveTo,\n                toGraveyardPoint: Point_1.default.fromIndexGraveyardIndex(gyIndex),\n                piece: capturedPiece,\n            });\n        }\n        var jumpingIndex = str.indexOf(constant_1.PIECE_FLAG_JUMP);\n        if (!!~jumpingIndex) {\n            var match = str.substr(jumpingIndex + 1).match(/^(\\d+)/);\n            if (match === null) {\n                return null;\n            }\n            var n = Number(match[1]);\n            move.kqJumping = ren_1.KqJumped.fromNumber(n);\n        }\n        var startCountingIndex = str.indexOf(constant_1.PIECE_FLAG_START_COUNTING);\n        if (!!~startCountingIndex) {\n            move.isStartCounting = true;\n        }\n        move.setRen(ren);\n        return move;\n    };\n    Move.prototype.toString = function () {\n        var pCode = this.piece.pieceCharCode;\n        var fIndexCode = this.moveFrom.indexCode;\n        var tIndexCode = this.moveTo.indexCode;\n        var flags = '';\n        if (this.captured) {\n            flags += constant_1.PIECE_FLAG_KILL + this.captured.toGraveyardPoint.index;\n        }\n        if (this.kqJumping.isJumped) {\n            flags += constant_1.PIECE_FLAG_JUMP + this.kqJumping.toNumber();\n        }\n        if (this.isUpgrading) {\n            flags += constant_1.PIECE_FLAG_UPGRADE;\n        }\n        if (this.isStartCounting) {\n            flags += constant_1.PIECE_FLAG_START_COUNTING;\n        }\n        return \"\" + pCode + fIndexCode + tIndexCode + flags;\n    };\n    Move.prototype.getJumpingMessage = function (isEnglish) {\n        var jump = '';\n        if (isEnglish) {\n            if (this.isWhiteKingJumping) {\n                jump += ' white king jumping';\n            }\n            if (this.isWhiteQueenJumping) {\n                jump += ' white queen jumping';\n            }\n            if (this.isBlackKingJumping) {\n                jump += ' black king jumping';\n            }\n            if (this.isBlackQueenJumping) {\n                jump += ' black queen jumping';\n            }\n        }\n        else {\n            if (this.isWhiteKingJumping) {\n                jump += ' ស្តេច​ស​ភ្លោះ';\n            }\n            if (this.isWhiteQueenJumping) {\n                jump += ' នាង​ស​ភ្លោះ';\n            }\n            if (this.isBlackKingJumping) {\n                jump += ' ស្តេច​ខ្មៅ​ភ្លោះ';\n            }\n            if (this.isBlackQueenJumping) {\n                jump += ' នាង​ខ្មៅ​ភ្លោះ';\n            }\n        }\n        return jump;\n    };\n    Move.prototype.getMessage = function (isEnglish) {\n        if (isEnglish) {\n            var captured = '';\n            if (this.captured) {\n                captured = \" captures \" + this.captured.piece.titleEnglish;\n            }\n            var upgrade = this.isUpgrading ? ' transforms' : '';\n            var jump = this.getJumpingMessage(isEnglish);\n            return \"[\" + this.toString() + \"] \" + this.piece.titleEnglish + \" moved from \" + this.moveFrom.titleEnglish + \" to \" + this.moveTo.titleEnglish + upgrade + captured + \" \" + jump;\n        }\n        else {\n            var captured = '';\n            if (this.captured) {\n                captured = \" \\u179F\\u17CA\\u17B8\" + this.captured.piece.title;\n            }\n            var upgrade = this.isUpgrading ? ' បក' : '';\n            var jump = this.getJumpingMessage(isEnglish);\n            return \"[\" + this.toString() + \"] \" + this.piece.title + \" \\u178A\\u17BE\\u179A\\u200B\\u1796\\u17B8 \" + this.moveFrom.title + \" \\u1791\\u17C5 \" + this.moveTo.title + upgrade + captured + \" \" + jump;\n        }\n    };\n    return Move;\n}());\nexports.default = Move;\n//# sourceMappingURL=Move.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Player = /** @class */ (function () {\n    function Player(_a) {\n        var id = _a.id, name = _a.name;\n        this.id = id || '';\n        this.name = name || '';\n    }\n    Player.prototype.toJson = function () {\n        return {\n            id: this.id,\n            name: this.name,\n        };\n    };\n    return Player;\n}());\nexports.default = Player;\n//# sourceMappingURL=Player.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Result = /** @class */ (function () {\n    function Result(_a) {\n        var win = _a.win, draw = _a.draw, lost = _a.lost;\n        this.win = win || 0;\n        this.draw = draw || 0;\n        this.lost = lost || 0;\n    }\n    Result.prototype.toJson = function () {\n        return {\n            win: this.win,\n            draw: this.draw,\n            lost: this.lost,\n        };\n    };\n    return Result;\n}());\nexports.default = Result;\n//# sourceMappingURL=Result.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Timer = /** @class */ (function () {\n    function Timer(_a) {\n        var totalSecond = _a.totalSecond, bonusTime = _a.bonusTime, currentWhite = _a.currentWhite, currentBlack = _a.currentBlack;\n        this.bonusTime = bonusTime || 0;\n        this.totalSecond = totalSecond || 0;\n        this.currentWhite = currentWhite || 0;\n        this.currentBlack = currentBlack || 0;\n    }\n    Timer.prototype.toJson = function () {\n        return {\n            totalSecond: this.totalSecond,\n            bonusTime: this.bonusTime,\n            currentWhite: this.currentWhite,\n            currentBlack: this.currentBlack,\n        };\n    };\n    return Timer;\n}());\nexports.default = Timer;\n//# sourceMappingURL=Timer.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timer = exports.Result = exports.Player = exports.Captured = exports.Move = exports.KPGN = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar KPGN_1 = require(\"./KPGN\");\nObject.defineProperty(exports, \"KPGN\", { enumerable: true, get: function () { return __importDefault(KPGN_1).default; } });\nvar Move_1 = require(\"./Move\");\nObject.defineProperty(exports, \"Move\", { enumerable: true, get: function () { return __importDefault(Move_1).default; } });\nvar Captured_1 = require(\"./Captured\");\nObject.defineProperty(exports, \"Captured\", { enumerable: true, get: function () { return __importDefault(Captured_1).default; } });\nvar Player_1 = require(\"./Player\");\nObject.defineProperty(exports, \"Player\", { enumerable: true, get: function () { return __importDefault(Player_1).default; } });\nvar Result_1 = require(\"./Result\");\nObject.defineProperty(exports, \"Result\", { enumerable: true, get: function () { return __importDefault(Result_1).default; } });\nvar Timer_1 = require(\"./Timer\");\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return __importDefault(Timer_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventHandler = /** @class */ (function () {\n    function EventHandler(options) {\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this._isLockProp = false;\n        this._onEventListeners = {};\n        this._propEvent = [];\n        this.events = options.events;\n    }\n    EventHandler.prototype.destroy = function () {\n        this._onEventListeners = {};\n        this._propEvent = [];\n    };\n    EventHandler.prototype._checkPropEvent = function () {\n        if (this._isLockProp) {\n            return;\n        }\n        while (this._propEvent.length) {\n            var event = this._propEvent.shift();\n            this._checkOnEvent(event.name, event.data);\n        }\n    };\n    EventHandler.prototype._addPropEvent = function (event, data) {\n        this._propEvent.push({\n            name: event,\n            data: data,\n        });\n        this._checkPropEvent();\n    };\n    EventHandler.prototype._guardEventName = function (eventName) {\n        if (!eventName) {\n            throw new Error('invalid event name');\n        }\n    };\n    EventHandler.prototype._checkOnEvent = function (eventName, data) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].forEach(function (listener) {\n            listener(data);\n        });\n    };\n    EventHandler.prototype._addOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        this._onEventListeners[eventName].push(listener);\n    };\n    EventHandler.prototype._removeOnEventListener = function (eventName, listener) {\n        this._guardEventName(eventName);\n        this._onEventListeners[eventName] = this._onEventListeners[eventName] || [];\n        var index = this._onEventListeners[eventName].indexOf(listener);\n        ~index && this._onEventListeners[eventName].splice(index, 1);\n    };\n    return EventHandler;\n}());\nexports.default = EventHandler;\n//# sourceMappingURL=EventHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://stackoverflow.com/questions/246801/how-can-you-encode-a-string-to-base64-in-javascript\n/**\n*\n*  Base64 encode / decode\n*  http://www.webtoolkit.info/\n*\n**/\nvar Base64 = {\n    // private property\n    _keyStr: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',\n    // public method for encoding\n    encode: function (input) {\n        var output = '';\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = Base64._utf8_encode(input);\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            }\n            else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output +\n                this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +\n                this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);\n        }\n        return output;\n    },\n    // public method for decoding\n    decode: function (input) {\n        var output = '';\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n        while (i < input.length) {\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n            output = output + String.fromCharCode(chr1);\n            if (enc3 != 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 != 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        }\n        output = Base64._utf8_decode(output);\n        return output;\n    },\n    // private method for UTF-8 encoding\n    _utf8_encode: function (string) {\n        string = string.replace(/\\r\\n/g, '\\n');\n        var utftext = '';\n        for (var n = 0; n < string.length; n++) {\n            var c = string.charCodeAt(n);\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            }\n            else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n        }\n        return utftext;\n    },\n    // private method for UTF-8 decoding\n    _utf8_decode: function (utftext) {\n        var string = '';\n        var i = 0;\n        var c, c1, c2 = 0;\n        c = c1 = c2 = 0;\n        while (i < utftext.length) {\n            c = utftext.charCodeAt(i);\n            if (c < 128) {\n                string += String.fromCharCode(c);\n                i++;\n            }\n            else if ((c > 191) && (c < 224)) {\n                c1 = utftext.charCodeAt(i + 1);\n                string += String.fromCharCode(((c & 31) << 6) | (c1 & 63));\n                i += 2;\n            }\n            else {\n                c1 = utftext.charCodeAt(i + 1);\n                c2 = utftext.charCodeAt(i + 2);\n                string += String.fromCharCode(((c & 15) << 12) | ((c1 & 63) << 6) | (c2 & 63));\n                i += 3;\n            }\n        }\n        return string;\n    },\n};\nexports.default = Base64;\n//# sourceMappingURL=base64Helper.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.table = exports.EventHandler = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar EventHandler_1 = require(\"./EventHandler\");\nObject.defineProperty(exports, \"EventHandler\", { enumerable: true, get: function () { return __importDefault(EventHandler_1).default; } });\nvar table_1 = require(\"./table\");\nObject.defineProperty(exports, \"table\", { enumerable: true, get: function () { return __importDefault(table_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction renderLine(pieces) {\n    return pieces.map(function (piece) {\n        return \" \" + (piece === null ? ' ' : piece.pieceCharCode) + \" \";\n    }).join('┃');\n}\nfunction asciiTable(ren) {\n    var piecesMultiArray = ren.board.piecesMultiArray;\n    var str = '  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓';\n    var result = __spreadArray([], piecesMultiArray, true).reverse().reduce(function (s, subArr, i) {\n        var rs = renderLine(subArr);\n        var bottom = i === piecesMultiArray.length - 1 ?\n            '┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛' :\n            '┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫';\n        s += \"\\n\" + (8 - i) + \" \\u2503\" + rs + \"\\u2503\\n  \" + bottom;\n        return s;\n    }, str);\n    var gyTStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┳');\n    var gyStr = renderLine(ren.graveyard.pieces);\n    var gyBStr = ren.graveyard.pieces.map(function () { return '━━━'; }).join('┻');\n    var graveyardStr = \"  \\u250F\" + gyTStr + \"\\u2513\\n  \\u2503\" + gyStr + \"\\u2503\\n  \\u2517\" + gyBStr + \"\\u251B\";\n    return result + \"\\n    a   b   c   d   e   f   g   h\\n\" + graveyardStr;\n}\nexports.default = asciiTable;\n/*\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n8 ┃   ┃   ┃   ┃   ┃ k ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n7 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n6 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n5 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n4 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n3 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n2 ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃   ┃\n  ┣━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━╋━━━┫\n1 ┃   ┃   ┃   ┃ K ┃   ┃   ┃   ┃   ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n    a   b   c   d   e   f   g   h\n  ┏━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┳━━━┓\n  ┃ b ┃ h ┃ g ┃ q ┃ g ┃ h ┃ b ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ f ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ F ┃ B ┃ H ┃ G ┃ Q ┃ G ┃ H ┃ B ┃\n  ┗━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┻━━━┛\n */\n//# sourceMappingURL=table.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar PieceIndex_1 = __importDefault(require(\"./PieceIndex\"));\nvar constant_1 = require(\"./constant\");\nvar constant_2 = require(\"../brain/constant\");\nvar Point_1 = __importDefault(require(\"./Point\"));\n/**\n * BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb => bhgqkghb/......../ffffffff/......../......../FFFFFFFF/......../BHGKQGHB\n */\nvar Board = /** @class */ (function () {\n    function Board(boardStr) {\n        this.pieceIndices = Array.from({\n            length: constant_2.CELL_COUNT,\n        }, function (_, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, null);\n        });\n        if (!boardStr) {\n            boardStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var newBoardStr = this.extract(boardStr).replace(/\\//g, '');\n        if (newBoardStr.length < constant_2.CELL_COUNT ||\n            !Piece_1.default.isValidPiecesString(newBoardStr)) {\n            throw new Error(\"Invalid board string \" + boardStr);\n        }\n        this.pieceIndices = newBoardStr.split('').map(function (charCode, i) {\n            var point = Point_1.default.fromIndex(i);\n            return new PieceIndex_1.default(point, charCode === constant_2.EMPTY_PIECE ? null : Piece_1.default.fromCharCode(charCode));\n        });\n    }\n    Object.defineProperty(Board.prototype, \"piecesMultiArray\", {\n        get: function () {\n            var arr = [[], [], [], [], [], [], [], []];\n            this.pieceIndices.forEach(function (pieceIndex) {\n                arr[pieceIndex.point.y][pieceIndex.point.x] = pieceIndex.piece;\n            });\n            return arr;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"pieces\", {\n        get: function () {\n            return this.pieceIndices.map(function (pieceIndex) {\n                return pieceIndex.piece;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"whiteKing\", {\n        get: function () {\n            return this.pieceIndices.find(function (pieceIndex) {\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorWhite;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Board.prototype, \"blackKing\", {\n        get: function () {\n            return this.pieceIndices.find(function (pieceIndex) {\n                return pieceIndex.piece && pieceIndex.piece.isTypeKing && pieceIndex.piece.isColorBlack;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Board.prototype.getKing = function (color) {\n        return Piece_1.default.isWhiteColor(color) ? this.whiteKing : this.blackKing;\n    };\n    Board.prototype.compress = function (str) {\n        var reg = new RegExp(\"(\\\\\" + constant_2.EMPTY_PIECE + \"+)\", 'g');\n        return str.replace(reg, function ($1) { return $1.length; });\n    };\n    Board.prototype.extract = function (str) {\n        return str.replace(/(\\d+)/g, function ($1) {\n            // $1 == 3 => '...', bh6 => 'bh......'\n            return Array.from({\n                length: $1,\n            }, function () { return constant_2.EMPTY_PIECE; }).join('');\n        });\n    };\n    Board.prototype.toStringFull = function (pieceIndices) {\n        if (pieceIndices === void 0) { pieceIndices = this.pieceIndices; }\n        var str = pieceIndices.map(function (pieceIndex, i) {\n            var p = pieceIndex.toPieceCharCode();\n            if (i && i % constant_2.ROW_NUMBER === 0 && i !== constant_2.CELL_COUNT) {\n                return \"\" + constant_2.BOARD_SEPARATOR + p;\n            }\n            return p;\n        }).join('');\n        return str;\n    };\n    Board.prototype.toStringFullNoSeparate = function () {\n        var str = this.toStringFull();\n        str = str.replace(/\\//g, '');\n        return str;\n    };\n    Board.prototype.toString = function (pieceIndices) {\n        var str = this.toStringFull(pieceIndices);\n        str = this.compress(str);\n        return str;\n    };\n    Board.prototype.getPieceAtIndex = function (index) {\n        return this.pieceIndices[index].piece;\n    };\n    Board.prototype.setPieceAtIndex = function (index, piece) {\n        this.pieceIndices[index].piece = piece;\n    };\n    return Board;\n}());\nexports.default = Board;\n//# sourceMappingURL=Board.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar brain_1 = require(\"../brain\");\nvar constant_1 = require(\"./constant\");\n// 23.-\nvar CountUp = /** @class */ (function () {\n    function CountUp() {\n        this.countingToNumber = null;\n        this.countingNumber = null;\n        this.isCountingUp = false;\n        this.color = null;\n    }\n    Object.defineProperty(CountUp.prototype, \"isWhite\", {\n        get: function () {\n            return this.color === brain_1.PIECE_COLOR_WHITE;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isBlack\", {\n        get: function () {\n            return this.color === brain_1.PIECE_COLOR_BLACK;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isWhiteCounting\", {\n        get: function () {\n            return this.isCounting && this.isWhite;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isBlackCounting\", {\n        get: function () {\n            return this.isCounting && !this.isWhite;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isCounting\", {\n        get: function () {\n            return this.countingToNumber !== null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CountUp.prototype, \"isCountingOut\", {\n        get: function () {\n            if (!this.isCounting || this.countingNumber === null ||\n                this.countingToNumber === null) {\n                return false;\n            }\n            return this.countingNumber >= this.countingToNumber;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CountUp.prototype.set = function (color, countingToNumber, countingNumber) {\n        this.color = color;\n        this.countingToNumber = countingToNumber;\n        this.countingNumber = countingNumber;\n    };\n    CountUp.prototype.clear = function () {\n        this.color = null;\n        this.countingToNumber = null;\n        this.countingNumber = null;\n    };\n    CountUp.prototype.checkUp = function (color) {\n        if (this.countingNumber !== null && color === this.color) {\n            this.countingNumber++;\n            this.isCountingUp = true;\n        }\n        else {\n            this.isCountingUp = false;\n        }\n    };\n    CountUp.fromString = function (countUpStr) {\n        if (!countUpStr) {\n            countUpStr = constant_1.NOT_SET + \".\" + constant_1.NOT_SET + \"@\" + constant_1.NOT_SET;\n        }\n        var countUp = new CountUp();\n        var countingUp = countUpStr.split('@');\n        if (countingUp[1] !== constant_1.NOT_SET) {\n            countUp.countingToNumber = Number(countingUp[1]);\n        }\n        var countingUpWB = countingUp[0].split('.');\n        if (countingUpWB[0] !== constant_1.NOT_SET) {\n            countUp.color = brain_1.PIECE_COLOR_WHITE;\n            countUp.countingNumber = Number(countingUpWB[0]);\n        }\n        if (countingUpWB[1] !== constant_1.NOT_SET) {\n            countUp.color = brain_1.PIECE_COLOR_BLACK;\n            countUp.countingNumber = Number(countingUpWB[1]);\n        }\n        return countUp;\n    };\n    CountUp.prototype.toString = function () {\n        var whiteCountingDow = this.isCounting && this.isWhite ? this.countingNumber : constant_1.NOT_SET;\n        var blackCountingDow = this.isCounting && !this.isWhite ? this.countingNumber : constant_1.NOT_SET;\n        var str = \"\" + whiteCountingDow;\n        str += \".\" + blackCountingDow;\n        str += \"@\" + (this.isCounting ? this.countingToNumber : constant_1.NOT_SET);\n        return str;\n    };\n    return CountUp;\n}());\nexports.default = CountUp;\n//# sourceMappingURL=CountUp.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar Graveyard = /** @class */ (function () {\n    function Graveyard(graveyardStr) {\n        this.pieces = [];\n        if (graveyardStr) {\n            if (graveyardStr.length > 30 ||\n                !Piece_1.default.isValidPiecesString(graveyardStr, true)) {\n                throw new Error(\"Invalid graveyard string \" + graveyardStr);\n            }\n            this.pieces = graveyardStr.split('').map(function (charCode, i) {\n                var p = Piece_1.default.fromCharCode(charCode);\n                return p;\n            }).filter(function (piece) {\n                return piece !== null;\n            });\n        }\n    }\n    Object.defineProperty(Graveyard.prototype, \"lastIndex\", {\n        get: function () {\n            return this.pieces.length - 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Graveyard.prototype.get = function (index) {\n        return this.pieces[index];\n    };\n    Graveyard.prototype.removeAtIndex = function (index) {\n        if (!!this.get(index)) {\n            this.pieces.splice(index, 1);\n        }\n        return true;\n    };\n    Graveyard.prototype.toString = function () {\n        return this.pieces.map(function (p) {\n            return p.pieceCharCode;\n        }).join('');\n    };\n    return Graveyard;\n}());\nexports.default = Graveyard;\n//# sourceMappingURL=Graveyard.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King has attacked, this will effect jumping\n */\nvar KAttacked = /** @class */ (function () {\n    function KAttacked(kAttackedStr) {\n        this.whiteKing = false;\n        this.blackKing = false;\n        if (kAttackedStr) {\n            this.whiteKing = !!~kAttackedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.blackKing = !!~kAttackedStr.indexOf(constant_1.PIECE_TYPE_KING);\n        }\n    }\n    KAttacked.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        return str;\n    };\n    return KAttacked;\n}());\nexports.default = KAttacked;\n//# sourceMappingURL=KAttacked.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar constant_2 = require(\"./constant\");\nvar Piece_1 = __importDefault(require(\"./Piece\"));\n/**\n * King or Queen has jumped, the will effect jumping\n */\nvar KqJumped = /** @class */ (function () {\n    function KqJumped(kqJumpedStr) {\n        var _a;\n        this.whiteKing = false;\n        this.whiteQueen = false;\n        this.blackKing = false;\n        this.blackQueen = false;\n        this.keyCodes = {\n            blackKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN),\n            whiteKing: Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING),\n            whiteQueen: constant_1.PIECE_TYPE_KING,\n            blackQueen: constant_1.PIECE_TYPE_QUEEN,\n        };\n        this.codeKeys = (_a = {},\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN)] = 'blackKing: ',\n            _a[Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING)] = 'whiteKing: ',\n            _a[constant_1.PIECE_TYPE_KING] = 'whiteQueen: ',\n            _a[constant_1.PIECE_TYPE_QUEEN] = 'blackQueen: ',\n            _a);\n        if (kqJumpedStr) {\n            this.whiteKing = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING));\n            this.whiteQueen = !!~kqJumpedStr.indexOf(Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN));\n            this.blackKing = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_KING);\n            this.blackQueen = !!~kqJumpedStr.indexOf(constant_1.PIECE_TYPE_QUEEN);\n        }\n    }\n    Object.defineProperty(KqJumped.prototype, \"isJumped\", {\n        get: function () {\n            return this.whiteKing || this.whiteQueen || this.blackKing || this.blackQueen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    KqJumped.prototype.setProp = function (key, value) {\n        this[key] = value;\n    };\n    KqJumped.prototype.applyJumping = function (propKey, move) {\n        if (!this[propKey]) {\n            move.kqJumping.setProp(propKey, true);\n            this.setProp(propKey, true);\n        }\n    };\n    KqJumped.prototype.checkKQMoved = function (move) {\n        if (move.attacker || move.captured) {\n            this.applyJumping('whiteKing', move);\n            this.applyJumping('blackKing', move);\n            this.applyJumping('whiteQueen', move);\n            this.applyJumping('blackQueen', move);\n        }\n        var piece = move.piece;\n        if (piece.isTypeKing) {\n            if (piece.isColorWhite) {\n                this.applyJumping('whiteKing', move);\n            }\n            else {\n                this.applyJumping('blackKing', move);\n            }\n        }\n        else if (piece.isTypeQueen) {\n            if (piece.isColorWhite) {\n                this.applyJumping('whiteQueen', move);\n            }\n            else {\n                this.applyJumping('blackQueen', move);\n            }\n        }\n    };\n    KqJumped.prototype.toString = function () {\n        var str = \"\" + (this.whiteKing ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_KING) : constant_2.NOT_SET);\n        str += \"\" + (this.whiteQueen ? Piece_1.default.toWhiteCharCode(constant_1.PIECE_TYPE_QUEEN) : constant_2.NOT_SET);\n        str += \"\" + (this.blackKing ? constant_1.PIECE_TYPE_KING : constant_2.NOT_SET);\n        str += \"\" + (this.blackQueen ? constant_1.PIECE_TYPE_QUEEN : constant_2.NOT_SET);\n        return str;\n    };\n    KqJumped.prototype.toNumber = function () {\n        var str = \"\" + (this.whiteKing ? 1 : 0);\n        str += \"\" + (this.whiteQueen ? 1 : 0);\n        str += \"\" + (this.blackKing ? 1 : 0);\n        str += \"\" + (this.blackQueen ? 1 : 0);\n        return parseInt(str, 2);\n    };\n    KqJumped.fromNumber = function (n) {\n        var b = ('0000' + Number(n).toString(2)).substr(-4);\n        var kqJumped = new KqJumped();\n        kqJumped.whiteKing = b[0] === '1';\n        kqJumped.whiteQueen = b[1] === '1';\n        kqJumped.blackKing = b[2] === '1';\n        kqJumped.blackQueen = b[3] === '1';\n        return kqJumped;\n    };\n    return KqJumped;\n}());\nexports.default = KqJumped;\n//# sourceMappingURL=KqJumped.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar Piece = /** @class */ (function () {\n    function Piece(type, color) {\n        this.type = Piece.toNormalCharCode(type);\n        this.color = color;\n    }\n    Object.defineProperty(Piece.prototype, \"colorOpponent\", {\n        get: function () {\n            return Piece.oppositeColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCode\", {\n        get: function () {\n            if (this.isColorWhite) {\n                return this.pieceCharCodeWhite;\n            }\n            return this.type;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"pieceCharCodeWhite\", {\n        get: function () {\n            return Piece.toWhiteCharCode(this.type);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.PIECE_NAMES[this.type] + constant_1.COLOR_NAMES[this.color];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"titleEnglish\", {\n        get: function () {\n            return constant_1.COLOR_NAMES_ENGLISH[this.color] + \"-\" + constant_1.PIECE_NAMES_ENGLISH[this.type];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.prototype._isTypeEqual = function (type) {\n        return this.type === type;\n    };\n    Object.defineProperty(Piece.prototype, \"isTypeKing\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_KING);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeQueen\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_QUEEN);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeBoat\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_BOAT);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeHorse\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_HORSE);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeGeneral\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_GENERAL);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isTypeTransformedFish\", {\n        get: function () {\n            return this._isTypeEqual(constant_1.PIECE_TYPE_TRANSFORM_FISH);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorBlack\", {\n        get: function () {\n            return Piece.isBlackColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece.prototype, \"isColorWhite\", {\n        get: function () {\n            return Piece.isWhiteColor(this.color);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.fromCharCode = function (charCode) {\n        if (!Piece.isValidPiece(charCode)) {\n            return null;\n        }\n        var color = Piece.isWhiteCharCode(charCode) ? constant_1.PIECE_COLOR_WHITE : constant_1.PIECE_COLOR_BLACK;\n        var type = Piece.toNormalCharCode(charCode);\n        return new Piece(type, color);\n    };\n    Object.defineProperty(Piece.prototype, \"originPiece\", {\n        get: function () {\n            if (this.isTypeTransformedFish) {\n                return new Piece(constant_1.PIECE_TYPE_FISH, this.color);\n            }\n            return this;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"pieceChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_TYPE_BOAT,\n                constant_1.PIECE_TYPE_HORSE,\n                constant_1.PIECE_TYPE_GENERAL,\n                constant_1.PIECE_TYPE_KING,\n                constant_1.PIECE_TYPE_QUEEN,\n                constant_1.PIECE_TYPE_FISH,\n                constant_1.PIECE_TYPE_TRANSFORM_FISH,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Piece, \"colorChars\", {\n        get: function () {\n            return [\n                constant_1.PIECE_COLOR_WHITE,\n                constant_1.PIECE_COLOR_BLACK,\n            ];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Piece.toWhiteCharCode = function (charCode) {\n        return charCode.toUpperCase();\n    };\n    Piece.isWhiteCharCode = function (charCode) {\n        return charCode === charCode.toUpperCase();\n    };\n    Piece.toBlackCharCode = function (charCode) {\n        return charCode.toLowerCase();\n    };\n    Piece.toNormalCharCode = function (charCode) {\n        return Piece.toBlackCharCode(charCode);\n    };\n    Piece.isValidPiece = function (charCode) {\n        return charCode !== constant_1.EMPTY_PIECE;\n    };\n    Piece.isWhiteColor = function (color) {\n        return color === constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isBlackColor = function (color) {\n        return color === constant_1.PIECE_COLOR_BLACK;\n    };\n    Piece.oppositeColor = function (color) {\n        return Piece.isWhiteColor(color) ? constant_1.PIECE_COLOR_BLACK : constant_1.PIECE_COLOR_WHITE;\n    };\n    Piece.isValidPiecesString = function (str, onlyPiece) {\n        var ruler = onlyPiece ? allPiecesString.filter(function (c) {\n            return !~[constant_1.EMPTY_PIECE, constant_1.BOARD_SEPARATOR].indexOf(c);\n        }) : allPiecesString;\n        return !str.split('').some(function (c) {\n            return !~ruler.indexOf(c);\n        });\n    };\n    Piece.prototype.upgrade = function () {\n        if (this.isTypeFish) {\n            this.type = constant_1.PIECE_TYPE_TRANSFORM_FISH;\n            return true;\n        }\n        return false;\n    };\n    Piece.prototype.downgrade = function () {\n        if (this.isTypeTransformedFish) {\n            this.type = constant_1.PIECE_TYPE_FISH;\n            return true;\n        }\n        return false;\n    };\n    Piece.prototype.clone = function () {\n        return Piece.fromCharCode(this.pieceCharCode);\n    };\n    return Piece;\n}());\nexports.default = Piece;\nvar allPiecesString = __spreadArray(__spreadArray(__spreadArray([], Piece.pieceChars, true), Piece.pieceChars.map(function (pieceChar) {\n    return Piece.toWhiteCharCode(pieceChar);\n}), true), [\n    constant_1.EMPTY_PIECE,\n    constant_1.BOARD_SEPARATOR,\n], false);\n//# sourceMappingURL=Piece.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar PieceIndex = /** @class */ (function () {\n    function PieceIndex(point, piece) {\n        this.canMovePoints = [];\n        this.point = point;\n        this.piece = piece;\n    }\n    PieceIndex.prototype.toCode = function () {\n        if (this.piece === null) {\n            return null;\n        }\n        return \"\" + this.piece.pieceCharCode + this.point.indexCode;\n    };\n    PieceIndex.prototype.toPieceCharCode = function () {\n        if (this.piece === null) {\n            return constant_1.EMPTY_PIECE;\n        }\n        return this.piece.pieceCharCode;\n    };\n    return PieceIndex;\n}());\nexports.default = PieceIndex;\n//# sourceMappingURL=PieceIndex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar constant_1 = require(\"../brain/constant\");\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    Object.defineProperty(Point.prototype, \"index\", {\n        get: function () {\n            return Point.xyToIndex(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"graveyardIndex\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"indexCode\", {\n        get: function () {\n            return \"\" + this.h + this.v;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"title\", {\n        get: function () {\n            return \"\" + constant_1.HORIZONTAL_NOTE_LETTERS[this.x] + constant_1.VERTICAL_NOTE_LETTERS[this.y];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"titleEnglish\", {\n        get: function () {\n            return this.indexCode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"h\", {\n        get: function () {\n            return constant_1.HORIZONTAL_CODE_LETTERS[this.x];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Point.prototype, \"v\", {\n        get: function () {\n            return this.y + 1;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Point.xyToIndex = function (x, y) {\n        return y * constant_1.ROW_NUMBER + x;\n    };\n    Point.indexCodeToXY = function (indexCode) {\n        var x = constant_1.HORIZONTAL_CODE_LETTERS.indexOf(indexCode[0]);\n        var y = Number(indexCode[1]) - 1;\n        return { x: x, y: y };\n    };\n    Point.indexCodeToIndex = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return Point.xyToIndex(x, y);\n    };\n    Point.fromIndexCode = function (indexCode) {\n        var _a = Point.indexCodeToXY(indexCode), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.indexToXY = function (index) {\n        var x = index % constant_1.ROW_NUMBER;\n        var y = Math.floor(index / constant_1.ROW_NUMBER);\n        return { x: x, y: y };\n    };\n    Point.fromIndex = function (index) {\n        var _a = Point.indexToXY(index), x = _a.x, y = _a.y;\n        return new Point(x, y);\n    };\n    Point.fromIndexGraveyardIndex = function (index) {\n        return new Point(index, 0);\n    };\n    Point.isIndexInBoard = function (index) {\n        return index >= 0 && index <= constant_1.CELL_COUNT - 1;\n    };\n    return Point;\n}());\nexports.default = Point;\n//# sourceMappingURL=Point.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = __importDefault(require(\"./Board\"));\nvar KqJumped_1 = __importDefault(require(\"./KqJumped\"));\nvar KAttacked_1 = __importDefault(require(\"./KAttacked\"));\nvar CountUp_1 = __importDefault(require(\"./CountUp\"));\nvar Graveyard_1 = __importDefault(require(\"./Graveyard\"));\nvar constant_1 = require(\"./constant\");\nvar kpgn_1 = require(\"../kpgn\");\nvar Move_1 = __importDefault(require(\"../kpgn/Move\"));\nvar Point_1 = __importDefault(require(\"./Point\"));\nvar Piece_1 = __importDefault(require(\"./Piece\"));\nvar _1 = require(\".\");\nvar MoveHelper_1 = __importDefault(require(\"../brain/MoveHelper\"));\nvar constant_2 = require(\"../brain/constant\");\nvar REN = /** @class */ (function () {\n    function REN(renProps) {\n        this.moveHelper = new MoveHelper_1.default();\n        var boardStr = renProps.boardStr, turnStr = renProps.turnStr, kqJumpedStr = renProps.kqJumpedStr, kAttackedStr = renProps.kAttackedStr, countUpStr = renProps.countUpStr, graveyardStr = renProps.graveyardStr;\n        // TODO: improve by moving to fromString()\n        this.board = new Board_1.default(boardStr);\n        this.turn = turnStr || constant_2.PIECE_COLOR_WHITE;\n        this.kqJumped = new KqJumped_1.default(kqJumpedStr);\n        this.kAttacked = new KAttacked_1.default(kAttackedStr);\n        this.countUp = CountUp_1.default.fromString(countUpStr);\n        this.graveyard = new Graveyard_1.default(graveyardStr);\n        var invalidPiecesString = this.isInvalidPieceCount();\n        if (invalidPiecesString) {\n            var msg = \"Invalid piece string board:\" + boardStr;\n            msg += \", graveyard:\" + graveyardStr + \", count:\" + invalidPiecesString;\n            throw new Error(msg);\n        }\n        this.moveHelper = new MoveHelper_1.default();\n    }\n    REN.prototype.isInvalidPieceCount = function () {\n        var pieces = this.board.pieceIndices.map(function (pos) {\n            return pos.piece;\n        }).filter(function (p) {\n            return p !== null;\n        }).concat(this.graveyard.pieces).map(function (p) {\n            return p.originPiece;\n        });\n        var piecesCount = pieces.reduce(function (obj, p) {\n            obj[p.pieceCharCode] = obj[p.pieceCharCode] || 0;\n            obj[p.pieceCharCode]++;\n            return obj;\n        }, {});\n        var str = Object.keys(piecesCount).map(function (k) {\n            return \"\" + k + piecesCount[k];\n        }).sort().join('');\n        if (str === constant_1.STRING_COUNT) {\n            return false;\n        }\n        return str;\n    };\n    REN.prototype.backRen = function (move) {\n        var ren = REN.fromString(this.toString());\n        ren.moveBack(move);\n        return ren;\n    };\n    Object.defineProperty(REN.prototype, \"isCanMoveNext\", {\n        get: function () {\n            return !this.countUp.isCountingOut;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    REN.prototype.move = function (moveFromIndex, moveToIndex) {\n        if (!this.isCanMoveNext) {\n            return null;\n        }\n        var piece = this.board.getPieceAtIndex(moveFromIndex);\n        if (!piece) {\n            return null;\n        }\n        this.board.setPieceAtIndex(moveFromIndex, null);\n        var move = new Move_1.default({\n            moveFrom: Point_1.default.fromIndex(moveFromIndex),\n            moveTo: Point_1.default.fromIndex(moveToIndex),\n            piece: piece.clone(),\n        });\n        if (move.isUpgrading) {\n            piece.upgrade();\n        }\n        var targetPiece = this.board.getPieceAtIndex(moveToIndex);\n        if (targetPiece) {\n            this.graveyard.pieces.push(targetPiece);\n            move.captured = new kpgn_1.Captured({\n                fromBoardPoint: Point_1.default.fromIndex(moveToIndex),\n                toGraveyardPoint: Point_1.default.fromIndex(this.graveyard.lastIndex),\n                piece: targetPiece,\n            });\n        }\n        this.board.setPieceAtIndex(moveToIndex, piece);\n        this.turn = Piece_1.default.oppositeColor(piece.color);\n        move.setRen(this);\n        return move;\n    };\n    REN.prototype.moveBack = function (move) {\n        var movedToIndex = move.moveTo.index;\n        var movedFromIndex = move.moveFrom.index;\n        var piece = this.board.getPieceAtIndex(movedToIndex);\n        this.board.setPieceAtIndex(movedToIndex, null);\n        if (!piece) {\n            return false;\n        }\n        this.board.setPieceAtIndex(movedFromIndex, piece);\n        if (move.captured) {\n            var movedToGYIndex = move.captured.toGraveyardPoint.index;\n            var capturedPiece = this.graveyard.get(movedToGYIndex);\n            this.board.setPieceAtIndex(movedToIndex, capturedPiece);\n            this.graveyard.removeAtIndex(movedToGYIndex);\n        }\n        if (move.kqJumping.whiteKing) {\n            this.kqJumped.whiteKing = false;\n        }\n        if (move.kqJumping.whiteQueen) {\n            this.kqJumped.whiteQueen = false;\n        }\n        if (move.kqJumping.blackKing) {\n            this.kqJumped.blackKing = false;\n        }\n        if (move.kqJumping.blackQueen) {\n            this.kqJumped.blackQueen = false;\n        }\n        if (this.countUp) {\n            this.countUp.clear();\n        }\n        this.turn = piece.color;\n        return true;\n    };\n    REN.fromString = function (renStr) {\n        if (!renStr) {\n            renStr = constant_1.DEFAULT_BOARD_STR;\n        }\n        var renArr = renStr.split(' ');\n        return new REN({\n            boardStr: renArr[0],\n            turnStr: renArr[1],\n            kqJumpedStr: renArr[2],\n            kAttackedStr: renArr[3],\n            countUpStr: renArr[4],\n            graveyardStr: renArr[5],\n        });\n    };\n    REN.prototype.toString = function () {\n        var str = this.board.toString();\n        str += \" \" + this.turn.toString();\n        str += \" \" + this.kqJumped.toString();\n        str += \" \" + this.kAttacked.toString();\n        str += \" \" + this.countUp.toString();\n        str += \" \" + this.graveyard.toString();\n        return str;\n    };\n    Object.defineProperty(REN.prototype, \"isQueenMoved\", {\n        get: function () {\n            var isQueenMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteQueen ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackQueen;\n            return isQueenMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(REN.prototype, \"isKingMoved\", {\n        get: function () {\n            var isKingMoved = Piece_1.default.isWhiteColor(this.turn) && this.kqJumped.whiteKing ||\n                Piece_1.default.isBlackColor(this.turn) && this.kqJumped.blackKing;\n            return isKingMoved;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    REN.prototype.genAllCanMoves = function () {\n        var canMoves = this.moveHelper.calcCanMove({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: true,\n            genCanMoveForAnother: false,\n        });\n        return canMoves.moves;\n    };\n    REN.prototype.isHasMoved = function (piece) {\n        var isHasMoved = false;\n        if ((this.kqJumped.blackKing && piece.isColorBlack && piece.isTypeKing) ||\n            (this.kqJumped.whiteKing && piece.isColorWhite && piece.isTypeKing) ||\n            (this.kqJumped.blackQueen && piece.isColorBlack && piece.isTypeQueen) ||\n            (this.kqJumped.whiteQueen && piece.isColorWhite && piece.isTypeQueen)) {\n            isHasMoved = true;\n        }\n        return isHasMoved;\n    };\n    REN.prototype.getCanMovePointsByPoint = function (point) {\n        var piece = this.board.getPieceAtIndex(point.index);\n        if (piece === null) {\n            return [];\n        }\n        return this.moveHelper.genCanMovePointsByPiecePoint(point, piece, this.board.toStringFullNoSeparate(), this.isHasMoved(piece));\n    };\n    REN.prototype.checkBoardStatus = function (move, force) {\n        var _this = this;\n        var piecesString = this.board.toStringFullNoSeparate();\n        // TODO: optimize by specific color\n        var state = this.moveHelper.calcState({\n            piecesString: piecesString,\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        var kingInDanger = state.blackKingInDanger || state.whiteKingInDanger;\n        if (kingInDanger) {\n            var pieceIndex = kingInDanger.map(function (point) {\n                return new _1.PieceIndex(point, _this.board.getPieceAtIndex(point.index));\n            }).filter(function (pieceIndex) {\n                return pieceIndex.piece !== null && !pieceIndex.piece.isTypeKing;\n            })[0];\n            move.boardStatus.attacker = pieceIndex;\n        }\n        move.boardStatus.winColor = state.winColor;\n        move.boardStatus.stuckColor = state.stuckColor;\n    };\n    REN.prototype.checkCountStatus = function (move, force) {\n        if (move.isCanMoveNext) {\n            var piecesString = this.board.toStringFullNoSeparate();\n            if (this.countUp.isCounting) {\n                move.isStartCounting = false;\n                this.countUp.checkUp(move.piece.color);\n                if (this.countUp.isCountingOut) {\n                    move.boardStatus.drawCountColor = this.countUp.color;\n                }\n            }\n            else {\n                var color = Piece_1.default.oppositeColor(move.piece.color);\n                var countState = this.moveHelper.calCount({\n                    color: Piece_1.default.oppositeColor(move.piece.color),\n                    piecesString: piecesString,\n                    force: !!force,\n                });\n                if (countState) {\n                    this.countUp.set(color, countState.countingToNumber, countState.countingNumber);\n                    move.isStartCounting = true;\n                }\n            }\n        }\n        move.syncRen(this);\n    };\n    REN.prototype.getWinColor = function () {\n        var state = this.moveHelper.calcState({\n            piecesString: this.board.toStringFullNoSeparate(),\n            currentTurn: this.turn,\n            isQueenMoved: this.isQueenMoved,\n            isKingMoved: this.isKingMoved,\n            genCanMove: false,\n            genCanMoveForAnother: false,\n        });\n        return state.winColor;\n    };\n    REN.prototype.syncWithMove = function (move) {\n        if (move) {\n            var countUp = this.countUp;\n            if (countUp.isCounting && this.turn !== countUp.color && !move.isStartCounting) {\n                countUp.isCountingUp = true;\n            }\n        }\n    };\n    return REN;\n}());\nexports.default = REN;\n//# sourceMappingURL=REN.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVENT_FLAG_MOVING = exports.EVENT_FLAG_COUNT_UP_OUT = exports.EVENT_FLAG_COUNTING_UP = exports.EVENT_FLAG_START_COUNTING = exports.EVENT_FLAG_DRAW = exports.EVENT_FLAG_WIN = exports.EVENT_FLAG_ATTACK = exports.PIECE_FLAG_START_COUNTING = exports.PIECE_FLAG_UPGRADE = exports.PIECE_FLAG_JUMP = exports.PIECE_FLAG_KILL = exports.NOT_SET = exports.DEFAULT_BOARD_STR = exports.STRING_COUNT = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.STRING_COUNT = 'B2F8G2H2K1Q1b2f8g2h2k1q1';\n// BHGQKGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgkqghb w ---- -- -.-\nexports.DEFAULT_BOARD_STR = 'BHGKQGHB/8/FFFFFFFF/8/8/ffffffff/8/bhgqkghb';\nexports.NOT_SET = '-';\nexports.PIECE_FLAG_KILL = '<';\nexports.PIECE_FLAG_JUMP = '^';\nexports.PIECE_FLAG_UPGRADE = '*';\nexports.PIECE_FLAG_START_COUNTING = '#';\nexports.EVENT_FLAG_ATTACK = 'attack';\nexports.EVENT_FLAG_WIN = 'win';\nexports.EVENT_FLAG_DRAW = 'draw';\nexports.EVENT_FLAG_START_COUNTING = 'start-counting';\nexports.EVENT_FLAG_COUNTING_UP = 'counting-up';\nexports.EVENT_FLAG_COUNT_UP_OUT = 'count-up-out';\nexports.EVENT_FLAG_MOVING = 'moving';\n//# sourceMappingURL=constant.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Point = exports.REN = exports.PieceIndex = exports.Piece = exports.KqJumped = exports.KAttacked = exports.Graveyard = exports.CountUp = exports.Board = void 0;\n/*\n * Copyright (c) 2021-2022, K4us\n * Author: Raksa Eng <eng.raksa@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice,\n *    this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS'\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n *\n *---------------------------------------------------------------------------- */\nvar Board_1 = require(\"./Board\");\nObject.defineProperty(exports, \"Board\", { enumerable: true, get: function () { return __importDefault(Board_1).default; } });\nvar CountUp_1 = require(\"./CountUp\");\nObject.defineProperty(exports, \"CountUp\", { enumerable: true, get: function () { return __importDefault(CountUp_1).default; } });\nvar Graveyard_1 = require(\"./Graveyard\");\nObject.defineProperty(exports, \"Graveyard\", { enumerable: true, get: function () { return __importDefault(Graveyard_1).default; } });\nvar KAttacked_1 = require(\"./KAttacked\");\nObject.defineProperty(exports, \"KAttacked\", { enumerable: true, get: function () { return __importDefault(KAttacked_1).default; } });\nvar KqJumped_1 = require(\"./KqJumped\");\nObject.defineProperty(exports, \"KqJumped\", { enumerable: true, get: function () { return __importDefault(KqJumped_1).default; } });\nvar Piece_1 = require(\"./Piece\");\nObject.defineProperty(exports, \"Piece\", { enumerable: true, get: function () { return __importDefault(Piece_1).default; } });\nvar PieceIndex_1 = require(\"./PieceIndex\");\nObject.defineProperty(exports, \"PieceIndex\", { enumerable: true, get: function () { return __importDefault(PieceIndex_1).default; } });\nvar REN_1 = require(\"./REN\");\nObject.defineProperty(exports, \"REN\", { enumerable: true, get: function () { return __importDefault(REN_1).default; } });\nvar Point_1 = require(\"./Point\");\nObject.defineProperty(exports, \"Point\", { enumerable: true, get: function () { return __importDefault(Point_1).default; } });\n__exportStar(require(\"./constant\"), exports);\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(507);\n"],"names":["root","factory","exports","module","define","amd","a","i","self","__importDefault","this","mod","__esModule","Object","defineProperty","value","package_json_1","constant_1","KPGN_1","table_1","REN_1","KhmerChess","renStr","ren","default","fromString","kpgn","prototype","loadKpng","option","fromJson","resetBoard","getCanMoves","genAllCanMoves","getCanMovePointsByPoint","point","validateRENStr","valid","error_number","error","message","getRENStr","toString","get","board","piecesMultiArray","enumerable","configurable","pieces","graveyard","getKPGN","toJson","loadKpgn","kpgnJosn","options","drawAscii","turn","set","move","moveFromIndex","moveToIndex","addMove","clearBoard","getHistories","moves","toKhmerNum","englishNum","split","map","c","VERTICAL_NOTE_LETTERS","VERTICAL_NOTE_LETTERS_ENGLISH","indexOf","join","title","name","version","HVPont","h","v","Number","HORIZONTAL_CODE_LETTERS","Piece_1","boardHelper_1","MoveHelper","piecesString","currentTurn","isQueenMoved","isKingMoved","genCanMove","genCanMoveForAnother","whiteMoves","blackMoves","whiteKingInDanger","whiteKingWillInDanger","blackKingInDanger","blackKingWillInDanger","winColor","stuckColor","isWhiteColor","init","generateCanMoves","_this","filter","filterPieceInBoard","whitePieces","blackPieces","genMoves","pieceIndices","forEach","pieceIndex","isHaveMoved","piece","isTypeKing","isTypeQueen","canMovePoints","genCanMovePointsByPiecePoint","cleanPieceNoMove","cleanMoves","isTrue","length","splice","checkIfKingInDanger","getKingInDanger","PIECE_COLOR_WHITE","getKingWillInDanger","PIECE_COLOR_BLACK","genWinLost","getStuck","isWhiteTurn","calcCanMove","anotherMoves","calcState","calCount","_a","color","force","checkCount","isHasMoved","index","Rectangle","x","y","width","height","isContainsPoint","isValidPoint","ROW_LAST_INDEX","CountUpState","genMask_1","Point_1","Rectangle_1","ren_1","mask","countingNumber","countingToNumber","BoardHelper","convertMask","point1","sign","point2","fromIndex","getCharPieceFromString","isIndexInBoard","CELL_COUNT","EMPTY_PIECE","getCharPieceInPos","getPieceByIndex","charCode","isValidPiece","fromCharCode","getPieceCanMovePoses","type","_pos","newIndex","push","getPieceCanMovePosesValid","_poses","n","thisPos","p","distPiece","isTypeFish","isTypeBoat","_x","_y","_n","Math","abs","_s","xyToIndex","replacePiecesStringAtIndex","substring","injectPiece","index1","index2","isCharPiecesInBoard","kingPos","PIECE_TYPE_KING","pieceCharCode","j","isHaveCaptured","points","str","code","getPiecesInBoard","ROW_NUMBER","PieceIndex","isColorWhite","extractPiecesToArray","piecesStringArr","pieceAll","isStateCount","checkCountable","weaker","stronger","oppositeColor","countChar","PIECE_TYPE_FISH","count","toukCount","PIECE_TYPE_BOAT","PIECE_TYPE_GENERAL","PIECE_TYPE_HORSE","start","isUpgradable","isColorBlack","_b","_c","_d","HORIZONTAL_NOTE_LETTERS_ENGLISH","HORIZONTAL_NOTE_LETTERS","ROW_FIRST_INDEX","BOARD_SEPARATOR","PIECE_COLOR_EMPTY","PIECE_NAMES_ENGLISH","PIECE_NAMES","PIECE_TYPE_TRANSFORM_FISH","PIECE_TYPE_QUEEN","COLOR_NAMES_ENGLISH","COLOR_NAMES","Array","from","_","concat","__createBinding","create","o","m","k","k2","undefined","__exportStar","hasOwnProperty","call","genMask","boardHelper","HVPont_1","MoveHelper_1","KhmerChess_1","__setModuleDefault","__importStar","result","khmerChessNS","fromBoardPoint","toGraveyardPoint","Move_1","Player_1","Result_1","Timer_1","base64Helper_1","KPGN","event","date","location","players","white","black","last","whiteWin","blackWin","timer","latestMove","isCanMoveNext","getMove","loadRENStr","syncWithMove","loadMovesStrings","currentRen","reverse","moveStr","Error","backRen","Date","console","log","fromBase64","json","JSON","parse","decode","toBase64","jsStr","stringify","encode","brain_1","Captured_1","Move","moveFrom","moveTo","isUpgrading","captured","boardStatus","attacker","drawCountColor","isStartCounting","upgrade","kqJumping","KqJumped","setRen","checkBoardStatus","kqJumped","checkKQMoved","checkCountStatus","syncRen","whiteKing","whiteQueen","blackKing","blackQueen","isDraw","fromIndexCode","substr","killIndex","PIECE_FLAG_KILL","match","gyIndex","capturedPiece","fromIndexGraveyardIndex","jumpingIndex","PIECE_FLAG_JUMP","fromNumber","PIECE_FLAG_START_COUNTING","pCode","fIndexCode","indexCode","tIndexCode","flags","isJumped","toNumber","PIECE_FLAG_UPGRADE","getJumpingMessage","isEnglish","jump","isWhiteKingJumping","isWhiteQueenJumping","isBlackKingJumping","isBlackQueenJumping","getMessage","titleEnglish","Player","id","Result","win","draw","lost","Timer","totalSecond","bonusTime","currentWhite","currentBlack","Captured","EventHandler","_onEventListeners","_propEvent","_isLockProp","events","destroy","_checkPropEvent","shift","_checkOnEvent","data","_addPropEvent","_guardEventName","eventName","listener","_addOnEventListener","_removeOnEventListener","Base64","_keyStr","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","isNaN","charAt","replace","String","_utf8_decode","string","utftext","c1","c2","table","EventHandler_1","__spreadArray","to","pack","arguments","ar","l","slice","renderLine","reduce","s","subArr","PieceIndex_1","constant_2","Board","boardStr","DEFAULT_BOARD_STR","newBoardStr","extract","isValidPiecesString","arr","find","getKing","compress","reg","RegExp","$1","toStringFull","toPieceCharCode","toStringFullNoSeparate","getPieceAtIndex","setPieceAtIndex","CountUp","isCountingUp","isCounting","isWhite","clear","checkUp","countUpStr","NOT_SET","countUp","countingUp","countingUpWB","Graveyard","graveyardStr","removeAtIndex","KAttacked","kAttackedStr","toWhiteCharCode","kqJumpedStr","keyCodes","codeKeys","setProp","key","applyJumping","propKey","parseInt","b","Piece","toNormalCharCode","pieceCharCodeWhite","_isTypeEqual","isBlackColor","isWhiteCharCode","isTypeTransformedFish","toUpperCase","toBlackCharCode","toLowerCase","onlyPiece","ruler","allPiecesString","some","downgrade","clone","pieceChars","pieceChar","toCode","Point","indexCodeToXY","indexCodeToIndex","indexToXY","floor","Board_1","KqJumped_1","KAttacked_1","CountUp_1","Graveyard_1","kpgn_1","_1","REN","renProps","moveHelper","turnStr","kAttacked","invalidPiecesString","isInvalidPieceCount","msg","piecesCount","pos","originPiece","obj","keys","sort","STRING_COUNT","moveBack","isCountingOut","targetPiece","lastIndex","movedToIndex","movedFromIndex","movedToGYIndex","renArr","state","kingInDanger","countState","getWinColor","EVENT_FLAG_MOVING","EVENT_FLAG_COUNT_UP_OUT","EVENT_FLAG_COUNTING_UP","EVENT_FLAG_START_COUNTING","EVENT_FLAG_DRAW","EVENT_FLAG_WIN","EVENT_FLAG_ATTACK","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}